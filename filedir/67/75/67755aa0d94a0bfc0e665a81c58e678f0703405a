/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
	 * Sizzle CSS Selector Engine v1.10.2
	 * http://sizzlejs.com/
	 *
	 * Copyright 2013 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2013-07-03
	 */

/*!
 * Copyright e-doceo 2014
 * REVISION: $REVISION$
 * DATE: $DATE$
 */

/*!
 * jQuery UI Effects 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */

/*!
	 * jQuery Color Animations v2.1.2
	 * https://github.com/jquery/jquery-color
	 *
	 * Copyright 2013 jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * Date: Wed Jan 16 08:47:09 2013 -0600
	 */

!function(e,t){function i(e){var t=e.length,i=ce.type(e);return!ce.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function n(e){var t=Ce[e]={};return ce.each(e.match(ue)||[],function(e,i){t[i]=!0}),t}function o(e,i,n,o){if(ce.acceptData(e)){var r,s,a=ce.expando,l=e.nodeType,c=l?ce.cache:e,h=l?e[a]:e[a]&&a;if(h&&c[h]&&(o||c[h].data)||n!==t||"string"!=typeof i)return h||(h=l?e[a]=te.pop()||ce.guid++:a),c[h]||(c[h]=l?{}:{toJSON:ce.noop}),"object"!=typeof i&&"function"!=typeof i||(o?c[h]=ce.extend(c[h],i):c[h].data=ce.extend(c[h].data,i)),s=c[h],o||(s.data||(s.data={}),s=s.data),n!==t&&(s[ce.camelCase(i)]=n),"string"==typeof i?null==(r=s[i])&&(r=s[ce.camelCase(i)]):r=s,r}}function r(e,t,i){if(ce.acceptData(e)){var n,o,r=e.nodeType,s=r?ce.cache:e,l=r?e[ce.expando]:ce.expando;if(s[l]){if(t&&(n=i?s[l]:s[l].data)){ce.isArray(t)?t=t.concat(ce.map(t,ce.camelCase)):t in n?t=[t]:(t=ce.camelCase(t),t=t in n?[t]:t.split(" ")),o=t.length;for(;o--;)delete n[t[o]];if(i?!a(n):!ce.isEmptyObject(n))return}(i||(delete s[l].data,a(s[l])))&&(r?ce.cleanData([e],!0):ce.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}}function s(e,i,n){if(n===t&&1===e.nodeType){var o="data-"+i.replace(_e,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ke.test(n)?ce.parseJSON(n):n)}catch(e){}ce.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!ce.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function h(){try{return $.activeElement}catch(e){}}function u(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function d(e,t,i){if(ce.isFunction(t))return ce.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ce.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(je.test(t))return ce.filter(t,e,i);t=ce.filter(t,e)}return ce.grep(e,function(e){return ce.inArray(e,t)>=0!==i})}function g(e){var t=Qe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function f(e,t){return ce.nodeName(e,"table")&&ce.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==ce.find.attr(e,"type"))+"/"+e.type,e}function m(e){var t=nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function A(e,t){for(var i,n=0;null!=(i=e[n]);n++)ce._data(i,"globalEval",!t||ce._data(t[n],"globalEval"))}function v(e,t){if(1===t.nodeType&&ce.hasData(e)){var i,n,o,r=ce._data(e),s=ce._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,o=a[i].length;n<o;n++)ce.event.add(t,i,a[i][n])}s.data&&(s.data=ce.extend({},s.data))}}function b(e,t){var i,n,o;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ce.support.noCloneEvent&&t[ce.expando]){o=ce._data(t);for(n in o.events)ce.removeEvent(t,n,o.handle);t.removeAttribute(ce.expando)}"script"===i&&t.text!==e.text?(p(t).text=e.text,m(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ce.support.html5Clone&&e.innerHTML&&!ce.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}function y(e,i){var n,o,r=0,s=typeof e.getElementsByTagName!==W?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==W?e.querySelectorAll(i||"*"):t;if(!s)for(s=[],n=e.childNodes||e;null!=(o=n[r]);r++)!i||ce.nodeName(o,i)?s.push(o):ce.merge(s,y(o,i));return i===t||i&&ce.nodeName(e,i)?ce.merge([e],s):s}function S(e){et.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=xt.length;o--;)if((t=xt[o]+i)in e)return t;return n}function x(e,t){return e=t||e,"none"===ce.css(e,"display")||!ce.contains(e.ownerDocument,e)}function C(e,t){for(var i,n,o,r=[],s=0,a=e.length;s<a;s++)n=e[s],n.style&&(r[s]=ce._data(n,"olddisplay"),i=n.style.display,t?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&x(n)&&(r[s]=ce._data(n,"olddisplay",R(n.nodeName)))):r[s]||(o=x(n),(i&&"none"!==i||!o)&&ce._data(n,"olddisplay",o?i:ce.css(n,"display"))));for(s=0;s<a;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[s]||"":"none"));return e}function k(e,t,i){var n=mt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function _(e,t,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;r<4;r+=2)"margin"===i&&(s+=ce.css(e,i+wt[r],!0,o)),n?("content"===i&&(s-=ce.css(e,"padding"+wt[r],!0,o)),"margin"!==i&&(s-=ce.css(e,"border"+wt[r]+"Width",!0,o))):(s+=ce.css(e,"padding"+wt[r],!0,o),"padding"!==i&&(s+=ce.css(e,"border"+wt[r]+"Width",!0,o)));return s}function T(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=ct(e),s=ce.support.boxSizing&&"border-box"===ce.css(e,"boxSizing",!1,r);if(o<=0||null==o){if(o=ht(e,t,r),(o<0||null==o)&&(o=e.style[t]),At.test(o))return o;n=s&&(ce.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+_(e,t,i||(s?"border":"content"),n,r)+"px"}function R(e){var t=$,i=bt[e];return i||(i=E(e,t),"none"!==i&&i||(lt=(lt||ce("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(lt[0].contentWindow||lt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=E(e,t),lt.detach()),bt[e]=i),i}function E(e,t){var i=ce(t.createElement(e)).appendTo(t.body),n=ce.css(i[0],"display");return i.remove(),n}function N(e,t,i,n){var o;if(ce.isArray(t))ce.each(t,function(t,o){i||kt.test(e)?n(e,o):N(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==ce.type(t))n(e,t);else for(o in t)N(e+"["+o+"]",t[o],i,n)}function L(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(ue)||[];if(ce.isFunction(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function I(e,t,i,n){function o(a){var l;return r[a]=!0,ce.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=e===zt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function U(e,i){var n,o,r=ce.ajaxSettings.flatOptions||{};for(o in i)i[o]!==t&&((r[o]?e:n||(n={}))[o]=i[o]);return n&&ce.extend(!0,e,n),e}function F(e,i,n){for(var o,r,s,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in n)s=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){s=a;break}o||(o=a)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}function M(e,t,i,n){var o,r,s,a,l,c={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=h.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function B(){try{return new e.XMLHttpRequest}catch(e){}}function P(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function O(){return setTimeout(function(){$t=t}),$t=ce.now()}function D(e,t,i){for(var n,o=(ii[t]||[]).concat(ii["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,t,e))return n}function K(e,t,i){var n,o,r=0,s=ti.length,a=ce.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=$t||O(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,r=1-n,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,i]),r<1&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ce.extend({},t),opts:ce.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:$t||O(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ce.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),h=c.props;for(j(h,c.opts.specialEasing);r<s;r++)if(n=ti[r].call(c,e,h,c.opts))return n;return ce.map(h,D,c),ce.isFunction(c.opts.start)&&c.opts.start.call(e,c),ce.fx.timer(ce.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function j(e,t){var i,n,o,r,s;for(i in e)if(n=ce.camelCase(i),o=t[n],r=e[i],ce.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(s=ce.cssHooks[n])&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function z(e,t,i){var n,o,r,s,a,l,c=this,h={},u=e.style,d=e.nodeType&&x(e),g=ce._data(e,"fxshow");i.queue||(a=ce._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===ce.css(e,"display")&&"none"===ce.css(e,"float")&&(ce.support.inlineBlockNeedsLayout&&"inline"!==R(e.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",ce.support.shrinkWrapBlocks||c.always(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],Jt.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(d?"hide":"show"))continue;h[n]=g&&g[n]||ce.style(e,n)}if(!ce.isEmptyObject(h)){g?"hidden"in g&&(d=g.hidden):g=ce._data(e,"fxshow",{}),r&&(g.hidden=!d),d?ce(e).show():c.done(function(){ce(e).hide()}),c.done(function(){var t;ce._removeData(e,"fxshow");for(t in h)ce.style(e,t,h[t])});for(n in h)s=D(d?g[n]:0,n,c),n in g||(g[n]=s.start,d&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function H(e,t,i,n,o){return new H.prototype.init(e,t,i,n,o)}function q(e,t){var i,n={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)i=wt[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function Q(e){return ce.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var G,V,W=typeof t,X=e.location,$=e.document,Y=$.documentElement,J=e.jQuery,Z=e.$,ee={},te=[],ie=te.concat,ne=te.push,oe=te.slice,re=te.indexOf,se=ee.toString,ae=ee.hasOwnProperty,le="1.10.2".trim,ce=function(e,t){return new ce.fn.init(e,t,V)},he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=/\S+/g,de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^[\],:{}\s]*$/,me=/(?:^|:|,)(?:\s*\[)+/g,Ae=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,ye=/-([\da-z])/gi,Se=function(e,t){return t.toUpperCase()},we=function(e){($.addEventListener||"load"===e.type||"complete"===$.readyState)&&(xe(),ce.ready())},xe=function(){$.addEventListener?($.removeEventListener("DOMContentLoaded",we,!1),e.removeEventListener("load",we,!1)):($.detachEvent("onreadystatechange",we),e.detachEvent("onload",we))};ce.fn=ce.prototype={jquery:"1.10.2",constructor:ce,init:function(e,i,n){var o,r;if(!e)return this;if("string"==typeof e){if(!(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e))||!o[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(o[1]){if(i=i instanceof ce?i[0]:i,ce.merge(this,ce.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:$,!0)),fe.test(o[1])&&ce.isPlainObject(i))for(o in i)ce.isFunction(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}if((r=$.getElementById(o[2]))&&r.parentNode){if(r.id!==o[2])return n.find(e);this.length=1,this[0]=r}return this.context=$,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ce.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ce.makeArray(e,this))},selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ce.each(this,e,t)},ready:function(e){return ce.ready.promise().done(e),this},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},map:function(e){return this.pushStack(ce.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},ce.fn.init.prototype=ce.fn,ce.extend=ce.fn.extend=function(){var e,i,n,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||ce.isFunction(a)||(a={}),c===l&&(a=this,--l);l<c;l++)if(null!=(r=arguments[l]))for(o in r)e=a[o],n=r[o],a!==n&&(h&&n&&(ce.isPlainObject(n)||(i=ce.isArray(n)))?(i?(i=!1,s=e&&ce.isArray(e)?e:[]):s=e&&ce.isPlainObject(e)?e:{},a[o]=ce.extend(h,s,n)):n!==t&&(a[o]=n));return a},ce.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ce&&(e.$=Z),t&&e.jQuery===ce&&(e.jQuery=J),ce},isReady:!1,readyWait:1,holdReady:function(e){e?ce.readyWait++:ce.ready(!0)},ready:function(e){if(!0===e?!--ce.readyWait:!ce.isReady){if(!$.body)return setTimeout(ce.ready);ce.isReady=!0,!0!==e&&--ce.readyWait>0||(G.resolveWith($,[ce]),ce.fn.trigger&&ce($).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ce.type(e)},isArray:Array.isArray||function(e){return"array"===ce.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?ee[se.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==ce.type(e)||e.nodeType||ce.isWindow(e))return!1;try{if(e.constructor&&!ae.call(e,"constructor")&&!ae.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ce.support.ownLast)for(i in e)return ae.call(e,i);for(i in e);return i===t||ae.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||$;var n=fe.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=ce.buildFragment([e],t,o),o&&ce(o).remove(),ce.merge([],n.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ce.trim(t))&&pe.test(t.replace(Ae,"@").replace(ve,"]").replace(me,""))?new Function("return "+t)():void ce.error("Invalid JSON: "+t)},parseXML:function(i){var n,o;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(e){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ce.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&ce.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(be,"ms-").replace(ye,Se)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o=0,r=e.length,s=i(e);if(n){if(s)for(;o<r&&!1!==t.apply(e[o],n);o++);else for(o in e)if(!1===t.apply(e[o],n))break}else if(s)for(;o<r&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:le&&!le.call("\ufeff ")?function(e){return null==e?"":le.call(e)}:function(e){return null==e?"":(e+"").replace(de,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):ne.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(re)return re.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,o=e.length,r=0;if("number"==typeof n)for(;r<n;r++)e[o++]=i[r];else for(;i[r]!==t;)e[o++]=i[r++];return e.length=o,e},grep:function(e,t,i){var n,o=[],r=0,s=e.length;for(i=!!i;r<s;r++)n=!!t(e[r],r),i!==n&&o.push(e[r]);return o},map:function(e,t,n){var o,r=0,s=e.length,a=i(e),l=[];if(a)for(;r<s;r++)null!=(o=t(e[r],r,n))&&(l[l.length]=o);else for(r in e)null!=(o=t(e[r],r,n))&&(l[l.length]=o);return ie.apply([],l)},guid:1,proxy:function(e,i){var n,o,r;return"string"==typeof i&&(r=e[i],i=e,e=r),ce.isFunction(e)?(n=oe.call(arguments,2),o=function(){return e.apply(i||this,n.concat(oe.call(arguments)))},o.guid=e.guid=e.guid||ce.guid++,o):t},access:function(e,i,n,o,r,s,a){var l=0,c=e.length,h=null==n;if("object"===ce.type(n)){r=!0;for(l in n)ce.access(e,i,l,n[l],!0,s,a)}else if(o!==t&&(r=!0,ce.isFunction(o)||(a=!0),h&&(a?(i.call(e,o),i=null):(h=i,i=function(e,t,i){return h.call(ce(e),i)})),i))for(;l<c;l++)i(e[l],n,a?o:o.call(e[l],l,i(e[l],n)));return r?e:h?i.call(e):c?i(e[0],n):s},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=s[r];return o}}),ce.ready.promise=function(t){if(!G)if(G=ce.Deferred(),"complete"===$.readyState)setTimeout(ce.ready);else if($.addEventListener)$.addEventListener("DOMContentLoaded",we,!1),e.addEventListener("load",we,!1);else{$.attachEvent("onreadystatechange",we),e.attachEvent("onload",we);var i=!1;try{i=null==e.frameElement&&$.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!ce.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}xe(),ce.ready()}}()}return G.promise(t)},ce.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()}),V=ce($),function(e,t){function i(e,t,i,n){var o,r,s,a,l,c,d,g,f,p;if((t?t.ownerDocument||t:O)!==N&&E(t),t=t||N,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(I&&!n){if(o=me.exec(e))if(s=o[1]){if(9===a){if(!(r=t.getElementById(s))||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&B(t,r)&&r.id===s)return i.push(r),i}else{if(o[2])return Y.apply(i,t.getElementsByTagName(e)),i;if((s=o[3])&&S.getElementsByClassName&&t.getElementsByClassName)return Y.apply(i,t.getElementsByClassName(s)),i}if(S.qsa&&(!U||!U.test(e))){if(g=d=P,f=t,p=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(d=t.getAttribute("id"))?g=d.replace(be,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",l=c.length;l--;)c[l]=g+u(c[l]);f=he.test(e)&&t.parentNode||t,p=c.join(",")}if(p)try{return Y.apply(i,f.querySelectorAll(p)),i}catch(e){}finally{d||t.removeAttribute("id")}}}return b(e.replace(se,"$1"),t,i,n)}function n(){function e(i,n){return t.push(i+=" ")>x.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function o(e){return e[P]=!0,e}function r(e){var t=N.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=e.length;n--;)x.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return o(function(t){return t=+t,o(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function c(){}function h(e,t){var n,o,r,s,a,l,c,h=z[e+" "];if(h)return t?0:h.slice(0);for(a=e,l=[],c=x.preFilter;a;){n&&!(o=ae.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=le.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(se," ")}),a=a.slice(n.length));for(s in x.filter)!(o=fe[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?i.error(e):z(e,l).slice(0)}function u(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function d(e,t,i){var n=t.dir,o=i&&"parentNode"===n,r=K++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r)}:function(t,i,s){var a,l,c,h=D+" "+r;if(s){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=t[P]||(t[P]={}),(l=c[n])&&l[0]===h){if(!0===(a=l[1])||a===w)return!0===a}else if(l=c[n]=[h],l[1]=e(t,i,s)||w,!0===l[1])return!0}}function g(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function f(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(i&&!i(r,n,o)||(s.push(r),c&&t.push(a)));return s}function p(e,t,i,n,r,s){return n&&!n[P]&&(n=p(n)),r&&!r[P]&&(r=p(r,s)),o(function(o,s,a,l){var c,h,u,d=[],g=[],p=s.length,m=o||v(t||"*",a.nodeType?[a]:a,[]),A=!e||!o&&t?m:f(m,d,e,a,l),b=i?r||(o?e:p||n)?[]:s:A;if(i&&i(A,b,a,l),n)for(c=f(b,g),n(c,[],a,l),h=c.length;h--;)(u=c[h])&&(b[g[h]]=!(A[g[h]]=u));if(o){if(r||e){if(r){for(c=[],h=b.length;h--;)(u=b[h])&&c.push(A[h]=u);r(null,b=[],c,l)}for(h=b.length;h--;)(u=b[h])&&(c=r?Z.call(o,u):d[h])>-1&&(o[c]=!(s[c]=u))}}else b=f(b===s?b.splice(p,b.length):b),r?r(null,s,b,l):Y.apply(s,b)})}function m(e){for(var t,i,n,o=e.length,r=x.relative[e[0].type],s=r||x.relative[" "],a=r?1:0,l=d(function(e){return e===t},s,!0),c=d(function(e){return Z.call(t,e)>-1},s,!0),h=[function(e,i,n){return!r&&(n||i!==T)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];a<o;a++)if(i=x.relative[e[a].type])h=[d(g(h),i)];else{if(i=x.filter[e[a].type].apply(null,e[a].matches),i[P]){for(n=++a;n<o&&!x.relative[e[n].type];n++);return p(a>1&&g(h),a>1&&u(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(se,"$1"),i,a<n&&m(e.slice(a,n)),n<o&&m(e=e.slice(n)),n<o&&u(e))}h.push(i)}return g(h)}function A(e,t){var n=0,r=t.length>0,s=e.length>0,a=function(o,a,l,c,h){var u,d,g,p=[],m=0,A="0",v=o&&[],b=null!=h,y=T,S=o||s&&x.find.TAG("*",h&&a.parentNode||a),C=D+=null==y?1:Math.random()||.1;for(b&&(T=a!==N&&a,w=n);null!=(u=S[A]);A++){if(s&&u){for(d=0;g=e[d++];)if(g(u,a,l)){c.push(u);break}b&&(D=C,w=++n)}r&&((u=!g&&u)&&m--,o&&v.push(u))}if(m+=A,r&&A!==m){for(d=0;g=t[d++];)g(v,p,a,l);if(o){if(m>0)for(;A--;)v[A]||p[A]||(p[A]=X.call(c));p=f(p)}Y.apply(c,p),b&&!o&&p.length>0&&m+t.length>1&&i.uniqueSort(c)}return b&&(D=C,T=y),v};return r?o(a):a}function v(e,t,n){for(var o=0,r=t.length;o<r;o++)i(e,t[o],n);return n}function b(e,t,i,n){var o,r,s,a,l,c=h(e);if(!n&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&S.getById&&9===t.nodeType&&I&&x.relative[r[1].type]){if(!(t=(x.find.ID(s.matches[0].replace(ye,Se),t)||[])[0]))return i;e=e.slice(r.shift().value.length)}for(o=fe.needsContext.test(e)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(ye,Se),he.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),!(e=n.length&&u(r)))return Y.apply(i,n),i;break}}return _(e,c)(n,t,!I,i,he.test(e)),i}var y,S,w,x,C,k,_,T,R,E,N,L,I,U,F,M,B,P="sizzle"+-new Date,O=e.document,D=0,K=0,j=n(),z=n(),H=n(),q=!1,Q=function(e,t){return e===t?(q=!0,0):0},G=1<<31,V={}.hasOwnProperty,W=[],X=W.pop,$=W.push,Y=W.push,J=W.slice,Z=W.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=ie.replace("w","w#"),oe="\\["+te+"*("+ie+")"+te+"*(?:([*^$|!~]?=)"+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+te+"*\\]",re=":("+ie+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",se=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),ae=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),he=new RegExp(te+"*[+~]"),ue=new RegExp("="+te+"*([^\\]'\"]*)"+te+"*\\]","g"),de=new RegExp(re),ge=new RegExp("^"+ne+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ae=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,be=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),Se=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Y.apply(W=J.call(O.childNodes),O.childNodes),W[O.childNodes.length].nodeType}catch(e){Y={apply:W.length?function(e,t){$.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}k=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},S=i.support={},E=i.setDocument=function(e){var t=e?e.ownerDocument||e:O,i=t.defaultView;return t!==N&&9===t.nodeType&&t.documentElement?(N=t,L=t.documentElement,I=!k(t),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){E()}),S.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=r(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),S.getById=r(function(e){return L.appendChild(e).id=P,!t.getElementsByName||!t.getElementsByName(P).length}),S.getById?(x.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(e){var t=e.replace(ye,Se);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(ye,Se);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),x.find.TAG=S.getElementsByTagName?function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e)}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},x.find.CLASS=S.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&I)return t.getElementsByClassName(e)},F=[],U=[],(S.qsa=pe.test(t.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||U.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll(":checked").length||U.push(":checked")}),r(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&U.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||U.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),U.push(",.*:")})),(S.matchesSelector=pe.test(M=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(e){S.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),F.push("!=",re)}),U=U.length&&new RegExp(U.join("|")),F=F.length&&new RegExp(F.join("|")),B=pe.test(L.contains)||L.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Q=L.compareDocumentPosition?function(e,i){if(e===i)return q=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!S.sortDetached&&i.compareDocumentPosition(e)===n?e===t||B(O,e)?-1:i===t||B(O,i)?1:R?Z.call(R,e)-Z.call(R,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,o=0,r=e.parentNode,s=i.parentNode,l=[e],c=[i];if(e===i)return q=!0,0;if(!r||!s)return e===t?-1:i===t?1:r?-1:s?1:R?Z.call(R,e)-Z.call(R,i):0;if(r===s)return a(e,i);for(n=e;n=n.parentNode;)l.unshift(n);for(n=i;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===O?-1:c[o]===O?1:0},t):N},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==N&&E(e),t=t.replace(ue,"='$1']"),S.matchesSelector&&I&&(!F||!F.test(t))&&(!U||!U.test(t)))try{var n=M.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return i(t,N,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==N&&E(e),B(e,t)},i.attr=function(e,t){(e.ownerDocument||e)!==N&&E(e);var i=x.attrHandle[t.toLowerCase()],n=i&&V.call(x.attrHandle,t.toLowerCase())?i(e,t,!I):void 0;return void 0===n?S.attributes||!I?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null:n},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,o=0;if(q=!S.detectDuplicates,R=!S.sortStable&&e.slice(0),e.sort(Q),q){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return e},C=i.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)i+=C(t);return i},x=i.selectors={cacheLength:50,createPseudo:o,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,Se),e[3]=(e[4]||e[5]||"").replace(ye,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&de.test(i)&&(t=h(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var r=i.attr(o,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,h,u,d,g,f,p=r!==s?"nextSibling":"previousSibling",m=t.parentNode,A=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(m){if(r){for(;p;){
for(u=t;u=u[p];)if(a?u.nodeName.toLowerCase()===A:1===u.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&v){for(h=m[P]||(m[P]={}),c=h[e]||[],g=c[0]===D&&c[1],d=c[0]===D&&c[2],u=g&&m.childNodes[g];u=++g&&u&&u[p]||(d=g=0)||f.pop();)if(1===u.nodeType&&++d&&u===t){h[e]=[D,g,d];break}}else if(v&&(c=(t[P]||(t[P]={}))[e])&&c[0]===D)d=c[1];else for(;(u=++g&&u&&u[p]||(d=g=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==A:1!==u.nodeType)||!++d||(v&&((u[P]||(u[P]={}))[e]=[D,d]),u!==t)););return(d-=o)===n||d%n==0&&d/n>=0}}},PSEUDO:function(e,t){var n,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return r[P]?r(t):r.length>1?(n=[e,e,"",t],x.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,i){for(var n,o=r(e,t),s=o.length;s--;)n=Z.call(e,o[s]),e[n]=!(i[n]=o[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:o(function(e){var t=[],i=[],n=_(e.replace(se,"$1"));return n[P]?o(function(e,t,i,o){for(var r,s=n(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),!i.pop()}}),has:o(function(e){return function(t){return i(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:o(function(e){return ge.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(ye,Se).toLowerCase(),function(t){var i;do{if(i=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return Ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:l(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},x.pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(y);c.prototype=x.filters=x.pseudos,x.setFilters=new c,_=i.compile=function(e,t){var i,n=[],o=[],r=H[e+" "];if(!r){for(t||(t=h(e)),i=t.length;i--;)r=m(t[i]),r[P]?n.push(r):o.push(r);r=H(e,A(o,n))}return r},S.sortStable=P.split("").sort(Q).join("")===P,S.detectDuplicates=q,E(),S.sortDetached=r(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(ee,function(e,t,i){var n;if(!i)return(n=e.getAttributeNode(t))&&n.specified?n.value:!0===e[t]?t.toLowerCase():null}),ce.find=i,ce.expr=i.selectors,ce.expr[":"]=ce.expr.pseudos,ce.unique=i.uniqueSort,ce.text=i.getText,ce.isXMLDoc=i.isXML,ce.contains=i.contains}(e);var Ce={};ce.Callbacks=function(e){e="string"==typeof e?Ce[e]||n(e):ce.extend({},e);var i,o,r,s,a,l,c=[],h=!e.once&&[],u=function(t){for(o=e.memory&&t,r=!0,a=l||0,l=0,s=c.length,i=!0;c&&a<s;a++)if(!1===c[a].apply(t[0],t[1])&&e.stopOnFalse){o=!1;break}i=!1,c&&(h?h.length&&u(h.shift()):o?c=[]:d.disable())},d={add:function(){if(c){var t=c.length;!function t(i){ce.each(i,function(i,n){var o=ce.type(n);"function"===o?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&t(n)})}(arguments),i?s=c.length:o&&(l=t,u(o))}return this},remove:function(){return c&&ce.each(arguments,function(e,t){for(var n;(n=ce.inArray(t,c,n))>-1;)c.splice(n,1),i&&(n<=s&&s--,n<=a&&a--)}),this},has:function(e){return e?ce.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=h=o=t,this},disabled:function(){return!c},lock:function(){return h=t,o||d.disable(),this},locked:function(){return!h},fireWith:function(e,t){return!c||r&&!h||(t=t||[],t=[e,t.slice?t.slice():t],i?h.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ce.extend({Deferred:function(e){var t=[["resolve","done",ce.Callbacks("once memory"),"resolved"],["reject","fail",ce.Callbacks("once memory"),"rejected"],["notify","progress",ce.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ce.Deferred(function(i){ce.each(t,function(t,r){var s=r[0],a=ce.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&ce.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ce.extend(e,n):n}},o={};return n.pipe=n.then,ce.each(t,function(e,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=oe.call(arguments),s=r.length,a=1!==s||e&&ce.isFunction(e.promise)?s:0,l=1===a?e:ce.Deferred(),c=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?oe.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);o<s;o++)r[o]&&ce.isFunction(r[o].promise)?r[o].promise().done(c(o,n,r)).fail(l.reject).progress(c(o,i,t)):--a;return a||l.resolveWith(n,r),l.promise()}}),ce.support=function(t){var i,n,o,r,s,a,l,c,h,u=$.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=u.getElementsByTagName("*")||[],!(n=u.getElementsByTagName("a")[0])||!n.style||!i.length)return t;r=$.createElement("select"),a=r.appendChild($.createElement("option")),o=u.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==u.className,t.leadingWhitespace=3===u.firstChild.nodeType,t.tbody=!u.getElementsByTagName("tbody").length,t.htmlSerialize=!!u.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!o.value,t.optSelected=a.selected,t.enctype=!!$.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==$.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete u.test}catch(e){t.deleteExpando=!1}o=$.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),s=$.createDocumentFragment(),s.appendChild(o),t.appendChecked=o.checked,t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})u.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||!1===u.attributes[l].expando;u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===u.style.backgroundClip;for(h in ce(t))break;return t.ownLast="0"!==h,ce(function(){var i,n,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=$.getElementsByTagName("body")[0];s&&(i=$.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(i).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=u.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ce.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===u.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(u,null)||{width:"4px"}).width,n=u.appendChild($.createElement("div")),n.style.cssText=u.style.cssText=r,n.style.marginRight=n.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof u.style.zoom!==W&&(u.innerHTML="",u.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(i),i=u=o=n=null)}),i=r=s=a=n=o=null,t}({});var ke=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,_e=/([A-Z])/g;ce.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ce.cache[e[ce.expando]]:e[ce.expando])&&!a(e)},data:function(e,t,i){return o(e,t,i)},removeData:function(e,t){return r(e,t)},_data:function(e,t,i){return o(e,t,i,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ce.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),ce.fn.extend({data:function(e,i){var n,o,r=null,a=0,l=this[0];if(e===t){if(this.length&&(r=ce.data(l),1===l.nodeType&&!ce._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)o=n[a].name,0===o.indexOf("data-")&&(o=ce.camelCase(o.slice(5)),s(l,o,r[o]));ce._data(l,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ce.data(this,e)}):arguments.length>1?this.each(function(){ce.data(this,e,i)}):l?s(l,e,ce.data(l,e)):null},removeData:function(e){return this.each(function(){ce.removeData(this,e)})}}),ce.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=ce._data(e,t),i&&(!n||ce.isArray(i)?n=ce._data(e,t,ce.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ce.queue(e,t),n=i.length,o=i.shift(),r=ce._queueHooks(e,t),s=function(){ce.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ce._data(e,i)||ce._data(e,i,{empty:ce.Callbacks("once memory").add(function(){ce._removeData(e,t+"queue"),ce._removeData(e,i)})})}}),ce.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?ce.queue(this[0],e):i===t?this:this.each(function(){var t=ce.queue(this,e,i);ce._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ce.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},delay:function(e,t){return e=ce.fx?ce.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,o=1,r=ce.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)(n=ce._data(s[a],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(l));return l(),r.promise(i)}});var Te,Re,Ee=/[\t\r\n\f]/g,Ne=/\r/g,Le=/^(?:input|select|textarea|button|object)$/i,Ie=/^(?:a|area)$/i,Ue=/^(?:checked|selected)$/i,Fe=ce.support.getSetAttribute,Me=ce.support.input;ce.fn.extend({attr:function(e,t){return ce.access(this,ce.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})},prop:function(e,t){return ce.access(this,ce.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ce.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,n,o,r,s=0,a=this.length,l="string"==typeof e&&e;if(ce.isFunction(e))return this.each(function(t){ce(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ue)||[];s<a;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):" ")){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i.className=ce.trim(n)}return this},removeClass:function(e){var t,i,n,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ce.isFunction(e))return this.each(function(t){ce(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ue)||[];s<a;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):"")){for(r=0;o=t[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=e?ce.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ce.isFunction(e)?this.each(function(i){ce(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,o=ce(this),r=e.match(ue)||[];t=r[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else i!==W&&"boolean"!==i||(this.className&&ce._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ce._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ee," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,o,r=this[0];{if(arguments.length)return o=ce.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=o?e.call(this,i,ce(this).val()):e,null==r?r="":"number"==typeof r?r+="":ce.isArray(r)&&(r=ce.map(r,function(e){return null==e?"":e+""})),(n=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,r,"value")!==t||(this.value=r))});if(r)return(n=ce.valHooks[r.type]||ce.valHooks[r.nodeName.toLowerCase()])&&"get"in n&&(i=n.get(r,"value"))!==t?i:(i=r.value,"string"==typeof i?i.replace(Ne,""):null==i?"":i)}}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,r="select-one"===e.type||o<0,s=r?null:[],a=r?o+1:n.length,l=o<0?a:r?o:0;l<a;l++)if(i=n[l],(i.selected||l===o)&&(ce.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ce.nodeName(i.parentNode,"optgroup"))){if(t=ce(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=ce.makeArray(t),s=o.length;s--;)n=o[s],(n.selected=ce.inArray(ce(n).val(),r)>=0)&&(i=!0);return i||(e.selectedIndex=-1),r}}},attr:function(e,i,n){var o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===W?ce.prop(e,i,n):(1===s&&ce.isXMLDoc(e)||(i=i.toLowerCase(),o=ce.attrHooks[i]||(ce.expr.match.bool.test(i)?Re:Te)),n===t?o&&"get"in o&&null!==(r=o.get(e,i))?r:(r=ce.find.attr(e,i),null==r?t:r):null!==n?o&&"set"in o&&(r=o.set(e,n,i))!==t?r:(e.setAttribute(i,n+""),n):void ce.removeAttr(e,i))},removeAttr:function(e,t){var i,n,o=0,r=t&&t.match(ue);if(r&&1===e.nodeType)for(;i=r[o++];)n=ce.propFix[i]||i,ce.expr.match.bool.test(i)?Me&&Fe||!Ue.test(i)?e[n]=!1:e[ce.camelCase("default-"+i)]=e[n]=!1:ce.attr(e,i,""),e.removeAttribute(Fe?i:n)},attrHooks:{type:{set:function(e,t){if(!ce.support.radioValue&&"radio"===t&&ce.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,i,n){var o,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!ce.isXMLDoc(e),s&&(i=ce.propFix[i]||i,r=ce.propHooks[i]),n!==t?r&&"set"in r&&(o=r.set(e,n,i))!==t?o:e[i]=n:r&&"get"in r&&null!==(o=r.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):Le.test(e.nodeName)||Ie.test(e.nodeName)&&e.href?0:-1}}}}),Re={set:function(e,t,i){return!1===t?ce.removeAttr(e,i):Me&&Fe||!Ue.test(i)?e.setAttribute(!Fe&&ce.propFix[i]||i,i):e[ce.camelCase("default-"+i)]=e[i]=!0,i}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,i){var n=ce.expr.attrHandle[i]||ce.find.attr;ce.expr.attrHandle[i]=Me&&Fe||!Ue.test(i)?function(e,i,o){var r=ce.expr.attrHandle[i],s=o?t:(ce.expr.attrHandle[i]=t)!=n(e,i,o)?i.toLowerCase():null;return ce.expr.attrHandle[i]=r,s}:function(e,i,n){return n?t:e[ce.camelCase("default-"+i)]?i.toLowerCase():null}}),Me&&Fe||(ce.attrHooks.value={set:function(e,t,i){if(!ce.nodeName(e,"input"))return Te&&Te.set(e,t,i);e.defaultValue=t}}),Fe||(Te={set:function(e,i,n){var o=e.getAttributeNode(n);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(n)),o.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},ce.expr.attrHandle.id=ce.expr.attrHandle.name=ce.expr.attrHandle.coords=function(e,i,n){var o;return n?t:(o=e.getAttributeNode(i))&&""!==o.value?o.value:null},ce.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:Te.set},ce.attrHooks.contenteditable={set:function(e,t,i){Te.set(e,""!==t&&t,i)}},ce.each(["width","height"],function(e,t){ce.attrHooks[t]={set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}}})),ce.support.hrefNormalized||ce.each(["href","src"],function(e,t){ce.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ce.support.style||(ce.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ce.support.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.support.enctype||(ce.propFix.enctype="encoding"),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(ce.isArray(t))return e.checked=ce.inArray(ce(e).val(),t)>=0}},ce.support.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Be=/^(?:input|select|textarea)$/i,Pe=/^key/,Oe=/^(?:mouse|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Ke=/^([^.]*)(?:\.(.+)|)$/;ce.event={global:{},add:function(e,i,n,o,r){var s,a,l,c,h,u,d,g,f,p,m,A=ce._data(e);if(A){for(n.handler&&(c=n,n=c.handler,r=c.selector),n.guid||(n.guid=ce.guid++),(a=A.events)||(a=A.events={}),(u=A.handle)||(u=A.handle=function(e){return typeof ce===W||e&&ce.event.triggered===e.type?t:ce.event.dispatch.apply(u.elem,arguments)},u.elem=e),i=(i||"").match(ue)||[""],l=i.length;l--;)s=Ke.exec(i[l])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f&&(h=ce.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=ce.event.special[f]||{},d=ce.extend({type:f,origType:m,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&ce.expr.match.needsContext.test(r),namespace:p.join(".")},c),(g=a[f])||(g=a[f]=[],g.delegateCount=0,h.setup&&!1!==h.setup.call(e,o,p,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?g.splice(g.delegateCount++,0,d):g.push(d),ce.event.global[f]=!0);e=null}},remove:function(e,t,i,n,o){var r,s,a,l,c,h,u,d,g,f,p,m=ce.hasData(e)&&ce._data(e);if(m&&(h=m.events)){for(t=(t||"").match(ue)||[""],c=t.length;c--;)if(a=Ke.exec(t[c])||[],g=p=a[1],f=(a[2]||"").split(".").sort(),g){for(u=ce.event.special[g]||{},g=(n?u.delegateType:u.bindType)||g,d=h[g]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&p!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,u.remove&&u.remove.call(e,s));l&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,f,m.handle)||ce.removeEvent(e,g,m.handle),delete h[g])}else for(g in h)ce.event.remove(e,g+t[c],i,n,!0);ce.isEmptyObject(h)&&(delete m.handle,ce._removeData(e,"events"))}},trigger:function(i,n,o,r){var s,a,l,c,h,u,d,g=[o||$],f=ae.call(i,"type")?i.type:i,p=ae.call(i,"namespace")?i.namespace.split("."):[];if(l=u=o=o||$,3!==o.nodeType&&8!==o.nodeType&&!De.test(f+ce.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),a=f.indexOf(":")<0&&"on"+f,i=i[ce.expando]?i:new ce.Event(f,"object"==typeof i&&i),i.isTrigger=r?2:3,i.namespace=p.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=o),n=null==n?[i]:ce.makeArray(n,[i]),h=ce.event.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(o,n))){if(!r&&!h.noBubble&&!ce.isWindow(o)){for(c=h.delegateType||f,De.test(c+f)||(l=l.parentNode);l;l=l.parentNode)g.push(l),u=l;u===(o.ownerDocument||$)&&g.push(u.defaultView||u.parentWindow||e)}for(d=0;(l=g[d++])&&!i.isPropagationStopped();)i.type=d>1?c:h.bindType||f,s=(ce._data(l,"events")||{})[i.type]&&ce._data(l,"handle"),s&&s.apply(l,n),(s=a&&l[a])&&ce.acceptData(l)&&s.apply&&!1===s.apply(l,n)&&i.preventDefault();if(i.type=f,!r&&!i.isDefaultPrevented()&&(!h._default||!1===h._default.apply(g.pop(),n))&&ce.acceptData(o)&&a&&o[f]&&!ce.isWindow(o)){u=o[a],u&&(o[a]=null),ce.event.triggered=f;try{o[f]()}catch(e){}ce.event.triggered=t,u&&(o[a]=u)}return i.result}},dispatch:function(e){e=ce.event.fix(e);var i,n,o,r,s,a=[],l=oe.call(arguments),c=(ce._data(this,"events")||{})[e.type]||[],h=ce.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,e)){for(a=ce.event.handlers.call(this,e,c),i=0;(r=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,(n=((ce.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))!==t&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,o,r,s,a=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(r=[],s=0;s<l;s++)o=i[s],n=o.selector+" ",r[n]===t&&(r[n]=o.needsContext?ce(n,this).index(c)>=0:ce.find(n,this,null,[c]).length),r[n]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(e){if(e[ce.expando])return e;var t,i,n,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Oe.test(o)?this.mouseHooks:Pe.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new ce.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=r.srcElement||$),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,r,s=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(o=e.target.ownerDocument||$,r=o.documentElement,n=o.body,e.pageX=i.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ce.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ce.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=ce.extend(new ce.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ce.event.trigger(o,null,t):ce.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},ce.removeEvent=$.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===W&&(e[n]=null),e.detachEvent(n,i))},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||ce.now(),this[ce.expando]=!0},ce.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ce.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ce.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===n||ce.contains(n,o))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ce.support.submitBubbles||(ce.event.special.submit={setup:function(){if(ce.nodeName(this,"form"))return!1;ce.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=ce.nodeName(i,"input")||ce.nodeName(i,"button")?i.form:t;n&&!ce._data(n,"submitBubbles")&&(ce.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ce._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ce.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ce.nodeName(this,"form"))return!1;ce.event.remove(this,"._submit")}}),ce.support.changeBubbles||(ce.event.special.change={setup:function(){if(Be.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ce.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ce.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ce.event.simulate("change",this,e,!0)})),!1;ce.event.add(this,"beforeactivate._change",function(e){var t=e.target;Be.test(t.nodeName)&&!ce._data(t,"changeBubbles")&&(ce.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ce.event.simulate("change",this.parentNode,e,!0)}),ce._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ce.event.remove(this,"._change"),!Be.test(this.nodeName)}}),ce.support.focusinBubbles||ce.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ce.event.simulate(t,e.target,ce.event.fix(e),!0)};ce.event.special[t]={setup:function(){0==i++&&$.addEventListener(e,n,!0)},teardown:function(){0==--i&&$.removeEventListener(e,n,!0)}}}),ce.fn.extend({on:function(e,i,n,o,r){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(s in e)this.on(s,i,n,e[s],r);return this}if(null==n&&null==o?(o=i,n=i=t):null==o&&("string"==typeof i?(o=n,n=t):(o=n,n=i,i=t)),!1===o)o=c;else if(!o)return this;return 1===r&&(a=o,o=function(e){return ce().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ce.guid++)),this.each(function(){ce.event.add(this,e,o,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,ce(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,i,e[r]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=t),!1===n&&(n=c),this.each(function(){ce.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ce.event.trigger(e,t,i,!0)}});var je=/^.[^:#\[\.,]*$/,ze=/^(?:parents|prev(?:Until|All))/,He=ce.expr.match.needsContext,qe={children:!0,contents:!0,next:!0,prev:!0};ce.fn.extend({find:function(e){var t,i=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<o;t++)if(ce.contains(n[t],this))return!0}));for(t=0;t<o;t++)ce.find(e,n[t],i);return i=this.pushStack(o>1?ce.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=ce(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(ce.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(d(this,e||[],!0))},filter:function(e){return this.pushStack(d(this,e||[],!1))},is:function(e){return!!d(this,"string"==typeof e&&He.test(e)?ce(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,o=this.length,r=[],s=He.test(e)||"string"!=typeof e?ce(e,t||this.context):0;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&ce.find.matchesSelector(i,e))){i=r.push(i);break}return this.pushStack(r.length>1?ce.unique(r):r)},index:function(e){return e?"string"==typeof e?ce.inArray(this[0],ce(e)):ce.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ce(e,t):ce.makeArray(e&&e.nodeType?[e]:e),n=ce.merge(this.get(),i);return this.pushStack(ce.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ce.dir(e,"parentNode")},
parentsUntil:function(e,t,i){return ce.dir(e,"parentNode",i)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return ce.dir(e,"nextSibling")},prevAll:function(e){return ce.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ce.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ce.dir(e,"previousSibling",i)},siblings:function(e){return ce.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ce.sibling(e.firstChild)},contents:function(e){return ce.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ce.merge([],e.childNodes)}},function(e,t){ce.fn[e]=function(i,n){var o=ce.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ce.filter(n,o)),this.length>1&&(qe[e]||(o=ce.unique(o)),ze.test(e)&&(o=o.reverse())),this.pushStack(o)}}),ce.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ce.find.matchesSelector(n,e)?[n]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var o=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!ce(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ge=/ jQuery\d+="(?:null|\d+)"/g,Ve=new RegExp("<(?:"+Qe+")[\\s/>]","i"),We=/^\s+/,Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$e=/<([\w:]+)/,Ye=/<tbody/i,Je=/<|&#?\w+;/,Ze=/<(?:script|style|link)/i,et=/^(?:checkbox|radio)$/i,tt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/^$|\/(?:java|ecma)script/i,nt=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ce.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},st=g($),at=st.appendChild($.createElement("div"));rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,ce.fn.extend({text:function(e){return ce.access(this,function(e){return e===t?ce.text(this):this.empty().append((this[0]&&this[0].ownerDocument||$).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){f(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ce.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||ce.cleanData(y(i)),i.parentNode&&(t&&ce.contains(i.ownerDocument,i)&&A(y(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ce.cleanData(y(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ce.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return ce.access(this,function(e){var i=this[0]||{},n=0,o=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Ge,""):t;if("string"==typeof e&&!Ze.test(e)&&(ce.support.htmlSerialize||!Ve.test(e))&&(ce.support.leadingWhitespace||!We.test(e))&&!rt[($e.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Xe,"<$1></$2>");try{for(;n<o;n++)i=this[n]||{},1===i.nodeType&&(ce.cleanData(y(i,!1)),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ce.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],o=e[t++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),ce(this).remove(),o.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=ie.apply([],e);var n,o,r,s,a,l,c=0,h=this.length,u=this,d=h-1,g=e[0],f=ce.isFunction(g);if(f||!(h<=1||"string"!=typeof g||ce.support.checkClone)&&tt.test(g))return this.each(function(n){var o=u.eq(n);f&&(e[0]=g.call(this,n,o.html())),o.domManip(e,t,i)});if(h&&(l=ce.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(s=ce.map(y(l,"script"),p),r=s.length;c<h;c++)o=l,c!==d&&(o=ce.clone(o,!0,!0),r&&ce.merge(s,y(o,"script"))),t.call(this[c],o,c);if(r)for(a=s[s.length-1].ownerDocument,ce.map(s,m),c=0;c<r;c++)o=s[c],it.test(o.type||"")&&!ce._data(o,"globalEval")&&ce.contains(a,o)&&(o.src?ce._evalUrl(o.src):ce.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ot,"")));l=n=null}return this}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ce.fn[e]=function(e){for(var i,n=0,o=[],r=ce(e),s=r.length-1;n<=s;n++)i=n===s?this:this.clone(!0),ce(r[n])[t](i),ne.apply(o,i.get());return this.pushStack(o)}}),ce.extend({clone:function(e,t,i){var n,o,r,s,a,l=ce.contains(e.ownerDocument,e);if(ce.support.html5Clone||ce.isXMLDoc(e)||!Ve.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(at.innerHTML=e.outerHTML,at.removeChild(r=at.firstChild)),!(ce.support.noCloneEvent&&ce.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(n=y(r),a=y(e),s=0;null!=(o=a[s]);++s)n[s]&&b(o,n[s]);if(t)if(i)for(a=a||y(e),n=n||y(r),s=0;null!=(o=a[s]);s++)v(o,n[s]);else v(e,r);return n=y(r,"script"),n.length>0&&A(n,!l&&y(e,"script")),n=a=o=null,r},buildFragment:function(e,t,i,n){for(var o,r,s,a,l,c,h,u=e.length,d=g(t),f=[],p=0;p<u;p++)if((r=e[p])||0===r)if("object"===ce.type(r))ce.merge(f,r.nodeType?[r]:r);else if(Je.test(r)){for(a=a||d.appendChild(t.createElement("div")),l=($e.exec(r)||["",""])[1].toLowerCase(),h=rt[l]||rt._default,a.innerHTML=h[1]+r.replace(Xe,"<$1></$2>")+h[2],o=h[0];o--;)a=a.lastChild;if(!ce.support.leadingWhitespace&&We.test(r)&&f.push(t.createTextNode(We.exec(r)[0])),!ce.support.tbody)for(r="table"!==l||Ye.test(r)?"<table>"!==h[1]||Ye.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)ce.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ce.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else f.push(t.createTextNode(r));for(a&&d.removeChild(a),ce.support.appendChecked||ce.grep(y(f,"input"),S),p=0;r=f[p++];)if((!n||-1===ce.inArray(r,n))&&(s=ce.contains(r.ownerDocument,r),a=y(d.appendChild(r),"script"),s&&A(a),i))for(o=0;r=a[o++];)it.test(r.type||"")&&i.push(r);return a=null,d},cleanData:function(e,t){for(var i,n,o,r,s=0,a=ce.expando,l=ce.cache,c=ce.support.deleteExpando,h=ce.event.special;null!=(i=e[s]);s++)if((t||ce.acceptData(i))&&(o=i[a],r=o&&l[o])){if(r.events)for(n in r.events)h[n]?ce.event.remove(i,n):ce.removeEvent(i,n,r.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==W?i.removeAttribute(a):i[a]=null,te.push(o))}},_evalUrl:function(e){return ce.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),ce.fn.extend({wrapAll:function(e){if(ce.isFunction(e))return this.each(function(t){ce(this).wrapAll(e.call(this,t))});if(this[0]){var t=ce(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ce.isFunction(e)?this.each(function(t){ce(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ce(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ce.isFunction(e);return this.each(function(i){ce(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ce.nodeName(this,"body")||ce(this).replaceWith(this.childNodes)}).end()}});var lt,ct,ht,ut=/alpha\([^)]*\)/i,dt=/opacity\s*=\s*([^)]*)/,gt=/^(top|right|bottom|left)$/,ft=/^(none|table(?!-c[ea]).+)/,pt=/^margin/,mt=new RegExp("^("+he+")(.*)$","i"),At=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),vt=new RegExp("^([+-])=("+he+")","i"),bt={BODY:"block"},yt={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing:0,fontWeight:400},wt=["Top","Right","Bottom","Left"],xt=["Webkit","O","Moz","ms"];ce.fn.extend({css:function(e,i){return ce.access(this,function(e,i,n){var o,r,s={},a=0;if(ce.isArray(i)){for(r=ct(e),o=i.length;a<o;a++)s[i[a]]=ce.css(e,i[a],!1,r);return s}return n!==t?ce.style(e,i,n):ce.css(e,i)},e,i,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){x(this)?ce(this).show():ce(this).hide()})}}),ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ht(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ce.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,l=ce.camelCase(i),c=e.style;if(i=ce.cssProps[l]||(ce.cssProps[l]=w(c,l)),a=ce.cssHooks[i]||ce.cssHooks[l],n===t)return a&&"get"in a&&(r=a.get(e,!1,o))!==t?r:c[i];if(!(s=typeof n,"string"===s&&(r=vt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(ce.css(e,i)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||ce.cssNumber[l]||(n+="px"),ce.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,o))===t)))try{c[i]=n}catch(e){}}},css:function(e,i,n,o){var r,s,a,l=ce.camelCase(i);return i=ce.cssProps[l]||(ce.cssProps[l]=w(e.style,l)),a=ce.cssHooks[i]||ce.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,n)),s===t&&(s=ht(e,i,o)),"normal"===s&&i in St&&(s=St[i]),""===n||n?(r=parseFloat(s),!0===n||ce.isNumeric(r)?r||0:s):s}}),e.getComputedStyle?(ct=function(t){return e.getComputedStyle(t,null)},ht=function(e,i,n){var o,r,s,a=n||ct(e),l=a?a.getPropertyValue(i)||a[i]:t,c=e.style;return a&&(""!==l||ce.contains(e.ownerDocument,e)||(l=ce.style(e,i)),At.test(l)&&pt.test(i)&&(o=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=r,c.maxWidth=s)),l}):$.documentElement.currentStyle&&(ct=function(e){return e.currentStyle},ht=function(e,i,n){var o,r,s,a=n||ct(e),l=a?a[i]:t,c=e.style;return null==l&&c&&c[i]&&(l=c[i]),At.test(l)&&!gt.test(i)&&(o=c.left,r=e.runtimeStyle,s=r&&r.left,s&&(r.left=e.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=o,s&&(r.left=s)),""===l?"auto":l}),ce.each(["height","width"],function(e,t){ce.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&ft.test(ce.css(e,"display"))?ce.swap(e,yt,function(){return T(e,t,n)}):T(e,t,n)},set:function(e,i,n){var o=n&&ct(e);return k(e,i,n?_(e,t,n,ce.support.boxSizing&&"border-box"===ce.css(e,"boxSizing",!1,o),o):0)}}}),ce.support.opacity||(ce.cssHooks.opacity={get:function(e,t){return dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=ce.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ce.trim(r.replace(ut,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ut.test(r)?r.replace(ut,o):r+" "+o)}}),ce(function(){ce.support.reliableMarginRight||(ce.cssHooks.marginRight={get:function(e,t){if(t)return ce.swap(e,{display:"inline-block"},ht,[e,"marginRight"])}}),!ce.support.pixelPosition&&ce.fn.position&&ce.each(["top","left"],function(e,t){ce.cssHooks[t]={get:function(e,i){if(i)return i=ht(e,t),At.test(i)?ce(e).position()[t]+"px":i}}})}),ce.expr&&ce.expr.filters&&(ce.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ce.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ce.css(e,"display"))},ce.expr.filters.visible=function(e){return!ce.expr.filters.hidden(e)}),ce.each({margin:"",padding:"",border:"Width"},function(e,t){ce.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+wt[n]+t]=r[n]||r[n-2]||r[0];return o}},pt.test(e)||(ce.cssHooks[e+t].set=k)});var Ct=/%20/g,kt=/\[\]$/,_t=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Rt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!et.test(e))}).map(function(e,t){var i=ce(this).val();return null==i?null:ce.isArray(i)?ce.map(i,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:i.replace(_t,"\r\n")}}).get()}}),ce.param=function(e,i){var n,o=[],r=function(e,t){t=ce.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=ce.ajaxSettings&&ce.ajaxSettings.traditional),ce.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){r(this.name,this.value)});else for(n in e)N(n,e[n],i,r);return o.join("&").replace(Ct,"+")},ce.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ce.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ce.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Et,Nt,Lt=ce.now(),It=/\?/,Ut=/#.*$/,Ft=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Ot=/^\/\//,Dt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Kt=ce.fn.load,jt={},zt={},Ht="*/".concat("*");try{Nt=X.href}catch(e){Nt=$.createElement("a"),Nt.href="",Nt=Nt.href}Et=Dt.exec(Nt.toLowerCase())||[],ce.fn.load=function(e,i,n){if("string"!=typeof e&&Kt)return Kt.apply(this,arguments);var o,r,s,a=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),ce.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(s="POST"),a.length>0&&ce.ajax({url:e,type:s,dataType:"html",data:i}).done(function(e){r=arguments,a.html(o?ce("<div>").append(ce.parseHTML(e)).find(o):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt,type:"GET",isLocal:Bt.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ce.parseJSON,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?U(U(e,ce.ajaxSettings),t):U(ce.ajaxSettings,e)},ajaxPrefilter:L(jt),ajaxTransport:L(zt),ajax:function(e,i){function n(e,i,n,o){var r,u,v,b,S,x=i;2!==y&&(y=2,l&&clearTimeout(l),h=t,a=o||"",w.readyState=e>0?4:0,r=e>=200&&e<300||304===e,n&&(b=F(d,w,n)),b=M(d,b,w,r),r?(d.ifModified&&(S=w.getResponseHeader("Last-Modified"),S&&(ce.lastModified[s]=S),(S=w.getResponseHeader("etag"))&&(ce.etag[s]=S)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=b.state,u=b.data,v=b.error,r=!v)):(v=x,!e&&x||(x="error",e<0&&(e=0))),w.status=e,w.statusText=(i||x)+"",r?p.resolveWith(g,[u,x,w]):p.rejectWith(g,[w,x,v]),w.statusCode(A),A=t,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[w,d,r?u:v]),m.fireWith(g,[w,x]),c&&(f.trigger("ajaxComplete",[w,d]),--ce.active||ce.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var o,r,s,a,l,c,h,u,d=ce.ajaxSetup({},i),g=d.context||d,f=d.context&&(g.nodeType||g.jquery)?ce(g):ce.event,p=ce.Deferred(),m=ce.Callbacks("once memory"),A=d.statusCode||{},v={},b={},y=0,S="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=Mt.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)A[t]=[A[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||S;return h&&h.abort(t),n(0,t),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Nt)+"").replace(Ut,"").replace(Ot,Et[1]+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=ce.trim(d.dataType||"*").toLowerCase().match(ue)||[""],null==d.crossDomain&&(o=Dt.exec(d.url.toLowerCase()),d.crossDomain=!(!o||o[1]===Et[1]&&o[2]===Et[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Et[3]||("http:"===Et[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ce.param(d.data,d.traditional)),I(jt,d,i,w),2===y)return w;c=d.global,c&&0==ce.active++&&ce.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(It.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ft.test(s)?s.replace(Ft,"$1_="+Lt++):s+(It.test(s)?"&":"?")+"_="+Lt++)),d.ifModified&&(ce.lastModified[s]&&w.setRequestHeader("If-Modified-Since",ce.lastModified[s]),ce.etag[s]&&w.setRequestHeader("If-None-Match",ce.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||i.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ht+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(!1===d.beforeSend.call(g,w,d)||2===y))return w.abort();S="abort";for(r in{success:1,error:1,complete:1})w[r](d[r]);if(h=I(zt,d,i,w)){w.readyState=1,c&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,h.send(v,n)}catch(e){if(!(y<2))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,i){return ce.get(e,t,i,"json")},getScript:function(e,i){return ce.get(e,t,i,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,n,o,r){return ce.isFunction(n)&&(r=r||o,o=n,n=t),ce.ajax({url:e,type:i,dataType:r,data:n,success:o})}}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ce.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=$.head||ce("head")[0]||$.documentElement;return{send:function(t,o){i=$.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var qt=[],Qt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||ce.expando+"_"+Lt++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(i,n,o){var r,s,a,l=!1!==i.jsonp&&(Qt.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(i.data)&&"data");if(l||"jsonp"===i.dataTypes[0])return r=i.jsonpCallback=ce.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Qt,"$1"+r):!1!==i.jsonp&&(i.url+=(It.test(i.url)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return a||ce.error(r+" was not called"),a[0]},i.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},o.always(function(){e[r]=s,i[r]&&(i.jsonpCallback=n.jsonpCallback,qt.push(r)),a&&ce.isFunction(s)&&s(a[0]),a=s=t}),"script"});var Gt,Vt,Wt=0,Xt=e.ActiveXObject&&function(){var e;for(e in Gt)Gt[e](t,!0)};ce.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&B()||P()}:B,Vt=ce.ajaxSettings.xhr(),ce.support.cors=!!Vt&&"withCredentials"in Vt,(Vt=ce.support.ajax=!!Vt)&&ce.ajaxTransport(function(i){if(!i.crossDomain||ce.support.cors){var n;return{send:function(o,r){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(e){}l.send(i.hasContent&&i.data||null),n=function(e,o){var a,c,h,u;try{if(n&&(o||4===l.readyState))if(n=t,s&&(l.onreadystatechange=ce.noop,Xt&&delete Gt[s]),o)4!==l.readyState&&l.abort();else{u={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{h=l.statusText}catch(e){h=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(e){o||r(-1,e)}u&&r(a,h,u,c)},i.async?4===l.readyState?setTimeout(n):(s=++Wt,Xt&&(Gt||(Gt={},ce(e).unload(Xt)),Gt[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var $t,Yt,Jt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[z],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=Zt.exec(t),r=o&&o[3]||(ce.cssNumber[e]?"":"px"),s=(ce.cssNumber[e]||"px"!==r&&+n)&&Zt.exec(ce.css(i.elem,e)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+n||1;do{a=a||".5",s/=a,ce.style(i.elem,e,s+r)}while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};ce.Animation=ce.extend(K,{tweener:function(e,t){ce.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;n<o;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),ce.Tween=H,H.prototype={constructor:H,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ce.cssNumber[i]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,i=H.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ce.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ce.cssProps[e.prop]]||ce.cssHooks[e.prop])?ce.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.each(["toggle","show","hide"],function(e,t){var i=ce.fn[t];ce.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(q(t,!0),e,n,o)}}),ce.fn.extend({fadeTo:function(e,t,i,n){return this.filter(x).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=ce.isEmptyObject(e),r=ce.speed(t,i,n),s=function(){var t=K(this,ce.extend({},e),r);(o||ce._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,i,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=ce.timers,s=ce._data(this);if(i)s[i]&&s[i].stop&&o(s[i]);else for(i in s)s[i]&&s[i].stop&&ei.test(i)&&o(s[i]);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(r[i].anim.stop(n),t=!1,r.splice(i,1));!t&&n||ce.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=ce._data(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=ce.timers,s=n?n.length:0;for(i.finish=!0,ce.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ce.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ce.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ce.speed=function(e,t,i){var n=e&&"object"==typeof e?ce.extend({},e):{complete:i||!i&&t||ce.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ce.isFunction(t)&&t};return n.duration=ce.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ce.fx.speeds?ce.fx.speeds[n.duration]:ce.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ce.isFunction(n.old)&&n.old.call(this),n.queue&&ce.dequeue(this,n.queue)},n},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ce.timers=[],ce.fx=H.prototype.init,ce.fx.tick=function(){var e,i=ce.timers,n=0;for($t=ce.now();n<i.length;n++)(e=i[n])()||i[n]!==e||i.splice(n--,1);i.length||ce.fx.stop(),$t=t},ce.fx.timer=function(e){e()&&ce.timers.push(e)&&ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){Yt||(Yt=setInterval(ce.fx.tick,ce.fx.interval))},ce.fx.stop=function(){clearInterval(Yt),Yt=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fx.step={},ce.expr&&ce.expr.filters&&(ce.expr.filters.animated=function(e){return ce.grep(ce.timers,function(t){return e===t.elem}).length}),ce.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ce.offset.setOffset(this,e,t)});var i,n,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return i=s.documentElement,ce.contains(i,r)?(typeof r.getBoundingClientRect!==W&&(o=r.getBoundingClientRect()),n=Q(s),{top:o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):o},ce.offset={setOffset:function(e,t,i){var n=ce.css(e,"position");"static"===n&&(e.style.position="relative");var o,r,s=ce(e),a=s.offset(),l=ce.css(e,"top"),c=ce.css(e,"left"),h=("absolute"===n||"fixed"===n)&&ce.inArray("auto",[l,c])>-1,u={},d={};h?(d=s.position(),o=d.top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),ce.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+o),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):s.css(u)}},ce.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ce.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ce.nodeName(e[0],"html")||(i=e.offset()),i.top+=ce.css(e[0],"borderTopWidth",!0),i.left+=ce.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ce.css(n,"marginTop",!0),left:t.left-i.left-ce.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Y;e&&!ce.nodeName(e,"html")&&"static"===ce.css(e,"position");)e=e.offsetParent;return e||Y})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);ce.fn[e]=function(o){return ce.access(this,function(e,o,r){var s=Q(e);if(r===t)return s?i in s?s[i]:s.document.documentElement[o]:e[o];s?s.scrollTo(n?ce(s).scrollLeft():r,n?r:ce(s).scrollTop()):e[o]=r},e,o,arguments.length,null)}}),ce.each({Height:"height",Width:"width"},function(e,i){ce.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,o){ce.fn[o]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return ce.access(this,function(i,n,o){var r;return ce.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):o===t?ce.css(i,n,a):ce.style(i,n,o,a)},i,s?o:t,s,null)}})}),ce.fn.size=function(){return this.length},ce.fn.andSelf=ce.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ce:(e.jQuery=e.$=ce,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce}))}(window),require.config({baseUrl:"../_shared",paths:{jquery:"lib/jquery",jqueryui:"lib/jquery.ui.effect"}}),require(["jquery"],function(e){var t=e("body").data("type")||"ekhil";e(document).ready(function(){require([t])})}),define("grekhil",function(){}),define("lib/Class",[],function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return this.Class=function(){},Class.extend=function(i,n){function o(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;n||(n=i,i=void 0),e=!0;var s=new this;e=!1;for(var a in n)s[a]="function"==typeof n[a]&&"function"==typeof r[a]&&t.test(n[a])?function(e,t){return function(){var i=this._super;this._super=r[e];var n=t.apply(this,arguments);return this._super=i,n}}(a,n[a]):n[a];for(var l in i)o[l]="function"==typeof i[l]&&"function"==typeof r[l]&&t.test(i[l])?function(e,t){return function(){var i=this._super;this._super=r[e];var n=t.apply(this,arguments);return this._super=i,n}}(l,i[l]):i[l];return o.prototype=s,o.prototype.constructor=o,o.extend=arguments.callee,o},this.Class}),define("ekhil/EkhilPlayer",["lib/Class"],function(e){var t,i=e.extend({langFile:null,documentFolder:null,courseFile:null,sharedFolder:null,lookFile:null,bIsELW:!1,scaleMode:"LOOK",exportType:"html5",_models:null,container:null,init:function(){this._models=[],this.container=null},getModel:function(e){return this._models[e]},addModel:function(e,t){this._models[t]=e},runCommand:function(e){if(void 0!==e){var t=Array.prototype.slice.call(arguments,1);require(["ekhil/controller/command/"+e+"Command"],function(e,t){var i=new t(this);i.execute.apply(i,e)}.bind(this,t))}else console.error("You shall pass a command name")},getMediaPath:function(e){var t="";try{""!=e&&void 0!=e&&"undefined"!=e&&(t=e.indexOf("@/")>-1?this.courseFolder+e.substring(e.indexOf("@/")+2):this.lookFolder+e)}catch(e){console.info(e)}return t},setCourseFolder:function(e){this.courseFolder=e},setLookFolder:function(e){this.lookFolder=e},setEnvironment:function(e,t,i,n,o,r,s,a){this.langFile=e,this.documentFolder=t,this.courseFile=i,this.sharedFolder=n,this.lookFile=o,this.bIsELW=r,this.scaleMode=s,this.exportType=a}});return i.getInstance=function(){return void 0===t&&(t=new i),t},i}),define("lib/Utils",["lib/Class"],function(e){var t=e.extend({})
;return t.nonSupportedVideoFormats=["flv"],t.IE="MSCSSProperties"in window,t.Edge=function(){return!!navigator.userAgent.match(/Edge/)}(),t.Firefox=function(){return!!navigator.userAgent.match(/Firefox/)}(),t.isEmpty=function(e){return void 0===e||null===e},t.isNotEmpty=function(e){return!this.isEmpty(e)},t.isEmptyMaxTime=function(e){return this.isEmpty(e)||"00:00:00"===e||""===e.trim()},t.getParentNodeIndex=function(e){var t="";return e="number"==typeof e?e.toString():e,e?t=e.toString().split(".").slice(0,-1).join("."):console.warn("nodeIndex: "+e+" undefined setting an empty string"),t},t.isPromiseSupported=function(){return"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")},t.IOS=function(){return!!navigator.userAgent.match(/iPad|iPhone/)}(),t.clone=function(e){if("object"!=typeof e||null==e)return e;var t=e.constructor();for(var i in e)t[i]=this.clone(e[i]);return t},t.relegate=function(e,t){var i=Array.prototype.slice.call(arguments,2),n=function(){var n=Array.prototype.slice.call(arguments,0);return t.apply(e,Array.prototype.concat.call(i,n))};return n.a=arguments,n},t.getType=function(e){if(null===e)return"null";if(e&&(1===e.nodeType||9===e.nodeType))return"element";var t,i=Object.prototype.toString.call(e);if(i.match(/\[object (.*?)\]/)&&(t=i.match(/\[object (.*?)\]/)[1].toLowerCase()),"number"===t){if(isNaN(e))return"nan";if(!isFinite(e))return"infinity"}return t},t.ucfirst=function(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)},t.getINIGroup=function(e,t){var i=String.fromCharCode(13),n=String.fromCharCode(10),o="";if(void 0!=t&&null!=t||""!=t){var r=t.indexOf(e);if(-1!=r){var s=r+e.length+1,a=t.indexOf(i,s);-1==a&&(a=t.indexOf(n,s)),o=t.slice(s,a),o=this.trimString(o)}}return o},t.getINIParam=function(e,t){var i="";if(void 0!=t&&null!=t||""!=t){e+="=";var n=t.indexOf(e);if(-1!=n){var o=t.indexOf(String.fromCharCode(13),n+e.length);-1==o&&(o=t.indexOf(String.fromCharCode(10),n+e.length));var r="";r=-1==o?t.slice(n):t.slice(n,o);var s=r.split("=");i=this.trimString(s[1])}}return i},t.trimString=function(e){return e.replace(/^\s+|\s+$/gm,"")},t.isCrossOriginFrame=function(){try{return!window.top.location.hostname}catch(e){return!0}},t.getParentWindow=function(){return t.isCrossOriginFrame()?$(parent):$(top)},t.rotate=function(e,t,i,n){var o=["-moz","-webkit","-o"],r={},s=["transform"];for(var a in o)s.push(o[a]+"-transform");for(var a in s)if("key"!=a){var l=$(e).css(s[a])||"none",c=["rotate("+t+"deg)"];"none"==l&&(l=""),""!=l&&c.push(l),r[s[a]]=c.join(" ")}if(void 0!=n)for(var a in s)if("key"!=a){var l=r[s[a]]||"none",c=[n];"none"==l&&(l=""),""!=l&&c.push(l),r[s[a]]=c.join(" ")}s=["transform-origin"];for(var a in o)s.push(o[a]+"-transform-origin");for(var a in s)"key"!=a&&(c=[i],r[s[a]]=c.join(" "));$(e).css(r)},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},t.getNodeText=function(e,t){for(var i={bold:function(e){return{fontWeight:+e?"bold":"normal"}},underline:function(e){return{textDecoration:+e?"underline":"none"}},align:function(e){return{textAlign:e}},italic:function(e){return{fontStyle:+e?"italic":"normal"}},font:function(e){return{fontFamily:e}},fontsize:function(e){return{fontSize:e+"px"}},fontcolor:function(e){return{color:e}}},n={},o=t.attributes.length,r=0;r<o;r++){var s=t.attributes[r];void 0!==i[s.name]&&"function"==typeof i[s.name]&&(n=$.extend(i[s.name].call(null,s.value),n))}var a=$("<div />").html(e);return a.css(n),a},t.object_shuffle=function(e){for(var t=[],i=this.clone(e);i.length>0;){var n=Math.floor(Math.random()*i.length),o=i.splice(n,1);t[t.length]=o[0]}return t},t.object2array=function(e){var t=[];for(var i in e)t.push(e[i]);return t},t.getSortObject=function(){return{keys:new Array,hash:new Object,set:function(e,t){void 0===this.hash[e]&&this.keys.push(e),this.hash[e]=t},getKey:function(e){return this.keys[e]},getSortedKeys:function(){return this.keys.sort(),this.keys},importObject:function(e){for(var t in e)this.set(t,e)}}},t.array_search=function(e,t){for(var i in t)if(t.hasOwnProperty(i)&&t[i]==e)return i;return!1},t.convertFlashToRegexPattern=function(e){e=t.escapeSpecialRegexCharaExceptJoker(e);for(var i=e.length,n="",o=i;o>=0;o--){switch(e[o]){case"?":"\\"!==e[o-1]&&(n=".{1}");break;case"*":n=".*";break;default:n=null}null!==n&&(e=this.setCharAt(e,n,o))}return"^"+e+"$"},t.escapeSpecialRegexCharaExceptJoker=function(e){return e.replace(/[-[\]{}()+.,\\^$|#\s]/g,"\\$&")},t.setCharAt=function(e,t,i){return e.substring(0,i)+t+e.substring(i+1)},t.setXmlAttributes=function(e,t){if(null!=e)for(var i,n=e.attributes.length,o=0;o<n;o++)i=e.attributes[o].value,t[e.attributes[o].name]=isNaN(Number(i))?i:Number(i)},t.Stack=function(){this.stackLoad=!1,this.stack_count=0,this.stackLoad_count=0,this.callback=null,this.stackLoading=function(e){1==arguments.length&&(this.callback=e),this.stackLoad=!0,this._isLoading()},this._isLoading=function(){this.stackLoad&&this.stack_count==this.stackLoad_count&&(this.onComplete(),$(this).trigger("complete"),null!=this.callback&&this.callback())},this.add=function(){this.stack_count++},this.load=function(){this.stackLoad_count++,this._isLoading()},this.onComplete=function(){}},t.parseXMLAttributes=function(e){var i={},n=e.attributes;if(void 0!==n&&null!==n)for(var o=n.length,r=0;r<o;r++)n[r].name.indexOf("color")>-1?i[n[r].name]=t.formatColor(n[r].value):i[n[r].name]=n[r].value;return i},t.convertNodeHtml=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.getAttribute=function(e,t,i){return e.hasAttribute(t)?e.getAttribute(t):i},t.isMobile=function(){return/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)},t.queryString=function(e){e||(e=window);for(var t={},i=e.location.search.substring(1),n=i.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[1]=decodeURI(r[1]),void 0===t[r[0]])t[r[0]]=r[1];else if("string"==typeof t[r[0]]){var s=[t[r[0]],r[1]];t[r[0]]=s}else t[r[0]].push(r[1])}return t},t.seconds2HMSArray=function(e){var t=Math.floor(e/3600);e-=3600*t;var i=Math.floor(e/60);return e-=60*i,[t,i,e]},t.seconds2HMSString=function(e){var t=this.seconds2HMSArray(e),i="";if(t[0]>9999)i+="9999:59:59";else{i+=this.pad(t[0],2)+":",i+=this.pad(t[1],2)+":";var n=Math.round(100*t[2])/100,o=n.toString();n<10&&(o="0"+o),i+=o}return i},t.parseStringToSeconds=function(e){var t=0;if(""!==e){if(!e.match(/^\d{2,4}:\d{2}:\d{2}$/gi))throw e+"time should be hhhh:mm:ss formated";var i=e.split(":");t+=3600*parseInt(i[0])+60*parseInt(i[1])+parseInt(i[2])}return t},t.getDecodedString=function(e){var t;try{t=decodeURIComponent(e)}catch(i){t=decodeURIComponent(encodeURIComponent(e))}return t},t.pad=function(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i},t.removeCSSUnit=function(e){if(void 0!=e)return+e.replace(/[^-\d\.]/g,"")},t.removeUserSelect=function(e){$(e).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:"default"})},t.EnableUserSelectText=function(e){$(e).css({"-webkit-touch-callout":"text","-webkit-user-select":"text","-khtml-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text",cursor:"text"})},t.customCursor=function(e,t){$(e).css({cursor:"url("+t+"), default !important"})},t.hex2RGBA=function(e,t){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(i,function(e,t,i,n){return t+t+i+i+n+n}),void 0===t&&(t=1);var n=[].concat(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e)).map(function(e){return parseInt(e,16)});return n.shift(),n.push(t),"rgba("+n.join(",")+")"},t.count=function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t},t.hasTouchEvent=function(){return"ontouchstart"in window},t.getTransformOrigin=function(e){var t,i=["t","MozT","WebkitT","OT"];for(var n in i)void 0===t&&(t=e.style[i[n]+"ransformOrigin"]);return void 0!==t&&""!=t||(t="0% 0% 0px"),t},t.getStyleOfBgPositionValue=function(e){return e&&"POSITION_"==e.substring(0,9)?e.replace("POSITION_","").replace("_"," ").toLowerCase():"top left"},t.getStyleOfBgRepeatValue=function(e){switch(e){case"REPEAT_X":case"REPEAT_Y":return e.replace("_","-").toLowerCase();case"REPEAT_BOTH":return"repeat";default:return"no-repeat"}},t.getTransform=function(e){var t,i=["t","MozT","WebkitT","OT"];for(var n in i)void 0===t&&(t=e.style[i[n]+"ransform"]);return t},t.parseJson=function(e){var t=null;try{e&&(t=JSON.parse(e))}catch(e){console.warn("Utils.parseJson - error : ",e)}return t},t.setScale=function(e){var t=["-webkit-t","-moz-t","-o-t","-ms-t","t"];for(var i in t)$("body").css(t[i]+"ransform","scale("+e+")")},t.getScale=function(){var e,t=1,i=["-webkit-t","-moz-t","-o-t","-ms-t","t"];for(var n in i)if(null==e){var o=$("body").css(i[n]+"ransform");void 0!=o&&(e=o)}if(null!=e){var r=e.split("(")[1];if(void 0!=r&&null!=r&&(r=r.split(")")[0],r=r.split(","),r.length>=2)){var s=r[0],a=r[1];t=Math.sqrt(s*s+a*a)}}return t},t.getBoundariesImage=function(e){var t={maxHeight:0,maxWidth:0,minHeight:0,minWidth:0};if(e)for(var i=0;i<=e.length;i++){var n=$(e[i]);0===i?(t.minWidth=n.width(),t.minHeight=n.height(),t.maxWidth=n.width(),t.maxHeight=n.height()):(t.maxWidth=n.width()>=t.maxWidth&&null!=n.width()?n.width():t.maxWidth,t.maxHeight=n.height()>=t.maxHeight&&null!=n.height()?n.height():t.maxHeight,t.minWidth=n.width()<=t.minWidth&&null!=n.width()?n.width():t.minWidth,t.minHeight=n.height()<=t.minHeight&&null!=n.height()?n.height():t.minHeight)}return t},t.removeNode=function(e){e.parentNode.removeChild(e)},t.decreaseTextSize=function(e){try{var t,i=/font-size:([0-9\.]+)px/,n=e.html(),o=i.exec(n),r=!1;if(o?(r=!0,t=+o[1]):(o=/([0-9\.]+)px/.exec(e.css("fontSize")))&&(t=+o[1]),t){var s=Math.max(1,t-1);r?(n=n.replace(i,"font-size: "+s+"px"),e.html(n)):e.css("fontSize",s+"px")}}catch(e){console.error(e)}},t.loadXMLFile=function(e,t,i){$.ajax({type:"GET",url:e,dataType:"xml",success:t,error:i||t})},t.checkSupportExtensionMedia=function(e,t,i){var n=!0;if(e){var o=e.substr(e.lastIndexOf(".")+1).toLowerCase();t.indexOf(o)>=0&&(i&&console.warn("The media isn't supported in HTML5, Path = "+e),n=!1)}else i&&console.warn("The fileName of media isn't defined "),n=!1;return n},t.formatColor=function(e){var t=e,i=t.match(/^#/i);return t.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/i)&&!i&&(console.warn("The past color format is incorrect ("+e+")"),t="#"+e),t},t.str_pad=function(e,t,i,n){var o,r="",s=function(e,t){for(var i="";i.length<t;)i+=e;return i=i.substr(0,t)};return e+="",i=void 0!==i?i:" ","STR_PAD_LEFT"!==n&&"STR_PAD_RIGHT"!==n&&"STR_PAD_BOTH"!==n&&(n="STR_PAD_RIGHT"),(o=t-e.length)>0&&("STR_PAD_LEFT"===n?e=s(i,o)+e:"STR_PAD_RIGHT"===n?e+=s(i,o):"STR_PAD_BOTH"===n&&(r=s(i,Math.ceil(o/2)),e=r+e+r,e=e.substr(0,t))),e},t.getCachedQuerySelector=function(e,i,n,o){var r;this.cachedQuerySelector||(this.cachedQuerySelector=[]),this.cachedQuerySelector[n]||(this.cachedQuerySelector[n]=[]);try{return i&&(e?t.isEmpty(this.cachedQuerySelector[n][e])?(this.cachedQuerySelector[n][e]=!0===o?i.querySelectorAll(n):i.querySelector(n),r=this.cachedQuerySelector[n][e]):r=!0===o?i.querySelectorAll(n):i.querySelector(n):t.isEmpty(this.cachedQuerySelector[n])?(this.cachedQuerySelector[n]=!0===o?i.querySelectorAll(n):i.querySelector(n),r=this.cachedQuerySelector[n]):r=!0===o?i.querySelectorAll(n):i.querySelector(n)),r}catch(e){console.info(e)}},t.isLCMSProdTestMode=function(){var e=!1,i=t.getParentWindow();if(t.isNotEmpty(i)){var n=i.find('frame[name="test"]');e=t.isNotEmpty(n)}return e},t}),define("lib/Config",["module"],function(e){return{scaleMode:void 0!=e.config().scaleMode&&"[[$SCALEMODE$]]"!=e.config().scaleMode?e.config().scaleMode:null,detectApi:void 0!=e.config().detectApi&&"1"===e.config().detectApi,isAICC:void 0!=e.config().isAICC&&"1"===e.config().isAICC,grekhilVersion:"",trackingAPIVersion:""}}),define("lib/constants/ScaleMode",[],function(){return{EXACT_FIT:"EXACTFIT",NO_SCALE:"NOSCALE",MAGIC:"MAGIC",LOOK:"LOOK"}}),define("ekhil",["ekhil/EkhilPlayer","lib/Utils","lib/Config","lib/constants/ScaleMode"],function(e,t,i,n){var o=e.getInstance(),r="_course/",s="course.xml",a="../_shared/",l="html5",c=!1,h="7.7.2",u=t.queryString(findParamWindow(window));if(void 0!=u.course&&""!=u.course){var d=t.getDecodedString(u.course);r=d.substring(0,d.lastIndexOf("/")+1),s=d.substring(d.lastIndexOf("/")+1,u.course.length)}void 0!=u.shared&&""!=u.shared&&(a=u.shared),void 0!=u.bIsELW&&""!=u.bIsELW&&(c="1"==u.bIsELW),void 0!=u.export&&""!=u.export&&(l=u.export),void 0!=u.grekhilVersion&&""!=u.grekhilVersion&&(h=u.grekhilVersion),-1==$.inArray(i.scaleMode,[n.EXACT_FIT,n.NO_SCALE,n.MAGIC])&&(i.scaleMode=n.LOOK),window.isHACP=!1,i.isAICC&&(void 0!=u.AICC_URL&&""!=u.AICC_URL&&(window.AICC_URL=t.getDecodedString(u.AICC_URL)),void 0!=u.AICC_SID&&""!=u.AICC_SID&&(window.AICC_SID=u.AICC_SID),void 0!=u.AICC_URL&&""!=u.AICC_URL&&void 0!=u.AICC_SID&&""!=u.AICC_SID&&(window.isHACP=!0)),o.setEnvironment(t.getDecodedString("_course/langs.xml"),r,s,t.getDecodedString(a),"look.xml",c,i.scaleMode,l),i.grekhilVersion=h,o.runCommand("Startup")}),define("graza/GrazaPlayer",["lib/Class"],function(e){return e.extend({parentDiv:null,container:null,moviePath:null,ekhilInstance:null,ekhilRuntime:null,embed:!1,loadCallback:null,scaleMode:"EXACTFIT",init:function(e,t,i,n,o,r){this._models={},t&&(this.parentDiv=t),i&&(this.ekhilInstance=i,this.embed=!0),n&&(this.ekhilRuntime=n,this.embed=!0),null!=o&&(this.loadCallback=o,this.embed=!0),!this.embed&&r&&(this.scaleMode=r);var s=e.split("/");s.pop(),this.moviePath=s.join("/"),this.runCommand("Startup",e)},runCommand:function(e){var t=Array.prototype.slice.call(arguments,1);require(["graza/controller/command/"+e+"Command"],this.runCommandCallback.bind(this,t))},runCommandCallback:function(e,t){var i=new t(this);i.execute.apply(i,e)},getModel:function(e){return this._models[e]},addModel:function(e,t){this._models[t]=e},getParentDiv:function(){return this.parentDiv||(this.parentDiv=document.querySelector("#container")),this.parentDiv},getMediaPath:function(e){var t="";if(""!=e&&void 0!=e&&"undefined"!=e)try{t=/http[s]?:\/\//.test(e)?e:this.moviePath+"/"+e}catch(e){console.info(e)}return t},getSize:function(){return{width:this.container.width,height:this.container.height}}})}),define("graza",["graza/GrazaPlayer","lib/Utils","lib/Config","lib/constants/ScaleMode"],function(e,t,i,n){if(-1==$.inArray(i.scaleMode,[n.NO_SCALE])&&(i.scaleMode="EXACTFIT"),window.isHACP=!1,i.isAICC){var o=t.queryString(findParamWindow(window));void 0!=o.AICC_URL&&""!=o.AICC_URL&&(window.AICC_URL=t.getDecodedString(o.AICC_URL)),void 0!=o.AICC_SID&&""!=o.AICC_SID&&(window.AICC_SID=o.AICC_SID),void 0!=o.AICC_URL&&""!=o.AICC_URL&&void 0!=o.AICC_SID&&""!=o.AICC_SID&&(window.isHACP=!0)}new e("_movie/movie.xml",document.querySelector("#container"),null,null,null,i.scaleMode)}),define("ekhil/model/CourseHelper",["lib/Class","lib/Utils"],function(e,t){var i=e.extend({});return i.getThemeSubPageNb=function(e){var t=-1;return e.hasAttribute("sub_page_nb")&&(t=Number(e.getAttribute("sub_page_nb"))),t},i.setPageName=function(e,t,i){var n=null,o=e.querySelector("node[id='"+t+"'] > metadata > name");return o&&(o.firstChild.textContent=i,n=o.firstChild.textContent),n},i.getPageName=function(e,t){var i=null,n=e.querySelector("node[id='"+t+"'] > metadata > name");return n&&(i=n.firstChild.textContent),i},i.interactionIdExists=function(e,t){return-1!==t.indexOf(e)},i.makeInteractionIdUnique=function(e,t){for(var n=e,o=1;i.interactionIdExists(n,t);)n=e+"_"+o,o++;return n},i.setInteractionId=function(e,t,n,o){var r="";return o?i.interactionIdExists(n,o)?(console.warn('Can not use interaction id "'+n+'": already used, interaction id must be unique'),r=null):(o.push(n),i.setPageName(e,t,n),r=n):(console.warn('"interactionIdList" is not an optional parameter'),r=null),r},i.getNodeRandomOrder=function(e,i){var n;if(null!==i&&void 0!==i)n=i.split("-");else{var o=e.querySelectorAll("theme[author_id='"+e.getAttribute("author_id")+"']>nodes>node"),r=o.length;n=[];for(var s=0;s<r;s++)n.push(o[s].getAttribute("id"));n=t.object_shuffle(n)}return n},i.getNodesSelection=function(e,t,i){var n=e.querySelectorAll("theme[author_id='"+e.getAttribute("author_id")+"']>nodes>node"),o=n.length;i>0&&(o=Math.min(o,i));for(var r,s=document.createElement("nodes"),a=0;a<o;a++)void 0!=t[a]&&t[a].match(/[0-9]+/)&&(r=+t[a].split(".").pop()-1,s.appendChild(n[r]));return s},i}),define("ekhil/model/Course",["lib/Class","lib/Utils","ekhil/model/CourseHelper"],function(e,t,i){var n=e.extend({_data:null,_initialData:null,setData:function(e){if(e){this._data=e,this.initInteractionsId();var t=e.implementation.createDocument(e.namespaceURI,null,null),i=t.importNode(e.documentElement,!0);t.appendChild(i),this._initialData=t}},exists:function(e){return!!this._data.querySelector('node[id="'+e+'"]')},havePage:function(e){var t=e.querySelector("page");return null!=t&&t.parentNode==e},getNaviguationNode:function(e){return t.isEmpty(this.navigationNode)&&(this.navigationNode=[]),t.isEmpty(this.navigationNode[e])&&(this.navigationNode[e]=t.getCachedQuerySelector(e,this._data,"node[id='"+e+"']>theme>navigation"),this.navigationNode[e]||(this.navigationNode[e]=t.getCachedQuerySelector(e,this._data,"node[id='"+e+"']>page>navigation"))),this.navigationNode[e]},haveTheme:function(e){var i=t.isEmpty(e)?null:t.getCachedQuerySelector(null,e,"theme");return null!==i&&i.parentNode===e},getParentThemeNode:function(e){var t=null;if(this.isTheme(e)){t=this._data.querySelector('node[id="'+e+'"]').parentNode.parentNode.parentNode}return t},isPage:function(e,t){var i=t?this._initialData:this._data;return this.havePage(i.querySelector('node[id="'+e+'"]'))},isTheme:function(e){var i=t.getCachedQuerySelector(e,this._data,'node[id="'+e+'"]');return this.haveTheme(i)},isEmptyTheme:function(e){return this.isTheme(e)&&0==this.getChildrenList(e).length},getPage:function(e,t){return(t?this._initialData:this._data).querySelector("node[id='"+e+"'] > page")},getTheme:function(e){return this._data.querySelector("node[id='"+e+"'] > theme")},getPageType:function(e){var i=this.getPage(e);return t.isEmpty(i)?void 0:i.getAttribute("type")},isResultPageType:function(e){return"result"==this.getPageType(e)},getPageObjectives:function(e){var t=[],i=this.getPage(e);if(i)for(var n=i.querySelectorAll("objectives>objective"),o=n.length,r=0;r<o;r++){var s=n[r].querySelector("title"),a=n[r].querySelector("description");t.push({id:n[r].id,title:s?s.textContent:"",description:a?a.textContent:""})}return t},getNodeTitle:function(e){var t=this._data.querySelector("node[id='"+e+"'] > metadata > title");return t?t.firstChild.textContent:""},getParentThemeNodeTitle:function(e){var t="",i=this._data.querySelector("theme>nodes>node[id='"+e+"']");if(i){var n=i.parentNode.parentNode.parentNode;if(n&&n.hasAttribute("id")){var o=n.getAttribute("id");t=this.getNodeTitle(o)}}return t},getParentThemeNodeIndex:function(e){var t=void 0,i=this._data.querySelector("theme>nodes>node[id='"+e+"']");if(i){var n=i.parentNode.parentNode.parentNode;n&&n.hasAttribute("id")&&(t=n.getAttribute("id"))}return t},getNodeQuestion:function(e){var i="",n=this._data.querySelector("node[id='"+e+"'] > page > screen > question > content");return null!=n&&null!=n.firstChild&&(i=t.stripHTML(n.firstChild.textContent)),i},getQuestionAuthorId:function(e){var t,i=this._data.querySelector("node[id='"+e+"'] > page > screen > question");return null!=i&&(t=i.getAttribute("author_id")),t},initInteractionsId:function(){for(var e=[],t=this._data.querySelectorAll("node"),n=t.length,o=0;o<n;o++){var r=t[o];if(this.havePage(r)){var s=r.getAttribute("id");if(this.exists(s)){var a=i.makeInteractionIdUnique(this.createInteractionId(s),e);i.setInteractionId(this._data,r.getAttribute("id"),a,e)}}}},createInteractionId:function(e){var n=null;if(!this.isTheme(e))if(""===(n=i.getPageName(this._data,e))||t.isEmpty(n)){var o=this.getNodePosition(e);n="INT"+String(o)}else n.replace(" ","_");return n},getNodeInteractionId:function(e){return i.getPageName(this._data,e)},getScreens:function(e){return this._data.querySelector("node[id='"+e+"'] > page").querySelectorAll("* > screen")},getScreenId:function(e){return this._data.querySelector("screen[author_id='"+e+"']").getAttribute("id")},isScreenExist:function(e){var i;return i=this._data.querySelector("screen[author_id='"+e+"']"),!t.isEmpty(i)},getLookName:function(){return this._data.querySelector("look").firstChild.textContent},getCourseTitle:function(){var e=this._data.querySelector("course > metadata > title");return e?e.firstChild.textContent:""},getNextNode:function(e){var t,i=e.parentNode.parentNode.parentNode;return"node"===i.tagName.toLowerCase()&&(t=i.nextElementSibling?i.nextElementSibling:this.getNextNode(i)),t},getMediaAncestorType:function(e,i){var n="undefined";if("sound"==i||"video"==i){var o=this._data.querySelector(i+"[author_id='"+e+"']");t.isEmpty(o)||o.parentNode&&o.parentNode.parentNode&&(n=o.parentNode.parentNode.nodeName)}return n},getNodeConditionLinks:function(e){var i=[],n=this._data.querySelector("node[id='"+e+"']");if(!t.isEmpty(n)){var o=!1,r=n.querySelector("node>links");if(null!=r&&r.hasAttribute("conditional")&&(o="1"==r.getAttribute("conditional")),o){var s=n.querySelectorAll("node>links>condition");if(s.length>0)for(var a=s.length,l=0;l<a;l++)!t.isEmpty(s[l].textContent)&&""!=s[l].textContent&&s[l].hasAttribute("action")&&s[l].hasAttribute("param")?i.push({condition:s[l].textContent,action:s[l].getAttribute("action"),param:s[l].getAttribute("param")}):console.warn("Course.getNodeConditionLinks : a condition is not well defined in "+e);else console.warn("Course.js condition : No conditions found");i.push({condition:"42=42",action:""!=n.querySelector("node>links").getAttribute("default_action")&&i.length>0?n.querySelector("node>links").getAttribute("default_action"):"gonextpage",param:n.querySelector("node>links").getAttribute("default_param")})}}return i},getNextNodeIndex:function(e,i){var n;if(null!=e){var o=this._data.querySelector("node[id='"+e+"']");if(t.isEmpty(o))console.warn("Course.js - getNextNodeIndex("+e+") : "+e+" inexistant");else{var r=o.querySelectorAll("node>links>link"),s=r.length;if(!t.isEmpty(r)&&s>0){for(var a=[],l=0;l<s;l++)a.push({scoreThreshold:Number(r[l].attributes.score.value),link:r[l].getAttribute("idref")});0!=a[0].scoreThreshold&&a.unshift({scoreThreshold:0,link:a[0].link}),100!=a[a.length-1].score&&a.push({scoreThreshold:100,link:null});for(var c=-1,l=0;l<a.length-1&&-1==c;l++)a[l].scoreThreshold==i?c=l:a[l].scoreThreshold<i&&i<=a[l+1].scoreThreshold&&(c=l+1);c>-1&&a[c].link&&(n=a[c].link)}if(t.isEmpty(n)){var h=o.nextElementSibling;if(t.isEmpty(h)&&(h=this.getNextNode(o)),!t.isEmpty(h)&&this.isEmptyTheme(h.getAttribute("id")))return console.warn("Course.js - getNextNodeIndex("+e+") : "+e+" is empty theme"),this.getNextNodeIndex(h.getAttribute("id"));t.isEmpty(h)||(n=h.getAttribute("id"))}}}return n},getClicAndGoConditions:function(e){var i=this._data.querySelector("node[id='"+e+"']"),n=[];if(!t.isEmpty(i))for(var o=i.querySelectorAll("elfe>content>links>link"),r=i.querySelectorAll("elfe>content>zones>zone"),s=0;s<r.length;s++){var a=this.getIndexLinkFromZone(o,r,s);t.isEmpty(a)||/page:\/\//.test(o[a].getAttribute("value"))&&r[s].hasAttribute("score")&&n.push({condition:"SCORE("+e+") =  "+r[s].getAttribute("score"),action:"gotopage",param:o[a].getAttribute("value").replace("page://","")})}return n},getIndexLinkFromZone:function(e,t,i){if(e.length>0)for(var n=0;n<e.length;n++)if(t.length>0&&t[i]&&e[n].getAttribute("id")===t[i].getAttribute("link"))return n},getNextNodesIndexes:function(e){var t=[];if(t.push(this.getNextNodeIndex(e,0)),null!=e){var i=this._data.querySelector("node[id='"+e+"']");if(null!=i){for(var n=i.querySelectorAll('button>content>action[action="gotopage"]'),o=n.length,r=0;r<o;r++){var e=n[r].attributes.param;e&&t.push(e.value)}for(var s=i.querySelectorAll('text>content[format="xhtml"]'),a=s.length,r=0;r<a;r++){var l=s[r].firstChild.textContent,c=l.match(/href="page:\/\/([^"]+)"/gi);for(var h in c)t.push(c[h].match(/href="page:\/\/([^"]+)"/)[1])}for(var u=i.querySelectorAll("elfe>content>links>link"),d=u.length,r=0;r<d;r++)/page:\/\//.test(u[r].attributes.value.value)&&t.push(u[r].attributes.value.value.replace("page://",""))}}return t},getNodePosition:function(e,i,n){var o,r=0;o=t.isEmpty(n)?t.getCachedQuerySelector(null,this._data,"root>theme>nodes>node",!0):t.getCachedQuerySelector(null,this._data,"node[id='"+n+"']>theme>nodes>node",!0);for(var s=o.length,a=0;a<s;a++){var l=o[a],c=l.getAttribute("id");if(this.havePage(l)){if(i?r+=this.getNavigationProgress(c):r++,c==e)break}else if(this.haveTheme(l)&&(!i||this.getAddProgress(c)?r+=this.getNodePosition(e,i,c):r+=this.getNavigationProgress(c),null!=l.querySelector("node[id='"+e+"']")))break}return r},getCurrentNodePosition:function(e,t){return this.getNodePosition(e,t)},getTotalNodeNum:function(e){return this.getNodePosition(void 0,e)},getFirstNodePage:function(e){for(var i=e;!t.isEmpty(this._data.querySelector("node[id='"+i+"']"))&&t.isEmpty(this.getPage(i));)i+=".1";return i},getChildrenList:function(e,i,n){var o,r=n?this._initialData:this._data,s=[];if(o=t.isEmpty(e)?r.querySelector("root"):t.getCachedQuerySelector(e,r,"node[id='"+e+"']")){var a="theme>nodes>node";if(i){var l=t.getCachedQuerySelector(null,o,"theme");if(l&&l.attributes.author_id){a='theme[author_id="'+l.attributes.author_id.value+'"]>nodes>node'}}for(var c=t.getCachedQuerySelector(null,o,a,!0),h=c.length,u=0;u<h;u++)s.push(c[u].attributes.id.value)}return s},getPageScreenAuthorId:function(e){var t;return this._data.querySelector("node[id='"+e+"']>page screen")?t=this._data.querySelector("node[id='"+e+"']>page screen").getAttribute("author_id"):console.warn("The Page Screen is not defined for index :"+e),t},getThemeAuthorId:function(e){var t=null,i=this.getTheme(e).parentNode;return i&&i.hasAttributes("author_id")&&(t=i.getAttribute("author_id")),t},getResultScreen:function(e,t){for(var i=this._data.querySelector("node[id='"+e+"']").querySelectorAll("results>result"),n=i.length-1,o=i[n].querySelector("screen").getAttribute("author_id");n>=0&&i[n].attributes.score.value>=t;)o=i[n].querySelector("screen").getAttribute("author_id"),n--;return o},getResultTargetNodes:function(e){var t=[],i=this._data.querySelector("node[id='"+e+"']>page>results>target_nodes");if(i)if(i.hasAttribute("begin")&&i.hasAttribute("end")){for(var n=this._data.querySelectorAll("page"),o=n.length,r=!1,s=!1,a=0;a<o;a++)if("result"!==n[a].getAttribute("type")){var l=n[a].parentNode.getAttribute("id");if(0==l.indexOf(i.getAttribute("begin"))&&(r=!0),0==l.indexOf(i.getAttribute("end")))s=!0;else if(s)break;r&&t.push(l)}}else for(var c=i.querySelectorAll("id"),h=0;h<c.length;h++){var u=c[h].getAttribute("value");if(this.isTheme(u)){n=this._data.querySelectorAll("node[id^='"+u+"']>page");for(var a=0;a<n.length;a++)"result"!==n[a].getAttribute("type")&&t.push(n[a].parentNode.getAttribute("id"))}else t.push(u)}return t},getHelpFeedbacksList:function(e){var t=[],i=this.getHelpFeedbacks(e);return i&&(t=i.querySelectorAll("fb")),t},getCorrecFeedbacksList:function(e){var t=[],i=this.getCorrecFeedbacks(e);return i&&(t=i.querySelectorAll("fb")),t},getHelpFeedbacks:function(e){return this._data.querySelector("node[id='"+e+"']>page>feedbacks>help")},getCorrecFeedbacks:function(e){return this._data.querySelector("node[id='"+e+"']>page>feedbacks>correc")},getFeedbackIndex:function(e,i){for(var n,o=this._data.querySelectorAll("node[id='"+e+"']>page>feedbacks fb"),r=o.length-1;t.isEmpty(n)&&r>=0;)o[r].querySelector("screen").getAttribute("author_id")==i&&(n=r),r--;return n},getFeedbackId:function(e,t){return this._data.querySelectorAll("node[id='"+e+"']>page>feedbacks fb")[t].querySelector("screen").getAttribute("author_id")},getFeedbackType:function(e){var t="",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.parentNode.nodeName),t},getFeedbackAllowAction:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("allow_action")),t},getFeedbackOverDrawLocked:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("over_draw_locked")),t},getFeedbackOverDraw:function(e){var t="1",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.getAttribute("over_draw")),t},displayFeedbackInFeedbackPage:function(e){return"0"==this.getFeedbackOverDraw(e)},getFeedbackInDraw:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("in_draw")),t},getFeedbackCoef:function(e){var t="1",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.getAttribute("coef")),t},getFeedbackShowBad:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("show_bad")),t},getFeedbackShowGood:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("show_good")),t},getFeedbackShowMissed:function(e){var t=!1,i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t="1"==i.parentNode.getAttribute("show_missed")),t},getFeedbackAction:function(e){var t="none",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.getAttribute("action")),t},getFeedbackCount:function(e){return this._data.querySelectorAll("node[id='"+e+"']>page>feedbacks fb").length},getFeedbackNavigationDisableBack:function(e){var t="0",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.querySelector("navigation").getAttribute("disable_back")),t},getFeedbackNavigationDisableNext:function(e){var t="0",i=this._data.querySelector('screen[author_id="'+e+'"]');return i&&(t=i.parentNode.querySelector("navigation").getAttribute("disable_next")),t},getMinTries:function(e){return parseInt(this._getTrackingValue(e,"min_tries"))},getMaxTries:function(e){return parseInt(this._getTrackingValue(e,"max_tries"))},getMasteryScore:function(e){var t=this._getTrackingValue(e,"masteryscore");return parseInt(t)},getMaxTime:function(e){return this._getTrackingValue(e,"max_time")},getTrackScore:function(e){return"1"==this._getTrackingValue(e,"track_score")},getTrackInteraction:function(e){return"1"==this._getTrackingValue(e,"track_interaction")},getTrackLessonLocation:function(e){return"1"==this._getTrackingValue(e,"track_lesson_location")},getCoef:function(e){var t=0;if(this.hasArithmeticMeanCoef(e))for(var i=this.getChildrenList(e,!0),n=i.length,o=0;o<n;o++)t+=this.getCoef(i[o]);else t=+this._getTrackingValue(e,"coef");return t},getNavigationProgress:function(e){var t=0;if(this.getAddProgress(e))for(var i=this.getChildrenList(e),n=i.length,o=0;o<n;o++)t+=this.getNavigationProgress(i[o]);else t=+this.getNavigationValue(e,"progress");return t},hasArithmeticMeanCoef:function(e){return"1"===this._getTrackingValue(e,"add_coef")},getReinit:function(e){return"1"==this._getTrackingValue(e,"reinit")},getAddProgress:function(e){return"1"==this.getNavigationValue(e,"add_progress")},getScoreMode:function(e){return this._getTrackingValue(e,"score_mode")},getMasteryType:function(e){return this._getTrackingValue(e,"masterytype")},isBinaryScoreMode:function(e){return"1"==this._getTrackingValue(e,"binary")},_getTrackingValue:function(e,i){if(t.isEmpty(e))var n=this._data.querySelector("root>theme>tracking");else{var n=this._data.querySelector("node[id='"+e+"']>theme>tracking");n||(n=this._data.querySelector("node[id='"+e+"']>page>tracking"))}return n?t.getAttribute(n,i,null):null},getNavigationValue:function(e,i){var n
;return n=t.isEmpty(e)?t.getCachedQuerySelector(null,this._data,"root>theme>navigation"):this.getNaviguationNode(e),n?t.getAttribute(n,i,null):null},getExitMode:function(){return this._data.querySelector("navigation").getAttribute("exit_mode")},getHistoryMode:function(){return this._data.querySelector("navigation").getAttribute("history_mode")},getReinitCourse:function(){return"1"===this._data.querySelector("navigation").getAttribute("reinit")},getData:function(){return this._data},getMetadata:function(e){var t=this._data.querySelector('node[id="'+e+'"]>metadata');return null!==t?{title:null!==t.querySelector("title")?t.querySelector("title").textContent:"",name:null!==t.querySelector("name")?t.querySelector("name").textContent:"",keywords:null!==t.querySelector("keywords")?t.querySelector("keywords").textContent:""}:{title:"",name:"",keywords:""}},getNodeNavigation:function(e){var t=this._data.querySelector('node[id="'+e+'"]>navigation');return{disableLink:!!+t.getAttribute("disable_link"),disableIndex:!!+t.getAttribute("disable_index")}},getEnableIndexChildrenList:function(e){for(var t=[],i=this.getChildrenList(e,!0),n=i.length,o=0;o<n;o++){var r=i[o];this.getNodeNavigation(r).disableIndex||t.push(r)}return t},getTargetNodes:function(e){var t=this._data.querySelector('node[id="'+e+'"]>page>results>target_nodes'),i={};if(t)if(t.hasAttribute("begin")&&t.hasAttribute("end")){var n=t.getAttribute("begin"),o=t.getAttribute("end");if(n===o)i[n]=this.getNodeStructureToShow(n);else{var r=n;do{i[r]=this.getNodeStructureToShow(r)}while(r!=o&&(r=this.getNextNodeIndex(r,0)))}}else for(var e,s=t.querySelectorAll("id"),a=0,l=s.length;a<l;a++)e=s[a].getAttribute("value"),""==e?console.warn("Empty target_nodes id value"):i[e]=this.getNodeStructureToShow(e);return i},getNodeStructureToShow:function(e){var t={};if(this.isTheme(e)){var i=this.getChildrenList(e,!0);for(var n in i)t[i[n]]=this.getNodeStructureToShow(i[n])}return t},isRandomTheme:function(e){return null!=this._data.querySelector("node[id='"+e+"']>theme>tracking[randomize='1']")},isActivityNbRestricted:function(e){var t=!1,n=this._data.querySelector("node[id='"+e+"']>theme>tracking");if(n){i.getThemeSubPageNb(n)>0&&(t=!0)}return t},getActivityRestrictedThemes:function(){for(var e=[],t=this._data.querySelectorAll("theme>tracking"),n=t.length,o=0;o<n;o++)if(i.getThemeSubPageNb(t[o])>0){var r=t[o].parentNode.parentNode;r&&r.hasAttribute("id")&&e.push(t[o].parentNode.parentNode.getAttribute("id"))}return e},getRestrictedThemesNoRandom:function(){for(var e=[],t=this._data.querySelectorAll("theme>tracking"),n=0;n<t.length;n++)if(i.getThemeSubPageNb(t[n])>0){var o=t[n].parentNode.parentNode;o&&o.hasAttribute("id")&&(this.isRandomTheme(o.getAttribute("id"))||e.push(o.getAttribute("id")))}return e},restrictActivityNb:function(e){var t=this._data.querySelector("node[id='"+e+"']>theme");if(t){var n;if(t.hasAttribute("author_id")){n=t.querySelectorAll("theme[author_id='"+t.getAttribute("author_id")+"']>nodes>node");var o=n.length,r=t.querySelector("tracking");if(r){var s=i.getThemeSubPageNb(r);s>0&&(o=Math.min(o,s));for(var a=document.createElement("nodes"),l=0;l<o;l++)a.appendChild(n[l]);t.replaceChild(a,t.querySelector("theme[author_id='"+t.getAttribute("author_id")+"']>nodes"))}}}else console.warn("Course.js:restrictActivityNb() - unable to find the theme associated to nodeIndex : "+e)},getRandomOnStartThemes:function(){for(var e=[],t=this._data.querySelectorAll("tracking[randomize_type='on_start'][randomize='1']"),i=t.length,n=0;n<i;n++)e.push(t[n].parentNode.parentNode.attributes.id.value);return e},getRandomOnPageThemes:function(){for(var e=[],t=this._data.querySelectorAll("tracking[randomize_type='on_page'][randomize='1']"),i=t.length,n=0;n<i;n++)e.push(t[n].parentNode.parentNode.attributes.id.value);return e},getRandomThemes:function(){for(var e=[],t=this._data.querySelectorAll("tracking[randomize='1']"),i=t.length,n=0;n<i;n++)e.push(t[n].parentNode.parentNode.attributes.id.value);return e},isRandomOnPage:function(e){var t=!1,i=this._data.querySelector("node[id='"+e+"']>theme>tracking");return i&&(t="1"==i.getAttribute("randomize")&&"on_page"==i.getAttribute("randomize_type")),t},resetThemeOrder:function(e,t,i){if(i){var n=i.querySelector("node[author_id='"+t+"']>theme>nodes");n&&e.replaceChild(n.cloneNode(!0),e.querySelector("nodes"))}return e},randomizeTheme:function(e,t,n){var o=this.getTheme(e);if(null!=o){t&&(o=this.resetThemeOrder(o,this.getThemeAuthorId(e),this._initialData));for(var r=i.getNodeRandomOrder(o,n),s=i.getNodesSelection(o,r,i.getThemeSubPageNb(o.querySelector("tracking"))),a=[],l=s.children.length,c=0;c<l;c++){var h=s.children[c],u=h.getAttribute("id"),d=u.substring(0,u.lastIndexOf("."));d!=e&&h.setAttribute("id",u.replace(d,e)),a.push(h.getAttribute("id"));for(var g,f=h.getAttribute("id").replace(/[0-9]+$/,c+1),p=h.querySelectorAll("node"),m=new RegExp(h.getAttribute("id"),"g"),A=0;A<p.length;A++)g=p[A].getAttribute("id").replace(m,f),p[A].setAttribute("id",g);h.setAttribute("id",f)}s.setAttribute("order",a.join("-")),o.replaceChild(s,o.querySelector("theme[author_id='"+o.getAttribute("author_id")+"']>nodes"))}else console.warn("Course.js:randomizeTheme() - unable to find the theme associated to nodeIndex : "+e)},getThemeRandomOrder:function(e){var t=null,i=this._data.querySelector("node[id='"+e+"']>theme>nodes");return i&&i.hasAttribute("order")&&i.getAttribute("order")&&(t=i.getAttribute("order")),t},getEldarAuthorId:function(e,t){var i;if(this.isPage(e,t)){var n=this.getPage(e,t),o=n.querySelector("elfe");o&&(i=o.attributes.author_id.value)}return i},getEldarType:function(e){var i=this.getEldarAuthorId(e);return t.isEmpty(i)?"":this._data.querySelector("[author_id='"+i+"']").getAttribute("id")},isClicAndGoActivity:function(e){return"ClicAndGo"===this.getEldarType(e)},getPageIndexByPageName:function(e){for(var t=this.getChildrenList(),n=t.length,o=0;o<n;o++)if(this.isPage(t[o])&&e===i.getPageName(this._data,t[o]))return t[o];return null}});return n.MODEL_ID="MODEL_COURSE",n}),define("ekhil/model/Look",["lib/Class","lib/Utils","lib/constants/ScaleMode"],function(e,t,i){var n=e.extend({_data:null,_name:"elook",setData:function(e){this._data=e},getOrientation:function(){var e=this._data.querySelector("look").attributes;return+e.width.value>+e.height.value?n.LANDSCAPE:n.PORTRAIT},getLookScreenObjects:function(e){for(var t=[],i=e.length,n=0;n<i;n++){var o=e[n].attributes.id.value;t=t.concat(this.getScreenobjects(this.getScreenReferences(o),e[n]))}return t},getLookPageScreenObjects:function(e){return this.getScreenobjects(this._data.querySelectorAll('screen[id="'+e+'"] > *'))},getLookPageScreenAuthorId:function(e){for(var t=[],i=this.getLookPageScreenObjects(e),n=i.length,o=0;o<n;o++)t.push(i[o].attributes.author_id.value);return t},getLookScreenAuthorId:function(e,t){for(var i=[],n=this.getScreenReferences(e),o=n.length,r=0;r<o;r++)if(void 0!=n[r].attributes.ref){var s=this.getScreenObject(n[r].attributes.ref.value);null!=s&&void 0!=s.attributes.author_id?i.push(s.attributes.author_id.value):console.warn("invalid reference["+n[r].attributes.ref.value+"] in look.xml")}else"screen"==n[r].nodeName&&i.push({screen:t});return i},getScreenReferences:function(e){var t=this._data.querySelectorAll('screen[id="base_'+e+'"] > *');return t.length||console.warn("ScreenReference Not found in the look file: ",e),t},getScreenobjects:function(e,t){for(var i=[],n=0;n<e.length;n++)if("screen"==e[n].nodeName){for(var o={id:e[n].querySelector("screen").attributes.id.value,left:e[n].attributes.left.value,top:e[n].attributes.top.value,width:e[n].attributes.width.value,height:e[n].attributes.height.value,authorId:t.attributes.author_id.value,objects:[]},r=t.querySelectorAll('screen[id="'+o.id+'"] > *'),s=this.getScreenobjects(e[n].querySelector("screen").querySelectorAll("*")),a=0;a<r.length;a++)o.objects.push(this.getMergedScreenobject(r[a],e[n],s));i.push(o)}else{var l=this.getScreenObject(e[n].attributes.ref.value);l?i.push(l):console.warn("invalid reference["+e[n].attributes.ref.value+"] in look.xml")}return i},getMergedScreenobject:function(e,i,n){if(!e.hasAttribute("merged"))if(e.setAttribute("merged","1"),e.hasAttribute("id")){var o,r=n.length;do{r--,o=n[r]}while(r>=0&&o.getAttribute("id")!=e.getAttribute("id"));if(t.isEmpty(o))this.relativeToAbsolute(i,e.querySelector("design"));else{var s=e.querySelector("design"),a=o.querySelector("design");if(!t.isEmpty(a)&&a.hasAttribute("locked")&&"1"==a.getAttribute("locked")||!t.isEmpty(s)&&s.hasAttribute("locked")&&"1"==s.getAttribute("locked")){var l=a?a.cloneNode(!0):document.createElement("design");l.hasAttribute("left")&&(l.attributes.left.value-=i.getAttribute("left")),l.hasAttribute("anim_start_left")&&(l.attributes.anim_start_left.value-=i.getAttribute("left")),l.hasAttribute("top")&&(l.attributes.top.value-=i.getAttribute("top")),l.hasAttribute("anim_start_top")&&(l.attributes.anim_start_top.value-=i.getAttribute("top")),e.replaceChild(l,s)}else this.relativeToAbsolute(i,e.querySelector("design"));var c=e.querySelector("content"),h=o.querySelector("content");if(!t.isEmpty(h)&&h.hasAttribute("locked")&&"1"==h.getAttribute("locked")||!t.isEmpty(c)&&c.hasAttribute("locked")&&"1"==c.getAttribute("locked")){var u=h?h.cloneNode(!0):document.createElement("content");e.replaceChild(u,c)}}}else this.relativeToAbsolute(i,e.querySelector("design"));return e},relativeToAbsolute:function(e,t){void 0!==t.attributes.left&&void 0!==t.attributes.top&&void 0!==t.attributes.width&&void 0!==t.attributes.height&&(t.attributes.left.value*=e.attributes.width.value/100,t.attributes.top.value*=e.attributes.height.value/100,t.attributes.width.value*=e.attributes.width.value/100,t.attributes.height.value*=e.attributes.height.value/100),void 0!==t.attributes.anim_start_left&&void 0!==t.attributes.anim_start_top&&(t.attributes.anim_start_left.value*=e.attributes.width.value/100,t.attributes.anim_start_top.value*=e.attributes.height.value/100)},getScreenObject:function(e){return this._data.querySelector('medias > *[ref="'+e+'"]')},getLookFolder:function(){return n.BASE_PATH+this._name+"/"},getLookPath:function(){return this.getLookFolder()+n.FILE_NAME},getWidth:function(){return this._data.querySelector("look").attributes.width.value},getLookParameters:function(){return{width:this.getWidth(),height:this.getHeight(),bgcolor:this.getBackgroundColor(),bgimage:this.getBackgroundImage(),bgposition:this.getBackgroundImagePosition(),bgrepeat:this.getBackgroundImageRepeat(),bgstreched:this.getBackgroundStreched(),orientation:this.getOrientation()}},getHeight:function(){return this._data.querySelector("look").attributes.height.value},getBackgroundColor:function(){return this._data.querySelector("look").attributes.bgcolor.value},getBackgroundImage:function(){return this._data.querySelector("look").getAttribute("bgimage")},getBackgroundImagePosition:function(){return this._data.querySelector("look").getAttribute("bgposition")},getBackgroundImageRepeat:function(){return this._data.querySelector("look").getAttribute("bgrepeat")},getBackgroundStreched:function(){var e="STRECHED_NONE";return"REPEAT_NONE"==this.getBackgroundImageRepeat()&&(e=this._data.querySelector("look").getAttribute("bgstreched")),e},getScaleMode:function(){var e=i.MAGIC;return this._data.querySelector("look").hasAttribute("scalemode")&&(e=this._data.querySelector("look").attributes.scalemode.value.split("SCALEMODE_")[1]),e}});return n.MODEL_ID="MODEL_LOOK",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n}),define("lib/APIWrapperProxy",["require","exports","module"],function(e,t){var i=!1;void 0!==window.initTracking?(i=!0,window.tracking={},window.trackingReadOnly={},window.isValueInArray=function(e,t){for(var i=!1,n=0,o=e.length;n<o&&!i;)i=e[n]==t,n++;return i}):console.warn("Unable to locate APIWrapper.js. Is it loaded ?"),t.initTracking=i?window.initTracking:function(){},t.doLMSCommit=i?window.doLMSCommit:function(){},t.doLMSFinish=i?window.doLMSFinish:function(){},t.doLMSGetDiagnostic=i?window.doLMSGetDiagnostic:function(){},t.doLMSGetErrorString=i?window.doLMSGetErrorString:function(){},t.doLMSGetLastError=i?window.doLMSGetLastError:function(){},t.doLMSGetValue=i?window.doLMSGetValue:function(){},t.doLMSInitialize=i?window.doLMSInitialize:function(){},t.doLMSSetValue=i?window.doLMSSetValue:function(){},t.tracking=i?window.tracking:[],t.scormVersion="2004"}),define("lib/constants/TrackingAPIVersion",[],function(){return{HACP:"hacp",SCORM_12:"1.2",SCORM_2004:"2004"}}),define("ekhil/model/runtime/NodeData",["lib/Class"],function(e){return e.extend({nodeIndex:"",score:0,time:0,tries:0,isTheme:!1,interactionNumber:null,randomOrder:null,fb:null,author_id:null,init:function(){this.fb=[]}})}),define("lib/TracesLog",["lib/Class","lib/Config","lib/Utils"],function(e,t,i){var n,o=e.extend({init:function(){this.history_keys=[],this.grekhilLogs="",this.debugWindow=null,this.style="html, body { margin: 0; padding: 0;\theight: 100%; width: 100%;}table {border-collapse: collapse; font-family: Arial, Helvetica, sans-serif; white-space: nowrap; width: 100%;}th, td {font-size: 12px;\ttext-align: left;padding: 8px;}.grekhil-logs th {\tbackground-color: #666666;color: #ffffff}tr:nth-child(even) {background-color: #089fda;\tfont-size: 12px;text-align: left;padding: 8px;}\t.grekhil-logs .error {background-color: #FF0000; font-weight: bold;}\t.grekhil-logs .warning {background-color: #FFCC00; font-weight: bold;}\t",this.onTraceLogKeyEvent()},onTraceLogKeyEvent:function(){$(document).on("keydown",function(e){this.history_keys.push(e.which),-1!=this.history_keys.indexOf(37)&&-1!=this.history_keys.indexOf(17)&&-1!=this.history_keys.indexOf(32)&&this.openWindowsDebug(),this.history_keys.length>3&&this.history_keys.shift()}.bind(this))},openWindowsDebug:function(){this.debugWindow||(this.createWindowDebug(),this.showGrekhilLogs(),$(this.debugWindow.window).bind("resize",function(){$(this.debugWindow.document).find(".grekhil-logs").css({width:$(this.debugWindow).width()})}.bind(this)),$(this.debugWindow.window).bind("beforeunload",function(){this.debugWindow=null,this.history_keys=[],this.grekhilLogs=""}.bind(this)))},createWindowDebug:function(){this.debugWindow=window.open("","","width=800,height=600,scrollbars=yes,resizable=yes"),this.debugWindow.document.writeln('<html><head>   <title>HTML PLAYER LOGS</title>   <style type="text/css">'+this.style+'</style>\t<script src="http://code.jquery.com/jquery-1.11.3.min.js"><\/script>\t<link href="https://cdn.datatables.net/1.10.7/css/jquery.dataTables.css" rel="stylesheet" type="text/css"/>\t<script src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.js"><\/script>\t<link href="https://cdn.datatables.net/buttons/1.2.2/css/buttons.dataTables.css" rel="stylesheet" type="text/css"/>\t<script src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.js"><\/script>\t<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"><\/script>\t<script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"><\/script>\t<script>$(document).ready(function () {$("#logs").DataTable();});<\/script>\t<meta charset=utf-8/></head><body>  <table id="logs" class="grekhil-logs"><thead> <tr><th>TIME</th><th>VERSION</th><th>CLASS</th><th>FUNCTION</th><th>MESSAGE</th></tr></thead>')},showGrekhilLogs:function(){try{$(this.debugWindow.document).find("#logs > tbody > tr").remove(),this.debugWindow.document.write(this.grekhilLogs)}catch(e){console.warn("TracesLog-error: "+e)}},saveHtmlGrekhilLogs:function(e,t,n,o){var r=new Date,s="["+i.str_pad(r.getDate(),2,"0","STR_PAD_LEFT")+"/"+i.str_pad(r.getMonth()+1,2,"0","STR_PAD_LEFT")+"/"+r.getFullYear()+" "+i.str_pad(r.getHours(),2,"0","STR_PAD_LEFT")+":"+i.str_pad(r.getMinutes(),2,"0","STR_PAD_LEFT")+":"+i.str_pad(r.getSeconds(),2,"0","STR_PAD_LEFT")+"."+i.str_pad(r.getMilliseconds(),4,"0","STR_PAD_LEFT")+"] ";this.grekhilLogs+=this.addRowLog(s,e,t,n,o),this.debugWindow&&this.showGrekhilLogs()},addRowLog:function(e,i,n,o,r){return r=r?"class="+r:"","<tr><td><div>"+e+"</div></td><td><div>"+t.grekhilVersion+"</div></td><td><div>"+i+"</div></td><td><div>"+n+"</div></td><td "+r+"><div>"+o+"</div></td></tr>"},TRACKING_LOG:"Tracking",LOADING_LOG:"Loading",NAVIGATIONS_LOG:"Navigation",DISPLAY_LOG:"Display",ELDAR_LOG:"Activity",BUTTON_LOG:"Action button",RUNTIME_CLASS_NAME:"Runtime.js",STYLE_ERROR_LOGS:"error",STYLE_WARNING_LOGS:"warning"});return o.getInstance=function(){return void 0===n&&(n=new o),n},o}),define("ekhil/model/Runtime",["lib/Class","lib/APIWrapperProxy","lib/Config","lib/constants/TrackingAPIVersion","ekhil/model/runtime/NodeData","lib/Utils","lib/TracesLog"],function(e,t,i,n,o,r,s){var a=e.extend({SUSPEND_DATA_FLASH_SEPARATOR:"%26%3D",init:function(){this.startTime=(new Date).getTime(),this.currentNodeStartTime=this.startTime,this.objectivesPositions=[],this.history=[],this.answers=[],this.nodeData=[],this.loadedNodes={},this.variables=[],this.bIsHACP=window.isHACP,this.aiccUrl=window.AICC_URL,this.aiccSid=window.AICC_SID},lesson_location:"1",lesson_status:"incomplete",currentFeedback:void 0,interactionCounter:0,objectivesPositions:null,objectivesCount:-1,history:null,historyIndex:-1,oldHistoryIndex:-1,startTime:0,isGoingBack:!1,currentNodeStartTime:0,soundMute:!1,soundVolume:100,answers:null,nodeData:null,variables:null,pageScreen:"",isNoEvalPage:!1,showSubtitles:!1,lang:"",trackingInitalized:!1,debug:!1,tracesLog:s.getInstance(),loadedNodes:null,initializeAiccParameters:function(){window.exitWindow=function(){}},load:function(e){if(this.isHACP())t.trackingAPIVersion="hacp",this.initializeAiccParameters(),this.initTrackingAICC(e);else if(i.trackingAPIVersion=t.doLMSInitialize(i.detectApi),i.detectApi&&"false"===i.trackingAPIVersion)$(".loader").hide();else switch(i.trackingAPIVersion){case n.SCORM_2004:case n.SCORM_12:t.trackingAPIVersion=i.trackingAPIVersion;var o=t.initTracking();this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"APIWrapperProxy.Initialize() : ("+typeof o+") "+o);var r=t.doLMSGetValue("cmi.core.lesson_status").charAt(0),s=t.doLMSGetValue("cmi.core.entry");for(this.lang=t.doLMSGetValue("cmi.learner_preference.language"),this.showSubtitles="1"===t.doLMSGetValue("cmi.learner_preference.audio_captioning"),"resume"===s?("c"===r||"f"===r||"p"===r?t.doLMSSetValue("cmi.core.lesson_status","complete"):t.doLMSSetValue("cmi.core.lesson_status","incomplete"),this.parseSuspendData(t.doLMSGetValue("cmi.suspend_data")),this.lesson_location=t.doLMSGetValue("cmi.core.lesson_location")||this.lesson_location):t.doLMSSetValue("cmi.core.lesson_status","incomplete");this.history.length>0&&this.history[this.historyIndex]!==this.lesson_location;)this.history.pop(),this.historyIndex--;this.objectivesCount=t.doLMSGetValue("cmi.objectives._count");for(var a=0;a<this.objectivesCount;a++)this.objectivesPositions.push(t.doLMSGetValue("cmi.objectives."+a+".id"));i.trackingAPIVersion===n.SCORM_12?this.soundVolume=0:this.soundVolume=100,this.trackingInitalized=!0,e.call(this.getLessonLocation());break;default:window.location.hash&&this.parseURLParams(window.location.hash.replace("#","")),e.call(this.getLessonLocation())}},parseURLParams:function(e){for(var t=e.split("&"),i=[],n=[],o=0;o<t.length;o++){var s=t[o].split("=");s[1]=r.getDecodedString(s[1]),i[o]=s[0],n[o]=s[1]}var a=i.indexOf("cmi.core.lesson_location");a>=0&&(this.lesson_location=n[a]),(a=i.indexOf("cmi.suspend_data"))>=0&&this.parseSuspendData(n[a])},initTrackingAICC:function(e){try{var t=this;$.ajax({url:this.aiccUrl,type:"POST",crossDomain:!0,data:{aicc_data:"",session_id:this.aiccSid,command:"GetParam"},success:function(i){t.initTrackingAICCEvent(i,e)}})}catch(e){console.info("__Runtime.initTrackingAICC - error : ",e),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"__Runtime.initTrackingAICC - error : "+e,this.tracesLog.STYLE_ERROR_LOGS)}},initTrackingAICCEvent:function(e,i){var n=this.getHACPSuspendData(e);for(this.parseSuspendData(r.getDecodedString(n)),""===n?t.doLMSSetValue("cmi.core.entry",""):(this.lesson_location=r.getINIParam("lesson_location",e),t.doLMSSetValue("cmi.core.entry","resume")),this.isCompletedLessonStatus(r.getINIParam("lesson_status",e))?t.doLMSSetValue("cmi.core.lesson_status","completed"):t.doLMSSetValue("cmi.core.lesson_status","incomplete"),t.doLMSSetValue("cmi.core.student_id",r.getINIParam("student_id",e)),t.doLMSSetValue("cmi.core.student_name",r.getINIParam("student_name",e));this.history.length>0&&this.history[this.historyIndex]!==this.lesson_location;)this.history.pop(),this.historyIndex--;this.objectivesCount=t.doLMSGetValue("cmi.objectives._count");for(var o=0;o<this.objectivesCount;o++)this.objectivesPositions.push(t.doLMSGetValue("cmi.objectives."+o+".id"));this.trackingInitalized=!0,i.call(this.getLessonLocation())},getHACPSuspendData:function(e){e=e.toLowerCase().replace(" =","=").replace("= ","=");var t=r.getINIGroup("[core_lesson]",e);return t=t.replace(/%26%3d/g,a.SUSPEND_DATA_SEPARATOR)},isCompletedLessonStatus:function(e){e=e.toLowerCase();var t=e.charAt(0);return"c"===t||"p"===t||"b"===t||"f"===t},setNodeStatus:function(e,t){this.loadedNodes[e]=t},getNodeStatus:function(e){return this.loadedNodes[e]},getLessonStatus:function(){return this.lesson_status},setLessonStatus:function(e){this.lesson_status=e},setPageScreen:function(e){this.pageScreen=e},getPageScreen:function(){return this.pageScreen},setNoEvalPage:function(e){this.isNoEvalPage=e},getNoEvalPage:function(){return this.isNoEvalPage},getLessonLocation:function(){return this.lesson_location},setLessonLocation:function(e,t,i){var n=this.getNodeData(this.lesson_location);if(this.lesson_location!==e){var o=(new Date).getTime();n&&(n.time=Math.round((o-this.currentNodeStartTime)/1e3)),this.lesson_location=e,n=this.getNodeData(this.lesson_location),this.currentNodeStartTime=o-n.time,n&&n.tries++}else(i||void 0===t&&void 0!==this.currentFeedback)&&n&&n.tries++;this.currentFeedback=t,n&&(n.tries=Math.max(n.tries,1)),void 0!=this.currentFeedback&&n.fb[this.currentFeedback]++},getPreviousIndex:function(e,t){var i="";return this.setGoingBack(t||!1),e-=1,this.hasPreviousIndex(e)&&(i=this.nodeData[this.history[e]].isTheme?this.getPreviousIndex(e,t):this.history[e]),i},getIndexHistoryFromIndex:function(e){var t=-1;if(void 0!==this.history&&void 0!==e)for(var i=this.history.length,n=0;n<i&&-1===t;)this.history[n]===e&&(t=n),n++;return t},addHistoryIndex:function(e,t,i){var n=!1;return void 0===this.history&&(this.history=[]),this.isGoingBack&&this.setGoingBack(!1),void 0!==e&&""!==e&&(n="browser"===i?this.addBrowserHistoryIndex(e,t):this.addNormalHistoryIndex(e)),n},addNormalHistoryIndex:function(e){var t=!1;if(0===this.history.length)this.history.push(e),this.oldHistoryIndex=this.historyIndex,this.historyIndex=0,t=!0;else{var i=this.history.length,n=this.getIndexHistoryFromIndex(e);if(-1===n){if(this.historyIndex<i-1)for(var o=this.historyIndex+1;o<i;o++)this.history.pop();this.history.push(e),this.oldHistoryIndex=this.historyIndex,this.historyIndex=this.history.length-1,t=!0}else n!==this.historyIndex&&(this.oldHistoryIndex=this.historyIndex,this.historyIndex=n),t=!0}return t},addBrowserHistoryIndex:function(e,t){var i=!1,n=this.history.length;if(0===n)this.history.push(e),this.historyIndex=this.history.length-1,i=!0;else if(t)this.historyIndex>0&&(this.historyIndex--,i=!0);else if(this.history[this.historyIndex]===e)i=!0;else{if(this.historyIndex<n-1)if(this.history[this.historyIndex+1]===e)this.historyIndex++;else{for(var o=this.historyIndex+1;o<n;o++)this.history.pop();this.history.push(e),this.historyIndex=this.history.length-1}else this.history.push(e),this.historyIndex=this.history.length-1;i=!0}return this.oldHistoryIndex=this.historyIndex,i},hasPreviousIndex:function(){return void 0!==this.history[this.historyIndex-1]},setGoingBack:function(e){this.isGoingBack=e},initNodeData:function(e,t,i,n,r){if(void 0===this.nodeData[e]||!0===r){var s=new o;s.nodeIndex=e,i&&(s.isTheme=!0,s.randomOrder=n);for(var a=0;a<t;a++)s.fb.push(0);this.nodeData[e]=s}else i&&n&&(this.nodeData[e].isTheme=!0,this.nodeData[e].randomOrder=n)},getNodeData:function(e){return this.nodeData[e]},getNodeDataFromNodeIndex:function(e){var t;for(var i in this.nodeData){var n=this.getNodeData(i);if(void 0!==n&&n.nodeIndex===e){t=n;break}}return t},getNodeSuspendData:function(e){var t="";return void 0!==e&&(t=e.nodeIndex,e.isTheme?null!==e.randomOrder&&(t+=":"+e.randomOrder):(t+=","+e.tries,t+=","+e.time,t+=","+e.score,e.fb.length>0&&(t+=","+e.fb.join(",")))),t},getSuspendData:function(){var e="";e+=a.SUSPEND_DATA_SEPARATOR;var t=[];for(var n in this.variables){var o=n+"="+this.variables[n];t.push(o)}e+=t.join("|"),e+=a.SUSPEND_DATA_SEPARATOR,e+=a.SUSPEND_DATA_SEPARATOR,e+=a.SUSPEND_DATA_SEPARATOR;var r=[];if(void 0!==this.history&&this.history.length>0)for(var s=0;s<this.history.length;s++){var l="",c=this.getNodeDataFromNodeIndex(this.history[s]);void 0!==c&&(l+=this.getNodeSuspendData(c),r.push(l))}e+=r.join("|"),e+=a.SUSPEND_DATA_SEPARATOR;var h=[];for(var s in this.answers)h.push(s+"="+this.answers[s]);return e+=h.join("|"),e+=a.SUSPEND_DATA_SEPARATOR+"html-"+i.grekhilVersion},getImplicitThemes:function(e){var t=[];if(r.isNotEmpty(e))for(var i=e.split("."),n="",o=0;o<i.length-1;o++)n+=i[o],t.push(n),n+=".";return t},parseSuspendData:function(e){if(""!==(e=this.getDecodeSuspendData(e))&&void 0!==e){var t=e.split(a.SUSPEND_DATA_SEPARATOR),i=[],n=[],o=[];if(t.length>1)i=t[1].split("|"),n=t[4].split("|"),o=t[5].split("|");else{var s=e.split("&"),l=s.length;if(l>1){for(var c=0;c<l;c++){var h=s[c];void 0!==h[0]&&void 0!==h[1]&&i.push(s[c])}n=String(s.shift()).split("|")}else n=s[0].split("|")}for(var u=i.length,c=0;c<u;c++){var h=i[c].split("=");this.setVariable(h[0],h[1])}for(var d=n.length,c=0;c<d;c++){var g=n[c].split(","),f=g.length,p=1===f,m=null;p&&(g=n[c].split(":"),void 0!==g[1]&&(m=g[1]));var A=g[0],v=this.getImplicitThemes(A);if(void 0!==v)for(var b=0;b<v.length;b++)r.isEmpty(this.getNodeData(v[b]))&&this.initNodeData(v[b],0,!0,null,!1);if(this.initNodeData(A,f-4,p,m),!p){this.nodeData[A].tries=g[1]||0,this.nodeData[A].time=g[2]||0,this.nodeData[A].score=g[3]||0;for(var b=4;b<f;b++)this.nodeData[A].fb[b-4]=g[b]}this.history.push(A),this.historyIndex++}for(var y=o.length,c=0;c<y;c++){var S=o[c].split("=");this.answers[S[0]]=S[1]}}},getDecodeSuspendData:function(e){try{e=decodeURIComponent(e)}catch(t){this.tracesLog.saveHtmlGrekhilLogs("Runtime",this.tracesLog.TRACKING_LOG,"__Runtime.initTrackingAICC - error : "+t,this.tracesLog.STYLE_ERROR_LOGS),-1!==e.indexOf(a.SUSPEND_DATA_SEPARATOR)&&(e=decodeURIComponent(encodeURIComponent(e)))}return e},reinitAnswer:function(e){delete this.answers[e]},getObjectivePosition:function(e){for(var t=+this.objectivesCount-1;t>-1&&this.objectivesPositions[t]!==e;)t--;return t},getPageTime:function(e){if(this.lesson_location==e){var t=(new Date).getTime();this.nodeData[e].time=Math.round((t-this.currentNodeStartTime)/1e3)}return this.nodeData[e].time},getSessionTime:function(){return((new Date).getTime()-this.startTime)/1e3},quit:function(){if(this.trackingInitalized)try{var e=t.doLMSFinish();this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"quit(doLMSFinish): ("+typeof e+") "+e),this.trackingInitalized=!1}catch(e){console.info("__Runtime.quit - error : ",e),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"quit - error :"+e,this.tracesLog.STYLE_ERROR_LOGS)}},getValue:function(e){var i;if(this.trackingInitalized)try{i=t.doLMSGetValue(e),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"GetValue("+e+") : ("+typeof i+") "+i)}catch(t){console.info("__Runtime.getValue - error : ",t),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"GetValue("+e+") Error: "+t,this.tracesLog.STYLE_ERROR_LOGS)}return i},setValue:function(e,i){if(this.trackingInitalized)try{var n=t.doLMSSetValue(e,i);this.isHACP()&&(tracking[e]=i),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"SetValue("+e+", "+i+") : ("+typeof n+") "+n)}catch(e){console.info("__Runtime.setValue - error : ",e),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.RUNTIME_CLASS_NAME,this.tracesLog.TRACKING_LOG,"Runtime.setValue - error :"+e,this.tracesLog.STYLE_ERROR_LOGS)}},commit:function(){if(this.trackingInitalized)try{var e=t.doLMSCommit();this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"Commit() : ("+typeof e+") "+e)}catch(e){console.info("__Runtime.commit - error : ",e),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"Commit()  - error : "+e,this.tracesLog.STYLE_ERROR_LOGS)}},navigationContinue:function(e){try{this.hasNavigationContinue()&&(this.setValue("adl.nav.request","continue"),e&&e.call())}catch(t){console.info("__Runtime.navigationContinue - error : ",t),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"navigationContinue()  - error : "+t,this.tracesLog.STYLE_ERROR_LOGS),e&&e.call()}},navigationPrevious:function(e){try{this.hasNavigationPrevious()&&(this.setValue("adl.nav.request","previous"),e&&e.call())}catch(t){console.info("__Runtime.navigationPrevious - error : ",t),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"navigationPrevious()  - error : "+t,this.tracesLog.STYLE_ERROR_LOGS),e&&e.call()}},navigationRequest:function(e,t){try{if(i.trackingAPIVersion===n.SCORM_2004){var o=JSON.parse(this.getValue("cmi.launch_data"));if(void 0===o.items[+e-1])console.info("navigationRequest > The selected sco("+ +e+") not in found in the sco list");else{var r=o.root+o.items[+e-1];this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"navigationRequest() GotoSco: ("+typeof r+") "+r),""!==r&&(this.setValue("adl.nav.request","{target="+r+"}choice"),t&&t.call())}}else console.info("navigationRequest > This option is not available in SCORM 1.2")}catch(i){console.info("__Runtime.navigationRequest - error : ",i),this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"navigationPrevious()  - error : "+typeof e+") "+e+i,this.tracesLog.STYLE_ERROR_LOGS),t&&t.call()}},hasNavigationContinue:function(){var e=i.trackingAPIVersion===n.SCORM_2004&&"true"===t.tracking["adl.nav.request_valid.continue"];return this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"hasNavigationContinue() : ("+typeof e+") "+e),e},hasNavigationPrevious:function(){var e=i.trackingAPIVersion===n.SCORM_2004&&"true"===t.tracking["adl.nav.request_valid.previous"];return this.tracesLog.saveHtmlGrekhilLogs(this.tracesLog.TRACKING_LOG,this.tracesLog.RUNTIME_CLASS_NAME,"hasNavigationPrevious() : ("+typeof e+") "+e),e},setSubtitles:function(e){this.showSubtitles=void 0===e?!this.showSubtitles:e,this.setValue("cmi.learner_preference.audio_captioning",this.showSubtitles?"1":"-1")},getSubtitles:function(){return this.showSubtitles},isHACP:function(){return this.bIsHACP},getSoundMute:function(){return this.soundMute},setSoundMute:function(e){this.soundMute=void 0===e?!this.soundMute:e},setSoundVolume:function(e){void 0===e&&(e=100),i.trackingAPIVersion===n.SCORM_12||""===i.trackingAPIVersion?0===e&&(e=-1):e=Math.round(e),this.soundVolume=e,this.setValue("cmi.student_preference.audio",String(e))},getSoundVolume:function(){var e=100;if(i.trackingAPIVersion===n.SCORM_12||""===i.trackingAPIVersion)switch(this.soundVolume){case-1:e=0;break;case 0:e=100;break;default:e=this.soundVolume}else e=this.soundVolume;return Math.min(100,Math.max(0,Number(e)))},setLang:function(e){
this.lang=e,this.setValue("cmi.learner_preference.language",this.lang)},getLang:function(){return this.lang},setVariable:function(e,t){this.variables[e]=Number(t)},getVariable:function(e){var t;return void 0!==this.variables[e]?t=this.variables[e]:(console.info("Variable non définie : "+e),t=0),t}});return a.MODEL_ID="MODEL_RUNTIME",a.NODE_STATUS_NONE="NODE_STATUS_NONE",a.NODE_STATUS_LOADING="NODE_STATUS_LOADING",a.NODE_STATUS_LOADED="NODE_STATUS_LOADED",a.SUSPEND_DATA_SEPARATOR="&=",a}),define("ekhil/controller/helper/NavigationHelper",["lib/Class","ekhil/model/Course","ekhil/model/Runtime","lib/Utils"],function(Class,Course,Runtime,Utils){return Class.extend({init:function(e){!0!==e&&(this.player=require("ekhil/EkhilPlayer").getInstance(),this.course=this.player.getModel(Course.MODEL_ID),this.runtime=this.player.getModel(Runtime.MODEL_ID))},haveActiveFeedBack:function(){var e=!1;return void 0!=this.runtime.currentFeedback&&(e=!this.course.getFeedbackAllowAction(this.course.getFeedbackId(this.runtime.getLessonLocation(),this.runtime.currentFeedback))),e},getNextNodeIndex:function(e,t,i,n){var o={nodeIndex:null,feedbackId:void 0},r=t.getNodeData(n);switch(e.getPageType(n)){case"eval":case"discover":if(i.haveActiveFeedBack()||(o.feedbackId=this.getNextFeedbackId(e,t,i,n,r)),void 0==o.feedbackId){var s=e.getMinTries(n);r.score<e.getMasteryScore(n)&&(s<0||s>=r.tries)?o.nodeIndex=n:(o.feedbackId=this.getNextFeedbackId(e,t,i,n,r),void 0!=o.feedbackId?o.nodeIndex=n:o.nodeIndex=e.getNextNodeIndex(n,r.score))}else o.nodeIndex=n;break;case"result":case"observe":o.nodeIndex=e.getNextNodeIndex(n,r.score)}return o},getNextFeedbackId:function(e,t,i,n,o){var r,s=e.getHelpFeedbacksList(n),a=e.getCorrecFeedbacksList(n);if(s.length>0||a.length>0){var l=o.score;if(l>=e.getMasteryScore(n))a.length>0&&"1"==e.getCorrecFeedbacks(n).getAttribute("if_good")&&(r=this.getCorrecFeedback(e,t,n,l,a));else{if(!i.haveActiveFeedBack()){var c=e.getHelpFeedbacks(n);if(c)switch(c.getAttribute("type")){case"tries":for(var h=s.length,u=0;u<h&&void 0==r;u++){var d=s[u].querySelector("screen").getAttribute("author_id"),g=e.getFeedbackIndex(n,d);0==o.fb[g]&&(r=d)}void 0==r&&"0"==c.getAttribute("nb")&&(r=d);break;case"score":var f=0;for(var u in o.fb)f+=o.fb[u];(0==c.getAttribute("nb")||f<+c.getAttribute("nb"))&&(r=this.getFeedbackByScore(l,s))}}void 0==r&&a.length>0&&"1"==e.getCorrecFeedbacks(n).getAttribute("if_bad")&&(r=this.getCorrecFeedback(e,t,n,l,a))}}return r},isCorrecFbkAccessible:function(e,t,i){var n=!1,o=e.getCorrecFeedbacks(i);if(o){var r=o.getAttribute("after");(0==r||1==r&&t.getNodeData(i).tries>1)&&(n=!0)}else console.warn("node index "+i+"doesn't contain correction feedback information");return n},getCorrecFeedback:function(e,t,i,n,o,r){var s;return(r||void 0==t.currentFeedback||"help"==e.getFeedbackType(e.getFeedbackId(i,t.currentFeedback)))&&(s=r||this.isCorrecFbkAccessible(e,t,i)?this.getFeedbackByScore(n,o):void 0),s},getFeedbackByScore:function(e,t){for(var i=t.length-1,n=t[i].querySelector("screen").getAttribute("author_id");i>0&&t[i-1].attributes.score.value>=e;)i--,n=t[i].querySelector("screen").getAttribute("author_id");return n},getMaxTriesRaised:function(e){var t=!1;if(null!=e&&void 0!=e){var i=this.course.getMaxTries(e);0!==i&&(-1===i&&(i=1),this.runtime.getNodeData(e).tries>i&&(t=!0))}return t},isValidated:function(e){var t=!0;if(this.course.isPage(e))t=this.getProgression(e)&&this.getScore(e)>=this.course.getMasteryScore(e);else if("score"==this.course.getMasteryType(e))t=this.getScore(e)>=this.course.getMasteryScore(e);else{var i=[];i=this.course.isResultPageType(e)?this.course.getResultTargetNodes(e):this.course.getChildrenList(e);for(var n=i.length,o=0;o<n&&t;o++)this.isValidated(i[o])||(t=!1)}return t},getTopParentIndex:function(e){var t=this.getParentIndex(e);return""!==t?this.getTopParentIndex(t):e},getChronoRemainingTime:function(e){var t=this.getTopParentIndex(e),i=this.getRemainingTime(t);return-1===i&&(i=this.getRemainingTime(e)),i},getRemainingTime:function(e){var t,i=this.getParentIndex(e);t=""===i?this._getNodeRemainingTime(""):this.getRemainingTime(i);var n=this._getNodeRemainingTime(e);return-1!==n&&(t=-1!==t?Math.min(t,n):n),t},_getNodeRemainingTime:function(e){var t,i;return""===e?(t=""==this.course.getMaxTime()?0:Utils.parseStringToSeconds(this.course.getMaxTime()),i=this.runtime.getSessionTime()):(t=Utils.parseStringToSeconds(this.course.getMaxTime(e)),i=this.getElapsedTime(e)),0===t?-1:t-i},getParentIndex:function(e){var t="";return e="number"==typeof e?e.toString():e,e?t=e.toString().split(".").slice(0,-1).join("."):console.warn("nodeIndex: "+e+" undefined setting an empty string"),t},_childrenFilter:function(e,t){for(var i=this.course.getPageObjectives(t),n=i.length,o=0;o<n;o++){if(i[o].id===e)return!0}return!1},_getScore:function(e,t){var i,n=0;if(this.course.isResultPageType(e)){i=this.course.getResultTargetNodes(e);var o=i.indexOf(e);-1!=o&&i.splice(o,1)}else i=this.course.getChildrenList(e,!0);if(t&&(i=i.filter(Utils.relegate(this,this._childrenFilter,t))),0===i.length)n=this.runtime.getNodeData(e)?+this.runtime.getNodeData(e).score:0;else{for(var r=this.course.isResultPageType(e)?"all":this.course.getScoreMode(e),s=i.length,a=0,l=0;l<s;l++)if("all"===r||this.isSeenNode(i[l])){var c=this.getScore(i[l]),h=+this.getNodeCoef(i[l]);n+=c*h,a+=h}n=0!==a?n/a:0}return n},isSeenNode:function(e){var t;if(this.course.isTheme(e))t=!(this.course.getChildrenList(e).length>0)||this.getNumberPageSeen(e)>0;else{var i=this.runtime.getNodeData(e);t=i&&i.tries>0}return t},getNodeCoef:function(e){var t=0;if(this.course.isTheme(e))if(this.course.hasArithmeticMeanCoef(e))for(var i=this.course.getScoreMode(e),n=this.course.getChildrenList(e,!0),o=n.length,r=0;r<o;r++)("all"===i||this.isSeenNode(n[r]))&&(t+=this.getNodeCoef(n[r],i));else t=+this.course._getTrackingValue(e,"coef");else t=+this.course._getTrackingValue(e,"coef");return t},_getNumberPageSeen:function(e){var t,i=0;if(t=this.course.getChildrenList(e),this.course.isTheme(e)){var n=t.length;if(n>0)for(var o=0;o<n;o++)this.isSeenNode(t[o])&&i++;else i++}else this.runtime.getNodeData(e)&&this.runtime.getNodeData(e).tries>0&&i++;return i},getNumberPageSeen:function(e){return this._getNumberPageSeen(e)},_getProgression:function(e,t){var i=0,n=this.course.getChildrenList(e,!0);if(t&&(n=n.filter(Utils.relegate(this,this._childrenFilter,t))),0===n.length){i=(this.runtime.getNodeData(e)?+this.runtime.getNodeData(e).tries:0)>0?100:0}else{for(var o=n.length,r=0,s=0;s<o;s++){var a=+this.course.getNavigationProgress(n[s]),l=this._getProgression(n[s],t);this.course.isTheme(n[s])&&!this.course.getAddProgress(n[s])&&(l=l>0?100:0),i+=l*a,r+=a}i=0!==r?i/r:0}return i},getElapsedTime:function(e){var t=0;if(this.course.isTheme(e))for(var i=this.course.getChildrenList(e,!0),n=i.length,o=0;o<n;o++)t+=this.getElapsedTime(i[o]);else{var r=this.runtime.getNodeData(e);r&&(t=isNaN(r.time)?0:+r.time)}return t},getScore:function(e){return this._getScore(e)},getObjectiveScore:function(e){return this._getScore(void 0,e)},getProgression:function(e){return this._getProgression(e)},getObjectiveProgression:function(e){return this._getProgression(void 0,e)},reinitNode:function(e,t){t=!0===t;var i=this.course.isTheme(e)&&this.course.isActivityNbRestricted(e),n=this.course.getChildrenList(e,!t,i),o=n.length;this.runtime.initNodeData(e,0,!0);for(var r=0;r<o;r++){var s=n[r],a=this.course.getEldarAuthorId(s,i);this.runtime.answers[a]&&delete this.runtime.answers[a],void 0!==this.runtime.getNodeData(s)&&this.runtime.initNodeData(s,this.course.getFeedbackCount(n[r]),!1,null,!0),!t&&this.course.isTheme(s)&&this.course.getReinit(s)&&this.reinitNode(s,t)}},solveCondition:function solveCondition(condition){var buffer;if(null===condition||""==condition)return!1;var conditionString=condition.replace(/\s/g,"");conditionString=conditionString.replace(/>=/g,"@@SUPEQUAL@@"),conditionString=conditionString.replace(/<=/g,"@@INFEQUAL@@"),conditionString=conditionString.replace(/=/g,"=="),conditionString=conditionString.replace(/<>/g,"!="),conditionString=conditionString.replace(/@@SUPEQUAL@@/g,">="),conditionString=conditionString.replace(/@@INFEQUAL@@/g,"<="),conditionString=conditionString.replace(/SCORE\(([0-9\.]+)\)/gi,Utils.relegate(this,this._getConditionScore)),conditionString=conditionString.replace(/ATTEMPTS\(([0-9\.]+)\)/gi,Utils.relegate(this,this._getConditionAttempts)),conditionString=conditionString.replace(/VAR\((\w+)\)/gi,Utils.relegate(this,this._getConditionVar));try{buffer=eval(conditionString)}catch(e){console.info("La condition contient une erreur : "+condition),buffer=!1}return buffer},_getConditionScore:function(e,t){if(void 0!==t)return this.getScore(t)},_getConditionAttempts:function(e,t){var i=0;if(void 0!==t){var n=this.runtime.getNodeData(t);i=n?+n.tries:0}return i},_getConditionVar:function(e,t){if(void 0!==t)return this.runtime.getVariable(t)}})}),define("ekhil/controller/ScreenObjectCreator",["lib/Class","lib/Utils"],function(e,t){return e.extend({screenObjects:{},equivalences:{maxtime_curtain:"MaxtimeCurtain",basket_button:"BasketButton",elfe:"Eldar",feedback:"Text",question:"Text",consigne:"Text"},init:function(e,i){void 0!=this.equivalences[e]&&(e=this.equivalences[e]),e="SO"+t.ucfirst(e),require(["ekhil/view/screenobject/"+e],t.relegate(this,this.onLoadedClass,i,e))},onLoadedClass:function(e,t,i){var n=new i;e.call(n,n)}})}),define("ekhil/controller/helper/ScreenobjectHelper",["lib/Class","lib/Utils","ekhil/model/Course","ekhil/model/Runtime","ekhil/controller/ScreenObjectCreator"],function(e,t,i,n,o){return e.extend({init:function(e,t,i,n){this.player=e,this.course=t,this.runtime=i,this.look=n},getScreenobjects:function(e,i){var n,o=[];if(null!=e)n=t.object2array(this.player.container.getPageScreen(e).screenobjects);else{n=t.object2array(this.player.container.screenobjects);for(var r=t.object2array(this.player.container.screens),s=r.length,a=0;a<s;a++)n=n.concat(t.object2array(r[a].screenobjects))}for(var l=n.length,a=0;a<l;a++)n[a].screenobject.type==i&&o.push(n[a]);return o},loadLookScreenObjects:function(e,i){var n=e.shift(),o=t.relegate(this,this.loadLookScreenObjects,e,i);if(n)if(n.objects){var r=this.player.container.getPageScreen(n.authorId,n.left,n.top,n.width,n.height);this.loadCourseScreenObjects(n.objects,r,o)}else{var s=this.player.container.getScreenobject(n.attributes.author_id.value);void 0==s?this.loadScreenObject(n,this.player.container,o):o.call()}else e.length>0?o.call():i.call()},loadCourseScreenObjects:function(e,i,n){var o=e.shift();void 0!==o?this.loadScreenObject(o,i,t.relegate(this,this.loadCourseScreenObjects,e,i,n)):n.call()},loadScreenObject:function(e,i,n){var o=i.getScreenobject(e.getAttribute("author_id")),r=void 0==e.querySelector("design").getAttribute("export")||"html5"==e.querySelector("design").getAttribute("export")||"all"==e.querySelector("design").getAttribute("export")&&"flash"!=e.nodeName||"both"==e.querySelector("design").getAttribute("export");void 0==o&&r?this.createScreenobject(e.nodeName,t.relegate(this,this.createScreenobjectCallback,e,i,n)):n.call()},createScreenobjectCallback:function(e,t,i,n){void 0!=n?(n.setXML(e),t.appendChild(e,n),"eldar"===n.type&&n.setScreenSize(t.container.width(),t.container.height()),n.load(i)):i.call()},createScreenobject:function(e,t){return new o(e,t)},isFeedBackScreenObject:function(e,t){var i=!1;if(void 0!=e&&this.course.isScreenExist(e)){var n=this.look.getLookScreenAuthorId(this.course.getScreenId(e),e);if(n.length>0&&(i=-1!=n.indexOf(t)),!i)for(var o=this.course._data.querySelectorAll('fb>screen[author_id="'+e+'"]>*'),r=0;r<o.length;r++)if(o[r].getAttribute("author_id")==t){i=!0;break}}return i},getAuthorZoneIndex:function(e){for(var t=0,i=e.length-1;0==t&&i>0;)void 0!==e[i].screen?t=i:i--;return t},getFeedbacklookScreenobjects:function(e,t){for(var i=this.getAuthorZoneIndex(e),n=!0,o=this.look.getLookScreenAuthorId(this.course.getScreenId(t),t),r=e.join("|"),s=o.length,a=s-1;a>=0;a--)void 0!=o[a].screen?(e.splice(i+1,0,o[a]),n=!1):-1==r.indexOf(o[a])&&(n&&!this.course.displayFeedbackInFeedbackPage(t)?e.push(o[a]):e.splice(i,0,o[a]));return e}})}),define("ekhil/controller/ACommand",["ekhil/model/Course","ekhil/model/Look","ekhil/model/Runtime","ekhil/controller/helper/NavigationHelper","ekhil/controller/helper/ScreenobjectHelper","lib/TracesLog"],function(e,t,i,n,o,r){return Class.extend({player:null,runtime:null,course:null,navigation:null,screenobjectHelper:null,look:null,tracesLog:null,init:function(e){this.player=e},getCourse:function(){return null==this.course&&(this.course=this.player.getModel(e.MODEL_ID)),this.course},getTracesLog:function(){return this.traceLog=r.getInstance(),this.traceLog},getLook:function(){return null==this.look&&(this.look=this.player.getModel(t.MODEL_ID)),this.look},getRuntime:function(){return null==this.runtime&&(this.runtime=this.player.getModel(i.MODEL_ID)),this.runtime},getNavigationHelper:function(){return null==this.navigation&&(this.navigation=new n),this.navigation},getScreenobjectHelper:function(){return null===this.screenobjectHelper&&(this.screenobjectHelper=new o(this.player,this.getCourse(),this.getRuntime(),this.getLook())),this.screenobjectHelper},execute:function(){console.warn("Must be overloaded")}})}),define("ekhil/controller/command/AnimationCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){for(var i in this.player.container.shownScreenobjects){var n=this.player.container.shownScreenobjects[i];this.animateObject(e,n,t)}},animateObject:function(e,t,i){try{if(void 0==e||""==e||t.data.hasAttribute("id")&&t.data.getAttribute("id")==e||t.data.hasAttribute("author_id")&&t.data.getAttribute("author_id")==e||t.data.querySelector("design").hasAttribute("caption")&&t.data.querySelector("design").getAttribute("caption")==e)switch(i){case"show":t.screenobject.show();break;case"hide":t.screenobject.hide();break;default:if(t.data.querySelector("design").hasAttribute("anim")){var n=t.data.querySelector("design").getAttribute("anim");"1"!==n&&"true"!=n||t.screenobject.animate()}}}catch(e){console.error(e.message)}}})}),define("ekhil/controller/command/EldarCommand",["ekhil/controller/ACommand","ekhil/controller/helper/ScreenobjectHelper"],function(e,t){return e.extend({execute:function(e,t){var i=this.getRuntime(),n=this.getCourse(),o=n.getPageScreenAuthorId(i.getLessonLocation()),r=this.getScreenobjectHelper(),s=r.getScreenobjects(o,"eldar")[0].screenobject.eldar;if(s){switch(e){case"eraseanswer":s.tellEraseAnswer();break;case"erasebadanswer":s.tellEraseBadAnswer();break;case"correctanswer":s.tellCorrectAnswer();break;case"studentanswer":s.tellStudentAnswer(i.answers[s.author_id]);break;case"showbadanswer":s.tellShowBadAnswer();break;case"showgoodanswer":s.tellShowGoodAnswer();break;case"showmissedanswer":s.tellShowMissedAnswer()}s.refresh(),t.call()}}})}),define("ekhil/controller/helper/TrackingHelper",["lib/Class","ekhil/model/Course","ekhil/model/Runtime"],function(e,t,i){return e.extend({init:function(e){if(!0!==e){var n=require("ekhil/EkhilPlayer").getInstance();this.course=n.getModel(t.MODEL_ID),this.runtime=n.getModel(i.MODEL_ID)}},getExitMode:function(){var e=this.course.getExitMode(),t=this.runtime.getLessonStatus();return this.evaluateExitMode(e,t)},evaluateExitMode:function(e,t){var i="";switch(e){case"suspend":i="suspend";break;case"completed":i="completed"==t?"":"suspend"}return i}})}),define("ekhil/controller/command/EvalPageCommand",["ekhil/controller/ACommand","ekhil/controller/helper/TrackingHelper","lib/Utils","lib/Config","lib/constants/TrackingAPIVersion"],function(e,t,i,n,o){return e.extend({execute:function(e){var r,s=this.getNavigationHelper(),a=new t,l=this.getRuntime(),c=this.getCourse(),h=l.getLessonLocation(),u=l.getNodeData(h);if(!this.navigation.getMaxTriesRaised(h)&&u)switch(c.getPageType(h)){case"eval":case"discover":var d=c.getPageScreenAuthorId(h),g=this.getScreenobjectHelper(),f=g.getScreenobjects(d,"eldar");if(null!==f&&f.length>0&&(r=f[0].screenobject.eldar),r&&!r.isCorrected&&!s.haveActiveFeedBack()){if(u.score=r.getScore(),u.fb&&u.tries>1){for(var p=u.fb.length,m=1,A=0;A<p;A++)if(u.fb[A]>0){var v=c.getFeedbackId(h,A);m*=Number(c.getFeedbackCoef(v))}u.score=Math.round(Number(r.getScore())*Number(m)),u.score=Math.max(u.score,0),u.score=Math.min(u.score,100)}c.isBinaryScoreMode(h)&&(u.score<c.getMasteryScore(h)?u.score=0:u.score=100);try{l.answers[r.author_id]=r.getAnswer()}catch(e){console.info(e)}}break;case"observe":u.score=100;break;case"result":u.score=this.navigation.getScore(h)}l.setValue("cmi.core.session_time",i.seconds2HMSString(l.getSessionTime())),l.setValue("cmi.suspend_data",encodeURIComponent(l.getSuspendData())),(this.player.bIsELW||c.getTrackLessonLocation(h))&&l.setValue("cmi.core.lesson_location",h);var b=s.getProgression();100==b&&l.setLessonStatus("completed"),l.setValue("cmi.core.lesson_status",l.getLessonStatus());var y=b/100;if(y=Math.min(1,Math.max(0,y)),l.setValue("cmi.progress_measure",y.toString().substr(0,8)),l.setValue("cmi.core.exit",a.getExitMode()),c.getTrackScore(h)){var S=s.getScore();l.setValue("cmi.core.score.raw",S);var w=S,x=parseFloat(l.getValue("cmi.core.score.min"));x=isNaN(x)?0:x;var C=parseFloat(l.getValue("cmi.core.score.max"));C=isNaN(C)?100:C,C-x!=0&&(w=(w-x)/(C-x)),l.setValue("cmi.score.scaled",w)}if(void 0!=r&&!r.isCorrected&&c.getTrackInteraction(h)){null==u.interactionNumber&&(u.interactionNumber=l.interactionCounter,l.interactionCounter++);var k=r.getInteraction();l.setValue("cmi.interactions."+u.interactionNumber+".id",c.getNodeInteractionId(h)),l.setValue("cmi.interactions."+u.interactionNumber+".description",c.getNodeQuestion(h)),l.setValue("cmi.interactions."+u.interactionNumber+".type",k.type),l.setValue("cmi.interactions."+u.interactionNumber+".result",u.score),l.setValue("cmi.interactions."+u.interactionNumber+".weighting",c.getCoef(h)),l.setValue("cmi.interactions."+u.interactionNumber+".latency",i.seconds2HMSString(l.getPageTime(h))),n.trackingAPIVersion==o.SCORM_2004?l.setValue("cmi.interactions."+u.interactionNumber+".learner_response",k.student_response):l.setValue("cmi.interactions."+u.interactionNumber+".student_response",k.student_response);for(var _=k.correct_responses.length,T=0;T<_;T++)l.setValue("cmi.interactions."+u.interactionNumber+".correct_responses."+T+".pattern",k.correct_responses[T].pattern);l.setValue("cmi.interactions."+u.interactionNumber+".correct_response_text",k.correct_response_text),l.setValue("cmi.interactions."+u.interactionNumber+".student_response_text",k.student_response_text)}for(var R=c.getPageObjectives(h),E=R.length,T=0;T<E;T++){var N=R[T],L=l.getObjectivePosition(N.id);if(!isNaN(L)&&-1!=L){var I=s.getObjectiveScore(N.id),U=s.getObjectiveProgression(N.id);l.setValue("cmi.objectives."+L+".id",N.id),l.setValue("cmi.objectives."+L+".score.raw",I),l.setValue("cmi.objectives."+L+".completion_status",100==U?"completed":"incomplete"),l.setValue("cmi.objectives."+L+".progress_measure",U/100),l.setValue("cmi.objectives."+L+".description",N.description)}}l.commit(),e.call()}})}),define("ekhil/controller/command/ExecuteCommand",["ekhil/controller/ACommand","lib/Config","lib/constants/TrackingAPIVersion"],function(e,t,i){return e.extend({execute:function(e,n){var o=this.getCourse(),r=this.getRuntime();switch(e){case"validatepage":case"gonextpage":this.player.runCommand("GoNextPage");break;case"gotopage":this.player.runCommand("EvalPage",this.player.runCommand.bind(this.player,"GoToPage",n));break;case"gobackpage":this.player.runCommand("GoBackPage");break;case"animation":this.player.runCommand("Animation",n);break;case"hide_so":this.player.runCommand("Animation",n,"hide");break;case"show_so":this.player.runCommand("Animation",n,"show");break;case"quit":this.player.runCommand("Quit",n);break;case"sound_mute":this.player.runCommand("SoundAction","mute",n),this.player.runCommand("Graza","mute");break;case"sound_mute_on":this.player.runCommand("SoundAction","mute_on",n),this.player.runCommand("Graza","mute_on");break;case"sound_mute_off":this.player.runCommand("SoundAction","mute_off",n),this.player.runCommand("Graza","mute_off");break;case"set_volume_up":this.player.runCommand("SoundAction","volume_up",n),this.player.runCommand("Graza","set_volume_up",10);break;case"set_volume_down":this.player.runCommand("SoundAction","volume_down",n),this.player.runCommand("Graza","set_volume_down",10);break;case"media":this.player.runCommand("SoundAction",n.actionPlayer,n.author_id);break;case"fullscreen_on":var s=document.body;s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.webkitRequestFullScreen&&s.webkitRequestFullScreen();break;case"fullscreen_off":document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();break;case"printpage":top.focus(),top.print();break;case"open":var a=this.getLULaunchURL(window.location.href)+this.player.getMediaPath(n);window.open(a);break;case"open_url":window.open(n);break;case"choosesco":t.trackingAPIVersion==i.SCORM_2004?r.navigationRequest(n,this.player.runCommand.bind(this.player,"Quit")):console.info("ExecuteCommand > This action is only available in the standard SCORM 2004");break;case"continuesco":t.trackingAPIVersion==i.SCORM_2004?r.navigationContinue(this.player.runCommand.bind(this.player,"Quit")):console.info("ExecuteCommand > This action is only available in the standard SCORM 2004");break;case"previoussco":t.trackingAPIVersion==i.SCORM_2004?r.navigationPrevious(this.player.runCommand.bind(this.player,"Quit")):console.info("ExecuteCommand > This action is only available in the standard SCORM 2004");break;case"send_event":this.player.runCommand("SendEvent",n);break;case"gotoscreen":this.player.runCommand("PageScreen",n);break;case"backfromlinkedcourse":case"gobackscreen":this.player.runCommand("PageScreen","",!0);break;case"gotoscreennoeval":this.player.runCommand("GoToScreen",n);break;case"backfromscreennoeval":this.player.runCommand("GoToScreen","",!0);break;case"setsubtitles":r.setSubtitles(!r.getSubtitles()),this.player.runCommand("Subtitles",r.getSubtitles()),this.player.runCommand("Graza","setsubtitles",r.getSubtitles());break;case"show_subtitles":case"setsubtitles_on":r.setSubtitles(!0),this.player.runCommand("Subtitles",!0),this.player.runCommand("Graza",e,!0);break;case"hide_subtitles":case"setsubtitles_off":r.setSubtitles(!1),this.player.runCommand("Subtitles",!1),this.player.runCommand("Graza",e,!1);break;case"eraseanswer":case"erasebadanswer":case"correctanswer":case"studentanswer":case"showbadanswer":case"showgoodanswer":case"showmissedanswer":this.player.runCommand("Eldar",e,this.player.runCommand.bind(this.player,"RefreshButtonState"));break;case"elag_play":case"elag_pause":case"elag_stop":case"elag_goback":case"elag_gonext":case"elag_gotoscene":case"elag_gototime":case"elag_gototimeandplay":case"elag_gototimeandstop":case"elag_gotosceneandplay":case"elag_gotosceneandstop":case"elag_changeNode":this.player.runCommand("Graza",e,n);break;case"hide_question":var l=o.getPageScreenAuthorId(r.getLessonLocation()),c=this.player.container.getPageScreen(l),h=o.getQuestionAuthorId(r.getLessonLocation());c.getScreenobject(h).screenobject.hide();break;case"lang":this.player.runCommand("LoadLang",n,this.player.runCommand.bind(this.player,"GoToPage",r.getLessonLocation()));break;case"variable_decrease":case"variable_increase":case"variable_set":this.player.runCommand("Variable",e,n);break;case"gotosummary":case"blink_button":case"blink_button_action":case"showhelp":case"showcorrec":console.info("Action not implemented : "+e);default:console.info("Action doesn't exist : "+e)}this.player.runCommand("RefreshButtonState")},getLULaunchURL:function(e){var t=e.indexOf("?");return t>0&&(e=e.slice(0,t-1)),e=e.split("/"),e.pop(),e.join("/")+"/"}})}),define("ekhil/controller/command/GoBackPageCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(){this.player.runCommand("EvalPage",this.onEvalPageEvent.bind(this))},onEvalPageEvent:function(){var e=this.getRuntime();if(this.getNavigationHelper().haveActiveFeedBack())this.player.runCommand("GoToPage",e.getLessonLocation());else{var t=e.getPreviousIndex(e.historyIndex,!0);""!=t&&this.player.runCommand("GoToPage",t)}}})}),define("ekhil/controller/command/GoNextPageCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(){this.player.runCommand("EvalPage",this.onEvalPageEvent.bind(this))},onEvalPageEvent:function(){var e=this.getCourse(),t=this.getRuntime(),i=this.getNavigationHelper(),n=!1,o=t.getLessonLocation(),r=i.getNextNodeIndex(e,t,i,o),s=!1;if(void 0==r.feedbackId){var a=[];if(a=i.haveActiveFeedBack()&&e.isClicAndGoActivity(o)&&void 0!=r.nodeIndex&&o!=r.nodeIndex?e.getClicAndGoConditions(o):e.getNodeConditionLinks(o),a.length>0)for(var l=a.length,c=0;!n&&c<l;){var h=a[c];i.solveCondition(h.condition)&&(n=!0,"gonextpage"==h.action?s=!0:this.player.runCommand("Execute",h.action,h.param)),c++}}n&&!s||(void 0!==r.nodeIndex?this.player.runCommand("GoToPage",r.nodeIndex,r.feedbackId):t.hasNavigationContinue()&&t.navigationContinue(this.player.runCommand.bind(this.player,"Quit")))}})}),define("ekhil/controller/command/GoToPageCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getCourse(),n=this.getRuntime(),o=this.getTracesLog(),r=i.getFirstNodePage(e);i.isTheme(e)&&(i.getReinit(e)||i.getReinitCourse())&&this.getNavigationHelper().reinitNode(e,!1),n.addHistoryIndex(e,n.isGoingBack,i.getHistoryMode()),o.saveHtmlGrekhilLogs("GoToPageCommand.js",o.NAVIGATIONS_LOG,"GotoPage: "+(r!=e?e+".1":r)),r!=e?this.player.runCommand("LoadPage",e,this.execute.bind(this,e+".1",t)):setTimeout(function(){this.player.runCommand("LoadPage",r,this.player.runCommand.bind(this.player,"ShowPage",r,t))}.bind(this))}})}),define("ekhil/controller/command/GoToScreenCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getRuntime();if(t)i.setNoEvalPage(!1),this.player.runCommand("ShowPage",i.getLessonLocation(),void 0,null,!0);else{var n=this.getCourse(),o=n.getPage(e)?e:n.getPageIndexByPageName(e);i.setNoEvalPage(!0),this.player.runCommand("LoadPage",o,this.player.runCommand.bind(this.player,"ShowPage",o,void 0,null,!0))}}})}),define("ekhil/controller/command/GrazaCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i,n=require("ekhil/EkhilPlayer").getInstance(),o=n.container.shownScreenobjects.filter(this.grazaFilter.bind(this));i=void 0==t||0==t||1==t||-1==String(t).indexOf("|")?"all":t.split("|")[0],o=o.filter(this.targetAnimationFilter.bind(this,i)),o.forEach(this.runCommand.bind(this,e,t))},runCommand:function(e,t,i){switch(i=i.screenobject.graza,e){case"elag_play":i.runCommand("ExecuteAction","play");break;case"elag_pause":i.runCommand("ExecuteAction","pause");break;case"elag_stop":i.runCommand("ExecuteAction","stop");break;case"elag_goback":i.runCommand("ExecuteAction","previous");break;case"elag_gonext":i.runCommand("ExecuteAction","next");break;case"elag_gotoscene":var n=t.split("|")[1];i.runCommand("ExecuteAction","goto",n);break;case"elag_gotosceneandplay":var n=t.split("|")[1];i.runCommand("ExecuteAction","pageandplay",n);break;case"elag_gotosceneandstop":var n=t.split("|")[1];i.runCommand("ExecuteAction","pageandstop",n);break;case"elag_gototime":var o=t.split("|")[1];i.runCommand("ExecuteAction","gototime",o);break;case"elag_gototimeandplay":var o=t.split("|")[1];i.runCommand("ExecuteAction","gototimeandplay",o);break;case"elag_gototimeandstop":var o=t.split("|")[1];i.runCommand("ExecuteAction","gototimeandstop",o);break;case"elag_changeNode":i.runCommand("ExecuteAction",e,!1);break;case"setsubtitles":i.runCommand("ExecuteAction",e,t);break;case"show_subtitles":case"setsubtitles_on":i.runCommand("ExecuteAction",e,!0);break;case"hide_subtitles":case"setsubtitles_off":i.runCommand("ExecuteAction",e,!1);break;case"sound_mute":case"mute":case"mute_on":case"mute_off":case"set_volume_up":case"set_volume_down":i.runCommand("ExecuteAction",e,t)}},grazaFilter:function(e){return"graza"==e.screenobject.type},targetAnimationFilter:function(e,t){var i=!1;if(t&&t.screenobject){var n="#"==e.substr(0,1);i="all"===e||!n&&e===t.screenobject.movieCaption||n&&e===t.screenobject.author_id}return i}})}),define("ekhil/model/EventList",[],function(){return{PLAYER_LOADED:"PLAYER_LOADED",MODEL_LOADED:"MODEL_LOADED",COURSE_LOADED:"COURSE_LOADED",LOOK_LOADED:"LOOK_LOADED",PAGE_LOADED:"PAGE_LOADED"}}),define("ekhil/view/PageScreen",["lib/Class"],function(e){return e.extend({init:function(e,t,i,n){this.container=$("<div/>"),this.screenobjects=[],this.container.css({left:e+"px",top:t+"px",width:i+"px",height:n+"px",display:"block",position:"absolute",pointerEvents:"none"})},appendChild:function(e,t){this.screenobjects[e.attributes.author_id.value]={data:e,screenobject:t},this.container.append(t.div)},getScreenobject:function(e){return this.screenobjects[e]},hide:function(e){for(var t in this.screenobjects)this.screenobjects[t].screenobject.hide(e);this.container.hide()}})}),define("ekhil/view/Container",["lib/Class","ekhil/view/PageScreen","ekhil/model/Look","lib/Utils","lib/constants/ScaleMode"],function(e,t,i,n,o){return e.extend({scale:1,width:0,height:0,scaleMode:o.MAGIC,init:function(e,t,i){this.player=e,this.scaleMode=i,this.parentWindow=n.getParentWindow(),this.screenobjects={},this.shownScreenobjects=[],this.screens={},this.container=$("#container"),this.lookParameters=t,this.container.css({width:this.lookParameters.width+"px",height:this.lookParameters.height+"px",position:"relative",overflow:"hidden"}),this.setScreenStyle(),this.orientation=this.lookParameters.orientation,this.parentWindow.on("resize",this.resizeScreen.bind(this)),this.resizeScreen()},destroy:function(){this.container.empty()},setScreenStyle:function(){var e={"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0",transformOrigin:"0 0",backgroundColor:this.lookParameters.bgcolor,overflow:"hidden"};""!=this.lookParameters.bgimage&&(e.backgroundImage="url("+this.player.getMediaPath(this.lookParameters.bgimage)+")",e.backgroundRepeat=n.getStyleOfBgRepeatValue(this.lookParameters.bgrepeat),e.backgroundPosition=n.getStyleOfBgPositionValue(this.lookParameters.bgposition),"STRECHED_NONE"!=this.lookParameters.bgstreched&&(e.backgroundSize="auto")),$("body#grekhil-player").css(e)},getScreenOrientation:function(){return+top.innerWidth>+top.innerHeight?i.LANDSCAPE:i.PORTRAIT},resizeScreen:function(){this.container.hide();var e=1;if(this.scaleMode==o.EXACT_FIT||this.scaleMode==o.MAGIC){var t=$(window).width()/this.lookParameters.width,i=$(window).height()/this.lookParameters.height;e=Math.min(t,i),this.scaleMode==o.MAGIC&&e>1&&(e=1)}this.setScale(e);var n=this.getScale(),r=($(window).width()/n-this.lookParameters.width)/2,s=($(window).height()/n-this.lookParameters.height)/2;this.container.css({left:r+"px",top:s+"px"}),this.container.show(),$(this.player).trigger("resize")},addInputListeners:function(e){$(e).on("focus",this.disableResizeContainer.bind(this)),$(e).on("blur touchcancel",this.enableResizeContainer.bind(this))},enableResizeContainer:function(){this.parentWindow&&this.parentWindow.on("resize",this.resizeScreen.bind(this)),this.resizeScreen()},disableResizeContainer:function(){this.parentWindow&&this.parentWindow.off("resize")},appendChild:function(e,t){this.screenobjects[e.attributes.author_id.value]={data:e,screenobject:t},this.container.append(t.div)},getScreenobject:function(e){return this.screenobjects[e]},getPageScreen:function(e,i,n,o,r){var s=this.screens[e];return void 0==s&&(s=this.screens[e]=new t(i,n,o,r),this.container.append(s.container)),s},
hideAll:function(e){for(var t in this.shownScreenobjects)this.shownScreenobjects[t].screenobject.hide(e);this.shownScreenobjects=[];for(var t in this.screens)this.screens[t].hide(e)},setScale:function(e){this.scale=e,n.setScale(this.scale)},getScale:n.getScale.bind(n)})}),define("ekhil/controller/command/LoadLangCommand",["ekhil/controller/ACommand","lib/Utils","ekhil/model/Course","ekhil/model/Look","ekhil/model/EventList","ekhil/view/Container"],function(e,t,i,n,o,r){return e.extend({execute:function(e,i){var n=this.player,o=this.getRuntime();t.loadXMLFile(n.langFile,function(r){var s=this.getCoursePath(n,e,r);t.loadXMLFile(s,function(r){o.setLang(e);var s=this.createCourse(n,r),a=this.getLookPath(n,s);t.loadXMLFile(a,function(e){var t=this.createLook(n,e);o.loadedNodes={},this.initializeView(n,t),i&&i()}.bind(this))}.bind(this))}.bind(this))},getCoursePath:function(e,t,i){var n=e.documentFolder;return i.querySelector&&i.querySelectorAll("langs>lang").length>0&&(""!==t&&null!==i.querySelector("lang[id="+t+"]")||(t=i.querySelector("langs").getAttribute("current")),n+=t+"/"),e.setCourseFolder(n),e.courseFolder+e.courseFile},createCourse:function(e,t){var n=new i;return n.setData(t),e.addModel(n,i.MODEL_ID),$(e).trigger(o.COURSE_LOADED),n},getLookPath:function(e,t){var i=e.sharedFolder+t.getLookName()+"/";return e.setLookFolder(i),e.lookFolder+e.lookFile},createLook:function(e,t){var i=new n;return e.addModel(i,n.MODEL_ID),i.setData(t),$(e).trigger(o.LOOK_LOADED),i},initializeView:function(e,t){e.container&&e.container.destroy();var i=e.scaleMode;"LOOK"==i&&(i=t.getScaleMode()),$(".loader").show(),e.container=new r(e,t.getLookParameters(),i)}})}),define("ekhil/controller/command/LoadPageCommand",["ekhil/controller/ACommand","ekhil/model/Runtime","ekhil/model/EventList"],function(e,t,i){return e.extend({isRandomOnPage:!1,execute:function(e,n){var o=this.getRuntime(),r=this.getCourse(),s=this.getTracesLog();if(s.saveHtmlGrekhilLogs("LoadPageCommand.js",s.NAVIGATIONS_LOG,"LoadPage: nodeIndex: "+e+", isThme :"+r.isTheme(e)+", pageType: "+r.getPageType(e)),o.getNodeStatus(e)==t.NODE_STATUS_LOADED)this.onPageLoadedEvent(e,n);else if(o.getNodeStatus(e)==t.NODE_STATUS_LOADING)$(this.player).one(i.PAGE_LOADED,function(t,i){i.index==e&&n.call()});else{var a=this.getLook();if(r.isTheme(e)){this.isRandomOnPage=r.isRandomOnPage(e),this.isRandomOnPage&&(r.randomizeTheme(e,!0),this.setStatusNodePage(e,r,o)),o.initNodeData(e,0,!0,r.getThemeRandomOrder(e));var l=r.getFirstNodePage(e);r.isTheme(l)&&this.execute(l,n)}if(void 0!=r.getPageType(e)){for(var c=r.getParentThemeNodeIndex(e);void 0!=c;)c&&!o.getNodeData(c)&&o.initNodeData(c,0,!0,r.getThemeRandomOrder(c)),c=r.getParentThemeNodeIndex(c);o.setNodeStatus(e,t.NODE_STATUS_LOADING);var h=r.getScreens(e),u=a.getLookScreenObjects(h);this.getScreenobjectHelper().loadLookScreenObjects(u,this.onPageLoadedEvent.bind(this,e,n))}else this.onPageLoadedEvent(e,n)}},onPageLoadedEvent:function(e,n){this.isRandomOnPage?this.player.getModel(t.MODEL_ID).setNodeStatus(e,t.NODE_STATUS_NONE):this.getRuntime().setNodeStatus(e,t.NODE_STATUS_LOADED),$(this.player).trigger(i.PAGE_LOADED,[{index:e}]),n&&n.call()},setStatusNodePage:function(e,i,n){for(var o=i.getChildrenList(e),r=o.length,s=0;s<r;s++)n.setNodeStatus(o[s],t.NODE_STATUS_NONE)}})}),define("ekhil/controller/command/LoadScreenCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getLook(),n=this.getScreenobjectHelper(),o=i.getLookPageScreenObjects(e);n.loadLookScreenObjects(o,t)}})}),define("ekhil/controller/command/LoadTrackingCommand",["ekhil/controller/ACommand","ekhil/model/Runtime"],function(e,t){return e.extend({execute:function(){this.runtime=new t,this.player.addModel(this.runtime,t.MODEL_ID),this.runtime.load(this.onTrackingLoadedEvent.bind(this))},onTrackingLoadedEvent:function(){var e=this.getRuntime();this.player.runCommand("LoadLang",e.getLang(),this.onLangLoadedEvent.bind(this))},onLangLoadedEvent:function(){for(var e=this.getRuntime(),t=this.getCourse(),i=this.course.getRandomOnPageThemes(),n=i.length,o=0;o<n;o++){var r=this.runtime.getNodeData(i[o]),s=null;null!=r&&(s=r.randomOrder,this.course.randomizeTheme(i[o],!0,s))}for(var a=this.course.getRandomOnStartThemes(),l=a.length,o=0;o<l;o++){var r=this.runtime.getNodeData(a[o]),s=null;null!=r&&(s=r.randomOrder),this.course.randomizeTheme(a[o],!1,s)}for(var c=this.course.getRestrictedThemesNoRandom(),o=0;o<c.length;o++)t.restrictActivityNb(c[o]);if(t.getReinitCourse()){this.getNavigationHelper().reinitNode(void 0,!0),e.lesson_location="1"}this.runtime.trackingInitalized&&$(window).one("beforeunload unload",this.player.runCommand.bind(this.player,"Quit")),this.player.runCommand("GoToPage",e.getLessonLocation())}})}),define("ekhil/controller/command/PageScreenCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getRuntime(),n=this.getCourse(),o=this.getNavigationHelper();this.player.runCommand("EvalPage",this.onEvalPageEvent.bind(this,e,t,i,n,o))},onEvalPageEvent:function(e,t,i,n,o){if(t){var r=o.haveActiveFeedBack()?n.getFeedbackId(i.getLessonLocation(),i.currentFeedback):void 0;this.player.runCommand("ShowPage",i.getLessonLocation(),r,null,!0)}else this.player.runCommand("LoadScreen",e,this.player.runCommand.bind(this.player,"ShowPage",null,null,e))}})}),define("ekhil/controller/command/PreloadPagesCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e){var t=e.shift();void 0!==t&&this.player.runCommand("LoadPage",t,this.execute.bind(this,e))}})}),define("ekhil/controller/command/QuitCommand",["ekhil/controller/ACommand","ekhil/controller/helper/TrackingHelper"],function(e,t){var i=e.extend({execute:function(){this.player.runCommand("EvalPage",this.onPageEval.bind(this))},onPageEval:function(){var e=this.getRuntime(),i=new t;i?e.setValue("cmi.core.exit",i.getExitMode()):console.error("trackingHelper null or undefined"),e.quit(),this.exitWindow(2)},exitWindow:function(e){var t="<br/>";if(10==e?(t+="Vous pouvez maintenant fermer la fen&ecirc;tre<br/>",t+="Now you can close the window<br/>",t+="Usted puede ahora cerrar la ventana<br/>",$("#container").html(t),$("#container").css({background:"none",textAlign:"center"})):(t+="Veuillez patienter<br/>",t+="Please wait<br/>",t+="Por favor espere<br/>",t+='<img src="'+i.LOADER+'" />',$("#container").html(t),$("#container").css("background","none"),$("#container").css({background:"none",textAlign:"center"}),setTimeout(this.exitWindow.bind(this,e+1),300)),"html5"==this.player.exportType)window!=window.parent&&null!=window.parent&&void 0!=window.parent||window.close();else{var n=window.parent;n!=n.parent&&null!=n.parent&&void 0!=n.parent||n.close()}}});return i.LOADER="data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPj4+Dg4OISEhAYGBiYmJtbW1qioqBYWFnZ2dmZmZuTk5JiYmMbG\t\t\t\txkhISFZWVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05F\t\t\t\tVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAA\t\t\t\tEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla\t\t\t\t+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAkKAAAALAAAAAAQABAAAAVoICCKR9KM\t\t\t\taCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr\t\t\t\t6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkECQoAAAAsAAAAABAA\t\t\t\tEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoL\t\t\t\tLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkECQoAAAAsAAAA\t\t\t\tABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7\t\t\t\tbaJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAkKAAAALAAAAAAQABAAAAVgICCO\t\t\t\tZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYA\t\t\t\tqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAkKAAAALAAAAAAQABAAAAVf\t\t\t\tICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0Ua\t\t\t\tFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==",i}),define("ekhil/controller/command/RefreshButtonStateCommand",["ekhil/controller/ACommand","lib/Config","lib/constants/TrackingAPIVersion","lib/Utils"],function(e,t,i,n){return e.extend({execute:function(e){var t=this.getNavigationHelper(),i=this.getRuntime(),n=this.getCourse(),o=[];this.pushButtons(o,this.player.container.shownScreenobjects),this.pushButtons(o,this.player.container.getPageScreen(n.getPageScreenAuthorId(i.getLessonLocation())).screenobjects);for(var r=o.length,s=0;s<r;s++)o[s].screenobject.enable(this.getButtonState(o[s].screenobject.actions,o[s].screenobject.condition,t,i,n));e&&e.call()},pushButtons:function(e,t){for(var i in t)"button"==t[i].data.nodeName&&e.push(t[i])},getButtonState:function(e,o,r,s,a){var l=this.getTracesLog(),c=!0,h=s.getLessonLocation();if(null===o||r.solveCondition(o))for(var u in e)switch(e[u].action){case"gotopage":null==a.getPage(e[u].param)&&null==a.getTheme(e[u].param)&&(l.saveHtmlGrekhilLogs("RefreshButtonStateCommand",l.BUTTON_LOG,"The parameter of action gotopage is not defined",l.STYLE_ERROR_LOGS),c=!1);break;case"gobackpage":if(s.hasPreviousIndex()||r.haveActiveFeedBack())if(r.haveActiveFeedBack()){var d=a.getFeedbackId(h,s.currentFeedback);c="1"!=a.getFeedbackNavigationDisableBack(d)}else c="1"!=a.getNavigationValue(h,"disable_back");else c=!1;break;case"gonextpage":var g=r.getNextNodeIndex(a,s,r,h);if(void 0==g.nodeIndex&&!s.hasNavigationContinue()&&void 0==g.feedbackId)return!1;if(r.haveActiveFeedBack()){var d=a.getFeedbackId(h,s.currentFeedback);c="1"!=a.getFeedbackNavigationDisableNext(d)}else c="1"!=a.getNavigationValue(h,"disable_next");if(r.haveActiveFeedBack()){var d=a.getFeedbackId(h,s.currentFeedback);c=!(void 0===g&&!s.hasNavigationContinue()&&void 0==g.feedbackId||"1"==a.getFeedbackNavigationDisableNext(d))}else c=!(void 0===g&&!s.hasNavigationContinue()&&void 0==g.feedbackId||"1"==a.getNavigationValue(h,"disable_next"));break;case"validatepage":if(r.haveActiveFeedBack()){var d=a.getFeedbackId(h,s.currentFeedback);c=c&&!("correc"==a.getFeedbackType(d)||!a.getFeedbackAllowAction(d))}break;case"previoussco":c=t.trackingAPIVersion==i.SCORM_2004&&s.hasNavigationPrevious();break;case"choosesco":c=t.trackingAPIVersion==i.SCORM_2004;break;case"continuesco":c=t.trackingAPIVersion==i.SCORM_2004&&s.hasNavigationContinue();break;case"eraseanswer":case"erasebadanswer":var f=a.getPageType(h);c=c&&("eval"==f||"discover"==f)&&!r.haveActiveFeedBack();break;case"studentanswer":var p=this.getEldar();c=void 0!=p&&p.isCorrected;break;case"correctanswer":var p=this.getEldar();c=void 0!=p&&!p.isCorrected;break;case"sound_mute":c=!n.IOS;break;case"sound_mute_on":c=!s.getSoundMute()&&!n.IOS;break;case"sound_mute_off":c=s.getSoundMute()&&!n.IOS;break;case"set_volume_up":c=s.getSoundVolume()<100&&!n.IOS;break;case"set_volume_down":c=s.getSoundVolume()>0&&!s.getSoundMute()&&!n.IOS;break;case"backfromscreennoeval":c=s.getNoEvalPage();break;case"setsubtitles_on":c=!s.getSubtitles();break;case"setsubtitles_off":c=s.getSubtitles();break;case"gobackscreen":break;case"elag_play":case"elag_pause":case"elag_stop":c=this.getButtonStateActionsAnimationElag(e[u].action);break;case"lang":var m=s.getLang(),A=e[u].param;""===A||n.isEmpty(A)?(l.saveHtmlGrekhilLogs("RefreshButtonStateCommand",l.BUTTON_LOG,"The parameter of action change lang is not defined",l.STYLE_ERROR_LOGS),c=!1):c=m!=A;break;case"open":case"open_url":(""===e[u].param||n.isEmpty(e[u].param))&&(l.saveHtmlGrekhilLogs("RefreshButtonStateCommand",l.BUTTON_LOG,"The parameter of action open ressource is not defined",l.STYLE_ERROR_LOGS),c=!1)}else c=!1;return c},getButtonStateActionsAnimationElag:function(e){var t=!1,i=this.player.container.shownScreenobjects.filter(this.grazaFilter.bind(this));if(i&&i[0]&&i[0].screenobject&&i[0].screenobject.graza){var n=i[0].screenobject.graza,o=n.getModel("MODEL_RUNTIME");switch(e){case"elag_play":t=n&&!o.isPlaying;break;case"elag_pause":t=n&&o.isPlaying;break;case"elag_stop":t=n&&-1!==o.currentScene}}return t},grazaFilter:function(e){return"graza"==e.screenobject.type},getEldar:function(){for(var e in this.player.container.shownScreenobjects)if(this.player.container.shownScreenobjects&&"eldar"===this.player.container.shownScreenobjects[e].screenobject.type)return this.player.container.shownScreenobjects[e].screenobject.eldar}})}),define("ekhil/controller/command/SendEventCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e){var t=this.getRuntime(),i=this.getCourse(),n=t.getLessonLocation(),o=this.getEventAndTarget(e),r=o.eventToSend,s=o.eventTarget;if(void 0!==t.currentFeedback&&i.displayFeedbackInFeedbackPage(t.currentFeedback))try{var a=this.player.container.getPageScreen(i.getFeedbackId(n,t.currentFeedback));for(var l in a.screenobjects)a.screenobjects[l]&&("all"===s||s===a.screenobjects[l].id||a.screenobjects[l].design&&s===a.screenobjects[l].design.caption)&&this.sendEvent(r,a.screenobjects[l])}catch(e){console.error(e.message)}for(var c in this.player.container.shownScreenobjects)try{var h=this.player.container.shownScreenobjects[c];h&&("all"===s||s===h.screenobject.id||h.screenobject.design&&s===h.screenobject.design.caption)&&this.sendEvent(r,h)}catch(e){console.error(e.message)}},sendEvent:function(e,t){t.screenobject.sendEvent(e)},getEventAndTarget:function(e){var t,i;return e.indexOf("|")>-1?(t=e.split("|")[0],""===t&&(t="all"),i=e.split("|")[1]):(t="all",i=e),{eventToSend:i,eventTarget:t}}})}),define("ekhil/model/VariableList",[],function(){return{STUDENT_NAME:"SN",STUDENT_FIRST_NAME:"SFN",STUDENT_LAST_NAME:"SLN",ELM_COURSE_TITLE:"ELMCT",ELM_THEME_TITLE:"ELMTT",ELM_PAGE_TITLE:"ELMPT"}}),define("ekhil/controller/command/ShowPageCommand",["ekhil/controller/ACommand","ekhil/model/EventList","ekhil/model/VariableList"],function(e,t,i){return e.extend({execute:function(e,t,i,n){this.mediaChain=null;var o=this.getCourse(),r=this.getLook(),s=this.getRuntime(),a=this.getTracesLog();a.saveHtmlGrekhilLogs("ShowPageCommand.js",a.DISPLAY_LOG,"nodeIndex: "+e+", feedbackId :"+i+", ignoreTracking: "+n);var l=this.getNavigationHelper(),c=[],h=this.getScreenobjectHelper();if(this.lastFeedback=s.currentFeedback,this.lastNodeIndex=s.getLessonLocation(),this.player.container.hideAll(void 0!=t),null!=e)switch(o.getPageType(e)){case"result":var u=l.getScore(e);c=r.getLookScreenAuthorId(o.getScreenId(o.getPageScreenAuthorId(e)),o.getResultScreen(e,u));break;case"observe":c=r.getLookScreenAuthorId(o.getScreenId(o.getPageScreenAuthorId(e)),o.getPageScreenAuthorId(e));break;case"eval":case"discover":if(c=r.getLookScreenAuthorId(o.getScreenId(o.getPageScreenAuthorId(e)),o.getPageScreenAuthorId(e)),void 0==t){var d=o.getCorrecFeedbacks(e);if(d){var g=d.getAttribute("after"),f=d.getAttribute("tries_nb");if(1==g&&3==f&&s.nodeData[e]&&s.nodeData[e].tries>0){var u=l.getScore(e),p=o.getCorrecFeedbacksList(e);t=l.getCorrecFeedback(o,s,e,u,p,!0)}}}void 0!==t&&(o.displayFeedbackInFeedbackPage(t)&&(c=[]),c=h.getFeedbacklookScreenobjects(c,t))}else if(null!=i){var m=s.getPageScreen();if(""!=m){c=r.getLookPageScreenAuthorId(m);for(var A=c.length,v=0;v<A;v++){var b=this.player.container.getScreenobject(c[v]);void 0!=b&&b.screenobject.hide()}c=[]}""!=i&&(c=r.getLookPageScreenAuthorId(i)),s.setPageScreen(i)}if(null!=e&&1!=n){var y=void 0!=t?o.getFeedbackIndex(e,t):void 0;void 0==s.getNodeData(e)&&s.initNodeData(e,o.getFeedbackCount(e)),s.setLessonLocation(e,y,o.getFeedbackAllowAction(t))}for(var A=c.length,v=0;v<A;v++)if(void 0!=c[v].screen){var S=this.player.container.getPageScreen(c[v].screen);this.showPageScreen(S,e,t,c[v].screen)}else{var b=this.player.container.getScreenobject(c[v]);if(void 0!==b){this.setScreenObjectData(b.screenobject,e,t,c[v].screen);var w=this.continuePreviousAnimation(t,b.screenobject);b.screenobject.show(w),this.player.container.container.append(b.screenobject.div),this.player.container.shownScreenobjects.push(b)}}var x=o.getNextNodesIndexes(e);$(".loader").hide(),void 0==o.getNextNodeIndex(e)&&"eval"!=o.getPageType(e)?this.player.runCommand("EvalPage",this.runCmdSubtitlesRefreshBtnPreloadPages.bind(this,x)):this.runCmdSubtitlesRefreshBtnPreloadPages(x)},runCmdSubtitlesRefreshBtnPreloadPages:function(e){this.player.runCommand("Subtitles",this.runtime.getSubtitles(),this.player.runCommand.bind(this.player,"RefreshButtonState",this.player.runCommand.bind(this.player,"PreloadPages",e)))},showPageScreen:function(e,i,n,o){this.player.container.container.append(e.container),e.container.show();var r=e.screenobjects;for(var s in r){var a=r[s].screenobject;this.player.container.shownScreenobjects.push(r[s]),this.setScreenObjectData(a,i,n,o);var l=this.continuePreviousAnimation(n,a);a.reinit(l),a.show(l)}$(this.player).trigger(t.PAGE_LOADED,[{index:i}])},setScreenObjectData:function(e,t,n,o){var r=this.getCourse(),s=this.getRuntime(),a=this.getNavigationHelper();(this.player.bIsELW||r.getTrackLessonLocation(t))&&s.setValue("cmi.core.lesson_location",t);var l=this.continuePreviousAnimation(n,e);switch(e.reinit(l),e.type){case"timer":e.setMaxTime(a.getChronoRemainingTime(t));var c="maxtime"===e.design.target?(new Date).getTime():s.startTime;e.setStartTime(c);break;case"score":var h=0;switch(e.design.target){case"raw":h=a.getScore();break;case"theme":if(t){var u=t.split(".");u.pop();var d=u.join(".");h=a.getScore(d)}break;default:h=a.getScore(t)}e.setScore(h);break;case"index":e.setIndex(t,r.getCurrentNodePosition(t,e.getProgressUse())),e.setTotalNum(r.getTotalNodeNum(e.getProgressUse()));break;case"title":try{var g=r.getPage(t);e.setText(t,r,r.getCourseTitle(),g,s.history)}catch(e){}break;case"courseview":e.load(),e.setHistory(s.history),e.setIndex(t);break;case"smiley":var f=r.getMasteryScore(t),p=a.getScore(t),m=p>=f?"good":"bad";e.setSmileyState(m);break;case"maxtime_curtain":var A;A=a.getMaxTriesRaised(t)?0:a.getRemainingTime(t),e.delay=isNaN(A)?-1:A;break;case"eldar":try{var v=s.getNodeData(t);if(void 0!==v&&(v.author_id=e.eldar.author_id),e.eldar.allowAction(void 0===n||r.getFeedbackAllowAction(n)),e.eldar.setAnswer(s.answers[e.author_id]),void 0==n){if(e.eldar.tellClearFeedbackActions(),void 0!=this.lastFeedback&&this.lastNodeIndex==t){var b=r.getFeedbackId(t,this.lastFeedback);this.applyFBActions(r,e,b,!0)}}else r.getFeedbackShowGood(n)&&e.eldar.tellShowGoodAnswer(),r.getFeedbackShowBad(n)&&e.eldar.tellShowBadAnswer(),r.getFeedbackShowMissed(n)&&e.eldar.tellShowMissedAnswer(),this.applyFBActions(r,e,n,!1);e.eldar.refresh()}catch(e){console.info(e)}break;case"progressbar":var y=100;switch(e.getTarget()){case"screen_build":case"file_preload":y=100;break;case"progress":y=a.getProgression();break;case"navigation":default:y=r.getCurrentNodePosition(t,!0)/r.getTotalNodeNum(!0)*100}y=Math.round(y),y=Math.max(0,y),y=Math.min(100,y),e.setProgression(y);break;case"video":var S=r.getMediaAncestorType(e.author_id,"video");e.reinitCurrentTimeAtPlay=void 0==n,e.allowToPlay=void 0==n||n==o||"page"==S&&void 0!=n;var w=s.getSoundMute()?0:s.getSoundVolume()/100;e.setVolume(w);break;case"audio":var S=r.getMediaAncestorType(e.author_id,"sound");e.allowToPlay=void 0==n||n==o||"page"==S&&void 0!=n&&("true"==e.design.anim||"1"==e.design.anim);var w=s.getSoundMute()?0:s.getSoundVolume()/100;e.setVolume(w),e.autostart&&("page"!=S||!n)&&e.linked&&e.allowToPlay&&(null!=this.mediaChain&&"true"!=e.design.anim&&"1"!=e.design.anim&&($(this.mediaChain).on("ended",e.chainStart.bind(e)),e.chained=!0),this.mediaChain=e);break;case"summary":switch(e.getType()){case"global":var x={},C=r.getChildrenList(void 0,!0);for(var k in C)x[C[k]]=r.getNodeStructureToShow(C[k]);break;case"index":var x={},C=r.getChildrenList(e.getIndex(),!0);for(var k in C)x[C[k]]=r.getNodeStructureToShow(C[k]);break;default:var x=r.getTargetNodes(t)}e.setCourse(r).setRuntime(s).setTargetNodes(x).setCurrentNode(t);break;case"variable":var y=s.getVariable(e.getVariableName());e.setVariableValue(y);break;case"text":var _={},T=s.getValue("cmi.core.student_name");if(void 0!=T)var R=T.indexOf(","),E=T.slice(0,R),N=T.slice(R+1,T.length);_[i.STUDENT_NAME]=void 0!=T?T:"",_[i.STUDENT_FIRST_NAME]=void 0!=T?N:"",_[i.STUDENT_LAST_NAME]=void 0!=T?E:"",_[i.ELM_COURSE_TITLE]=t?r.getCourseTitle(t):"",_[i.ELM_THEME_TITLE]=t?r.getParentThemeNodeTitle(t):"",_[i.ELM_PAGE_TITLE]=t?r.getNodeTitle(t):"",e.setData(_)}},applyFBActions:function(e,t,i,n){switch(e.getFeedbackAction(i)){case"erase_answer":t.eldar.tellEraseAnswer();break;case"erase_bad":t.eldar.tellEraseBadAnswer();break;case"correct":n||t.eldar.tellCorrectAnswer()}},continuePreviousAnimation:function(e,t){var i=!1;if(e){i=!this.getScreenobjectHelper().isFeedBackScreenObject(e,t.author_id)&&("graza"===t.type||"true"===t.design.anim||"1"==t.design.anim)}return i}})}),define("ekhil/controller/command/SoundActionCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getRuntime(),n=this.getScreenobjectHelper(),o=i.getSoundVolume();switch(e){case"mute":i.setSoundMute(!i.getSoundMute());break;case"mute_on":i.setSoundMute(!0);break;case"mute_off":i.setSoundMute(!1);break;case"volume_up":(void 0==t||""==t||isNaN(t))&&(t=10),o=Math.min(100,Math.max(0,o+t)),i.setSoundVolume(o),i.setSoundMute(!1);break;case"volume_down":(void 0==t||""==t||isNaN(t))&&(t=10),o=Math.min(100,Math.max(0,o-t)),i.setSoundVolume(o),i.getSoundVolume()<=0&&i.setSoundMute(!0);break;case"play":case"pause":case"stop":for(var r=n.getScreenobjects(null,"audio"),s=r.length,a=0;a<s;a++)r[a].screenobject.author_id===t&&("play"==e?r[a].screenobject.play(!0):"pause"==e?r[a].screenobject.pause():"stop"==e&&r[a].screenobject.pause(!0))}var r=n.getScreenobjects(null,"audio");r=r.concat(n.getScreenobjects(null,"video"));var s=r.length;o=i.getSoundMute()?0:i.getSoundVolume()/100;for(var a=0;a<s;a++)r[a].screenobject.setVolume(o)}})}),define("ekhil/controller/command/StartupCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(){require(["ekhil/controller/command/AnimationCommand","ekhil/controller/command/EldarCommand","ekhil/controller/command/EvalPageCommand","ekhil/controller/command/ExecuteCommand","ekhil/controller/command/GoBackPageCommand","ekhil/controller/command/GoNextPageCommand","ekhil/controller/command/GoToPageCommand","ekhil/controller/command/GoToScreenCommand","ekhil/controller/command/LoadPageCommand","ekhil/controller/command/LoadScreenCommand","ekhil/controller/command/LoadTrackingCommand","ekhil/controller/command/LoadLangCommand","ekhil/controller/command/PageScreenCommand","ekhil/controller/command/PreloadPagesCommand","ekhil/controller/command/QuitCommand","ekhil/controller/command/RefreshButtonStateCommand","ekhil/controller/command/SendEventCommand","ekhil/controller/command/ShowPageCommand","ekhil/controller/command/SoundActionCommand","ekhil/controller/command/SubtitlesCommand","ekhil/controller/command/VariableCommand"],this.player.runCommand.bind(this.player,"LoadTracking"))}})}),define("ekhil/controller/command/SubtitlesCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){for(var i=this.player.container.shownScreenobjects,n=i.length,o=0;o<n;o++){var r=i[o].screenobject;r.design&&r.design.subtitle_element&&"1"==r.design.subtitle_element&&(e?r.show(!0):r.hide(!0))}t&&t()}})}),define("ekhil/controller/command/VariableCommand",["ekhil/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getRuntime(),n=t.split("|")[0],o=Number(t.split("|")[1]);switch(e){case"variable_decrease":i.setVariable(n,i.getVariable(n)-o);break;case"variable_increase":i.setVariable(n,i.getVariable(n)+o);break;case"variable_set":i.setVariable(n,o)}for(var r=this.getScreenobjectHelper(),s=r.getScreenobjects(null,"variable"),a=s.length,l=0;l<a;l++)s[l].screenobject.getVariableName()==n&&(s[l].screenobject.setVariableValue(i.getVariable(n)),s[l].screenobject.refresh())}})}),define("lib/ScormHelper",["lib/Class","lib/constants/TrackingAPIVersion"],function(e,t){var i=e.extend({SOURCE:"source",TARGET:"target",trackingAPIVersion:t,getScormIdentifier:function(e,t){return t===i.SOURCE?e+1+"":e<26?String.fromCharCode("A".charCodeAt()+e):e+""}},{init:function(){}});return i}),define("lib/Graphic",["lib/Class"],function(e){var t=function(){};return t.Dimension=function(e){this.width=0,this.height=0,this.getRelativeDimension=function(e){this.width=this.width/e.width*100,this.height=this.height/e.height*100},1==arguments.length&&(this.width=e.width,this.height=e.height)},t.getMaxDimensionText=function(e,i,n){var o=$("body"),r=$("<span />");$(o).append(r),$(r).css({zIndex:-1}),$(r).text(e),$(r).css(i);var s=$(r).width(),a=$(r).height();$(r).css(n);var l=$(r).width(),c=$(r).height();return $(r).remove(),new t.Dimension({width:Math.max(s,l),height:Math.max(a,c)})},t.Element=function(e,t,i,n){this.addElement=function(e){0==this.elements.length?(this.left=e.left,this.top=e.top,this.width=e.width,this.height=e.height):this.calculElement(e),this.elements.push(e)},this.calculElement=function(e){var t,i,n,o;t=Math.min(this.left,e.left),i=Math.min(this.top,e.top),n=Math.abs(Math.max(this.left+this.width,e.left+e.width)-Math.min(this.left,e.left)),o=Math.abs(Math.min(this.top,e.top)-Math.max(this.top+this.height,e.top+e.height)),this.left=t,this.top=i,this.width=n,this.height=o},this.left=0,this.top=0,this.width=0,this.height=0,this.elements=[],4==arguments.length&&(this.left=e,this.top=t,this.width=i,this.height=n,this.addElement(this))},t}),define("lib/Math2DHelper",["lib/Class"],function(e){return e.extend({squareDistance:function(e){return e.x*e.x+e.y*e.y},getCenterPosition:function(e,t){return{x:e.x+.5*t.x,y:e.y+.5*t.y}},tl2xy:function(e){return{x:e.left,y:e.top}},wh2xy:function(e){return{x:e.width,y:e.height}},vector2dSubstract:function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{init:function(){}})}),define("lib/ArrayHelper",["lib/Class"],function(e){return e.extend({fromList:function(e){return[].map.call(e,function(e){return e})},shuffle:function(e){return e.sort(function(){return 2*Math.random()-1})},find:function(e,t){for(var i=void 0,n=0;n<e.length;n++)if(t(e[n])){i=e[n];break}return i},findIndex:function(e,t){for(var i=-1,n=0;n<e.length;n++)if(t(e[n])){i=n;break}return i}},{init:function(){}})}),define("lib/HTMLHelper",["lib/Class","lib/Utils"],function(e,t){var i=e.extend({missingImage:"data:image/png;base64,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",_UID:0,getUID:function(){return i._UID++},button:function(e,n,o,r,s,a){var l=document.createElement("div"),c=!1,h="btDisabled";$(l).css({position:"absolute",width:n.width+"px",height:n.height+"px",top:n.top+"px",left:n.left+"px",pointerEvents:"auto"});var u={w:n.width,h:n.height,streched:n.streched,proportional:n.proportional},d=function(e,t){var n=!1;if(e){var o=$.extend({src:e},u),r=new i("image",o).getElement().get(0);t&&$(r).addClass(t),l.appendChild(r),r.style.display="none",n=!0}return n},g=function(e){for(var t=l.querySelectorAll("* > div"),i=0,n=t.length;i<n;i++)$(t[i]).hasClass(e)?t[i].style.display="block":t[i].style.display="none"},f=function(e){var t=!1;return e!==h&&(c||"btDisabled"===e)&&(h=e,t=!0),t},p=function(e){f(e)&&g(e)},m=function(e,t){$(l).on(e,p.bind(l,t))};return d(a,"btDisabled"),d(r,"btOver")&&m("mouseenter mouseup touchend","btOver"),d(s,"btDown")&&m("mousedown touchstart","btDown"),d(o,"btOut")?(m("mouseleave","btOut"),p("btOut")):console.warn("Missing default image"),l.enable=function(){c=!0,p("btOut")},l.disable=function(){c=!1,p("btDisabled")},t.hasTouchEvent()?$(l).on("touchend",function(t){t.preventDefault(),c&&e()}):$(l).on("mouseup",function(t){t.preventDefault(),c&&e()}),l.enable(),l},addCSSRule:function(e){var t=document.head.appendChild(e).sheet;return function(e,i){var n=Object.keys(i).map(function(e){
return e+":"+i[e]}).join(";");t.insertRule(e+"{"+n+"}",t.cssRules.length)}}(document.createElement("style")),getXHTMLLineBreak:function(e){var t=e;return t=t.replace(String.fromCharCode(10)+String.fromCharCode(13),"<br/>"),t=t.replace(String.fromCharCode(13),"<br/>"),t=t.replace(String.fromCharCode(10),"<br/>")},configureImage:function(e,t,i){var n=Math.round(i.w),o=Math.round(i.h),r=i.streched,s=i.proportional,a=i.align,l=i.position?i.position:"relative";if(e.css({textAlign:a,display:void 0!==i.display?i.display:"block",position:l,width:n+"px",height:o+"px"}).append(t),void 0==a&&(a="center"),null==r&&(r=!1),null==s&&(s=!0),r||n<t.naturalWidth||o<t.naturalHeight)if(s){var c=t.naturalWidth,h=t.naturalHeight,u=n/c,d=o/h,g=u>d?d:u;t.width=c*g,t.height=h*g}else t.width=n,t.height=o;else t.width=t.naturalWidth,t.height=t.naturalHeight;var f,p=(o-t.height)/2;switch(a){case"left":f=0;break;case"right":f=n-t.width;break;case"center":default:f=(n-t.width)/2}return $(t).css({position:"absolute",left:f+"px",top:p+"px"}),e.trigger("onLoadInit"),e.trigger("load"),e}},{_element:null,init:function(e,t){this._element=null;try{this._element=this[e](t)}catch(i){console.error("Function not found [type,params]",e,t)}},getUID:function(){return this.uid?this.uid:this.uid=i.getUID()},isImagePathValid:function(e){var t=!1;return 0!=e&&void 0!=e&&""!=e&&this.isImageFormatH5Compatible(e)&&(t=!0),t},isImageFormatH5Compatible:function(e){var t=["png","jpg","jpeg","bmp","gif"],i=["swf"],n=e.split(".").pop().toLowerCase();return-1!=t.indexOf(n)&&-1==i.indexOf(n)},fillImageErrorFeedback:function(e,t){e.src="";var n=new Image;$(n).css({display:"block",margin:"auto"}),n.src=i.missingImage,t.append(n),t.css({borderStyle:"solid",borderWidth:"1px",borderColor:"black",background:"#FBFBFB"})},image:function(e){var t=new Image,n=$("<div/>"),o=function(o){setTimeout(i.configureImage.bind(this,n,t,e),10)},r=function(){console.warn("HTMLHelper:image",e.src),n.trigger("error")};return t.addEventListener("load",o.bind(this)),t.addEventListener("error",r.bind(this)),this.isImagePathValid(e.src)?t.src=e.src:(console.warn("HMTLHelper:image - incompatible image format : ",e.src),this.fillImageErrorFeedback(t,n)),n},checkbox:function(e){var t={};$.extend(e,{checked:!1});var i=new Image;$(i).bind("load",function(){$(this).data("loaded",!0),$(t).trigger("loaded")}),i.src=e.file_normal;var n=new Image;$(n).bind("load",function(){$(this).data("loaded",!0),$(t).trigger("loaded")}),n.src=e.file_checked;var o=e.file_width,r=e.file_height;0!=o&&null!=o||(o=null),0!=r&&null!=r||(r=null);var s=$("<div/>").css({width:o,height:r,position:"relative",cursor:"pointer"}).data("checked",e.checked),a=e.marginRight,l=e.marginLeft;return a&&l&&$(s).css({marginRight:a,marginLeft:l}),$(t).bind("loaded",function(){var e=$(i).data("loaded"),t=$(n).data("loaded");if(e&&t){$(i).css({width:o,height:r,left:0,top:0}),$(n).css({width:o,height:r,left:0,top:0}).hide(),$(s).append(i),$(s).append(n);$(s).data("checked")?$(n,this).show():$(i,this).show()}}),$(s).bind({click:function(){return $(this).data("checked")?$(this).trigger("uncheck"):$(this).trigger("check"),$(this).trigger("change"),!1},check:function(){$(this).data("checked")||$(this).data("checked",!$(this).data("checked")),$(n,this).show(),$(i,this).hide()},uncheck:function(){$(this).data("checked")&&$(this).data("checked",!$(this).data("checked")),$(n,this).hide(),$(i,this).show()}}),void 0!=e.score&&$(s).data("value",e.score),$(s).data("uid",this.getUID()),s.uncheck=function(){$(this).trigger("uncheck")},s.check=function(){$(this).trigger("check")},s.getValue=function(){return e.score},s.changePicture=function(e){n.src=e},s.img_checked=n,s},getElement:function(){return this._element}});return i}),define("lib/PositionHelper",["lib/Utils"],function(e){return{getPosition:function(t,i){var n=e.getScale(),o=$(t)[i]();return{left:o.left/n,top:o.top/n}},position:function(e){return this.getPosition(e,"position")},offset:function(e){return this.getPosition(e,"offset")}}}),define("lib/DragAndDrop",["lib/Class","lib/Utils","lib/PositionHelper"],function(e,t,i){$.extend($.fn,{droppable:function(){var e=$.fn.droppable;e.objects=e.objects||[],e.objects.push(this)},resetDropZone:function(){$.fn.droppable.objects=[]},draggable:function(e){e=e||{};var n=!1,o=$(this),r={},s=t.getScale(),a=function(a){var l=a.originalEvent;s=t.getScale();var c=l.touches?l.touches.item(0):l;n=!0,(void 0===e.axis||e.axis&&"x"===e.axis)&&(r.x=c.clientX/s-i.offset(o).left),(void 0===e.axis||e.axis&&"y"===e.axis)&&(r.y=c.clientY/s-i.offset(o).top),o.trigger("dragstart"),l.preventDefault()},l=function(e){n=!1,r={},o.trigger("dragend")},c=function(e){var t=$.fn.droppable.objects,n=$(e),o=i.offset(e),r=o.left+n.width()/2,s=o.top+n.height()/2,a=[];for(var l in t){var c=$(t[l]),o=i.offset(t[l]);r>o.left&&r<o.left+c.width()&&s>o.top&&s<o.top+c.height()&&a.push(c)}a.length?n.data("attached",a):n.data("attached",null)},h=function(e){e.stopPropagation(),e=e.originalEvent;var t=i.offset(o.parent()),a=e.touches?e.touches.item(0):e;return n&&(o.css({position:"absolute",left:a.clientX/s-t.left-r.x+"px",top:a.clientY/s-t.top-r.y+"px"}),void 0!==$.fn.droppable.objects&&$.fn.droppable.objects&&$.fn.droppable.objects.length>0&&c(o),o.trigger("drag")),e.preventDefault(),!1},u={touchmove:h,mousemove:h,mouseup:l,touchend:l};o.bind({mousedown:a,touchstart:a,dragstart:function(){$(document).bind(u)},dragend:function(){$(document).unbind(u)}})}})}),define("ekhil/view/eldarcomponent/DropZone",["lib/Class","lib/DragAndDrop","lib/HTMLHelper"],function(e,t,i){var n=e.extend({create:function(e,t,i){return new n(e,t,i)}},{init:function(e,t,i){this.id=e,this.width=t,this.height=i,this.x=0,this.y=0,this.bgImage=null,this.attachedItems=[]},setPosition:function(e,t){return this.x=e,this.y=t,this},getCenter:function(){return{x:this.x+.5*this.width,y:this.y+.5*this.height}},setBackgroundImage:function(e,t){return this.bgImage={image:e,style:t},this},setDesign:function(e){return this.design=e,this},render:function(e){var t={left:this.x,top:this.y};if(void 0===this.div||e){if(null!==this.bgImage){var n=this.bgImage.style;this.div=new i("image",{src:this.bgImage.image,position:"absolute",w:this.width,h:this.height,proportional:n.proportional,streched:n.stretched}).getElement()}else this.div=$("<div/>"),t=$.extend(t,{position:"absolute",width:this.width,height:this.height},this.design);this.div.droppable(),this.div.css(t),this.div.data({parentZone:this})}return this.div},attachItem:function(e){this.attachedItems=[],this.attachedItems.push(e)},detachItem:function(e){var t=this.attachedItems.indexOf(e);-1!==t&&this.attachedItems.splice(t)},isHovered:function(){return this.attachedItems.length>0}});return n}),define("ekhil/view/eldarcomponent/DragItem",["lib/Class","lib/HTMLHelper","lib/DragAndDrop","ekhil/view/eldarcomponent/DropZone"],function(e,t,i,n){var o=e.extend({create:function(e){return new o(e)}},{init:function(e){this.id=e,this.zone=-1,this.type="",this.content="",this.width=1,this.height=1,this.x=0,this.y=0,this.origin={x:0,y:0},this.dragEndCbk=function(e){},this.dragStartCbk=function(e){},this.dropZoneHovered=[],this.design={base:{display:"block",position:"absolute",cursor:"pointer",boxSizing:"border-box",padding:"2px"},text:{},image:{proportional:!0,stretched:!1}}},setSize:function(e,t){return this.width=e,this.height=t,this},setOrigine:function(e,t){return this.origin={x:e,y:t},this.resetPosition(),this},setPosition:function(e,t){return this.x=e,this.y=t,this},getCenteredPosition:function(e){return{x:e.x-.5*this.width,y:e.y-.5*this.height}},setCenter:function(e){return this.setPosition(e.x-.5*this.width,e.y-.5*this.height),this},resetPosition:function(){return this.setPosition(this.origin.x,this.origin.y),this},setZone:function(e){return this.zone=e,this},setContent:function(e,t){return this.type=e,this.content=t,this},setTextDesign:function(e){return this.design.text=e,this},setProportional:function(e){return this.design.image.proportional=e,this},setStretch:function(e){return this.design.image.stretched=e,this},setDisplay:function(e){return this.design.base.display=e,this},setLoadedCbk:function(e){return this.onLoadedCbk=e,this.loaded&&this.onLoadedCbk(),this},onLoadedHandler:function(){this.loaded=!0,void 0!==this.onLoadedCbk&&this.onLoadedCbk()},setDragEndCbk:function(e){return this.dragEndCbk=e,this},onDragEnd:function(){this.dropZoneHovered=this.getHoveredZones(),this.dragEndCbk(this)},setDragStartCbk:function(e){return this.dragStartCbk=e,this},onDragStart:function(){this.dragStartCbk(this)},updateStyle:function(){var e=$.extend($.extend(this.design.base,this.design.text),{left:this.x,top:this.y,width:this.width,height:this.height});this.div.css(e)},render:function(){return void 0===this.div&&("image"===this.type?(this.loaded=!1,this.div=new t("image",{src:this.content,position:"absolute",display:this.design.base.display,w:this.width,h:this.height,proportional:this.design.image.proportional,streched:this.design.image.stretched}).getElement(),this.div.on("onLoadInit",this.onLoadedHandler.bind(this))):(this.div=$("<div/>"),this.div.html(this.content),this.onLoadedHandler()),this.div.draggable(),this.div.on("dragend",this.onDragEnd.bind(this)),this.div.on("dragstart",this.onDragStart.bind(this))),this.updateStyle(),this.div},refresh:function(){this.updateStyle()},getHoveredZones:function(){var e=[],t=this.div.data("attached");return void 0!==t&&null!==t&&(e=jQuery.map(t,function(e){return e.data().parentZone}.bind(this))),e}});return o}),define("ekhil/view/eldarcomponent/DragAnswerItem",["lib/Class"],function(e){var t=e.extend({create:function(){return new t}},{target:-1,infos:void 0,init:function(){this.target=-1},setTarget:function(e){return this.target=e,this},setInfos:function(e){return void 0!==e&&(this.infos=e),this}});return t}),define("ekhil/view/AEldar",["lib/Class","lib/Config","lib/ScormHelper","lib/constants/TrackingAPIVersion","lib/Utils","ekhil/model/Runtime","lib/TracesLog","lib/Graphic","lib/Math2DHelper","lib/ArrayHelper","ekhil/view/eldarcomponent/DragItem","ekhil/view/eldarcomponent/DragAnswerItem","ekhil/view/eldarcomponent/DropZone"],function(e,t,i,n,o,r,s,a){return e.extend({isCorrected:!1,type:"",init:function(e,t,i,n){this.player=n||require("ekhil/EkhilPlayer").getInstance(),this.tracesLog=s.getInstance(),this.author_id=e.getAttribute("author_id"),this.type=e.getAttribute("id"),this.eldar=$("<div>"),this.tracesLog=s.getInstance()},getRuntime:function(){return null==this.runtime&&(this.runtime=this.player.getModel(r.MODEL_ID)),this.runtime},parseXMLAttributes:function(e){return o.parseXMLAttributes(e)},onEldarLoaded:function(e,t){this.eldar.css({pointerEvents:"auto"}),e.append(this.eldar),t.call()},getScore:function(){return console.warn("AEldar.getScore() should be overriden when extending AEldar."),0},getInteraction:function(e){if(this.getRuntime(),t.trackingAPIVersion===n.SCORM_2004){var i="other";return i=e<=36?"choice":"other",{type:i,correct_responses:[{pattern:this.correct_response()}],student_response:this.student_response(),correct_response_text:this.correct_response_text()?this.correct_response_text().substring(0,4e3):"",student_response_text:this.student_response_text()?this.student_response_text().substring(0,4e3):"",result:this.getScore()}}var i="performance";return i=e<=26?"choice":"performance",{type:i,correct_responses:[{pattern:this.correct_response()}],student_response:this.student_response(),correct_response_text:this.correct_response_text()?this.correct_response_text().substring(0,250):"",student_response_text:this.student_response_text()?this.student_response_text().substring(0,250):"",result:this.getScore()}},getAnswer:function(){var e={};e[this.type]=[];for(var t=this.answer.length,i=0;i<t;i++)e[this.type].push(this.answer[i]);return JSON.stringify(e)},setAnswer:function(e){var t=null;if(this.tellEraseAnswer(),e){var i=o.parseJson(e);i&&(this.answer=o.isEmpty(i[this.type])?i[this.type.toLowerCase()]:i[this.type],t=this.answer)}return t},tellEraseAnswer:function(){this.answer=[]},tellEraseBadAnswer:function(){console.warn("AEldar.tellEraseBadAnswer() should be overriden when extending AEldar.")},tellCorrectAnswer:function(){this.isCorrected=!0},tellStudentAnswer:function(e){this.isCorrected=!1,this.setAnswer(e)},tellShowBadAnswer:function(){this.eldar._showBad=!0},tellShowGoodAnswer:function(){this.eldar._showGood=!0},tellShowMissedAnswer:function(){this.eldar._showMissed=!0},tellClearFeedbackActions:function(){this.eldar._showBad=!1,this.eldar._showGood=!1,this.eldar._showMissed=!1},correct_response:function(){console.warn("AEldar.correct_response() should be overriden when extending AEldar.")},student_response:function(){console.warn("AEldar.student_response() should be overriden when extending AEldar.")},correct_response_text:function(){console.warn("AEldar.correct_response_text() should be overriden when extending AEldar.")},student_response_text:function(){console.warn("AEldar.student_response_text() should be overriden when extending AEldar.")},allowAction:function(e){this.eldar.css({pointerEvents:e?"auto":"none"})},show:function(){this.tracesLog.saveHtmlGrekhilLogs(this.type,s.ELDAR_LOG,"Show()"),console.warn("AEldar.show() should be overriden when extending AEldar.")},refresh:function(){console.warn("AEldar.refresh() should be overriden when extending AEldar.")},hide:function(){}})}),function(e,t){e.effects={effect:{}},function(e,t){function i(e,t,i){var n=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=l(),n=i._rgba=[];return t=t.toLowerCase(),g(a,function(e,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=i[l](a),i[c[l].cache]=r[c[l].cache],n=i._rgba=r._rgba,!1}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(e,t,i){return i=(i+1)%1,6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var r,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},d=e("<p>")[0],g=e.each;d.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=d.style.backgroundColor.indexOf("rgba")>-1,g(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(t,o,s,a){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(o),o=void 0);var h=this,u=e.type(t),d=this._rgba=[];return void 0!==o&&(t=[t,o,s,a],u="array"),"string"===u?this.parse(n(t)||r._default):"array"===u?(g(c.rgba.props,function(e,n){d[n.idx]=i(t[n.idx],n)}),this):"object"===u?(t instanceof l?g(c,function(e,i){t[i.cache]&&(h[i.cache]=t[i.cache].slice())}):g(c,function(n,o){var r=o.cache;g(o.props,function(e,n){if(!h[r]&&o.to){if("alpha"===e||null==t[e])return;h[r]=o.to(h._rgba)}h[r][n.idx]=i(t[e],n,!0)}),h[r]&&e.inArray(null,h[r].slice(0,3))<0&&(h[r][3]=1,o.from&&(h._rgba=o.from(h[r])))}),this):void 0},is:function(e){var t=l(e),i=!0,n=this;return g(c,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],g(o.props,function(e,t){if(null!=s[t.idx])return i=s[t.idx]===r[t.idx]})),i}),i},_space:function(){var e=[],t=this;return g(c,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=l(e),o=n._space(),r=c[o],s=0===this.alpha()?l("transparent"):this,a=s[r.cache]||r.to(s._rgba),u=a.slice();return n=n[r.cache],g(r.props,function(e,o){var r=o.idx,s=a[r],l=n[r],c=h[o.type]||{};null!==l&&(null===s?u[r]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),u[r]=i((l-s)*t+s,o)))}),this[o](u)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=l(t)._rgba;return l(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,h=a+l,u=.5*h;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:u<=.5?c/h:c/(2-h),[Math.round(t)%360,i,u,null==s?1:s]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],s=n<=.5?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,t+1/3)),Math.round(255*o(a,s,t)),Math.round(255*o(a,s,t-1/3)),r]},g(c,function(t,n){var o=n.props,r=n.cache,a=n.to,c=n.from;l.fn[t]=function(t){if(a&&!this[r]&&(this[r]=a(this._rgba)),void 0===t)return this[r].slice();var n,s=e.type(t),h="array"===s||"object"===s?t:arguments,u=this[r].slice();return g(o,function(e,t){var n=h["object"===s?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),c?(n=l(c(u)),n[r]=u,n):l(u)},g(o,function(i,n){l.fn[i]||(l.fn[i]=function(o){var r,a=e.type(o),l="alpha"===i?this._hsla?"hsla":"rgba":t,c=this[l](),h=c[n.idx];return"undefined"===a?h:("function"===a&&(o=o.call(this,h),a=e.type(o)),null==o&&n.empty?this:("string"===a&&(r=s.exec(o))&&(o=h+parseFloat(r[2])*("+"===r[1]?1:-1)),c[n.idx]=o,this[l](c)))})})}),l.hook=function(t){var i=t.split(" ");g(i,function(t,i){e.cssHooks[i]={set:function(t,o){var r,s,a="";if("transparent"!==o&&("string"!==e.type(o)||(r=n(o)))){if(o=l(r||o),!u.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(e){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return g(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function t(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(r[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function i(t,i){var n,r,s={};for(n in i)r=i[n],t[n]!==r&&(o[n]||!e.fx.step[n]&&isNaN(parseFloat(r))||(s[n]=r));return s}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(o,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:e(this),start:t(this)}}),r=function(){e.each(n,function(e,t){o[t]&&s[t+"Class"](o[t])})},r(),c=c.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function t(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ui-effects-"+t[i],e[0].style[t[i]])},restore:function(e,t){var i,n;for(n=0;n<t.length;n++)null!==t[n]&&(i=e.data("ui-effects-"+t[n]),void 0===i&&(i=""),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=t.apply(this,arguments),o=n.mode,r=n.queue,s=e.effects.effect[n.effect];return e.fx.off||!s?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===r?this.each(i):this.queue(r||"fx",i)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),define("lib/jquery.ui.effect",function(){}),define("ekhil/view/AScreenObject",["lib/Class","lib/Utils","lib/jquery.ui.effect"],function(e,t){return e.extend({id:null,ref:null,author_id:null,div:null,player:null,timeoutIndex:null,_isAnimBack:null,_animStartTime:null,_animLength:null,_shown:!1,init:function(e){this.player=e||require("ekhil/EkhilPlayer").getInstance(),this.design={},void 0==this.div&&(this.div=$("<div />"),this.div.hide()),this._isAnimBack=!1},setXML:function(e){e.attributes.author_id&&(this.author_id=e.attributes.author_id.value,this.div.attr("id",this.type+this.author_id.replace("#","_")));var i=e.querySelector("design");t.setXmlAttributes(i,this.design),1!==this.design.anim&&"true"!==this.design.anim||0!=this.design.anim_length||(this.design.anim_length=1e-4),this.design.rotation&&t.rotate(this.div,this.design.rotation,"50% 50% 0"),this.design.anim&&"false"!=this.design.anim?(void 0==this.design.anim_start_width&&(this.design.anim_start_width=this.design.width),void 0==this.design.anim_start_height&&(this.design.anim_start_height=this.design.height),void 0==this.design.anim_start_top&&(this.design.anim_start_top=this.design.top),void 0==this.design.anim_start_left&&(this.design.anim_start_left=this.design.left),void 0==this.design.anim_start_alpha&&(this.design.anim_start_alpha=this.design.alpha),this.div.css({width:this.design.anim_start_width+"px",height:this.design.anim_start_height+"px",top:this.design.anim_start_top+"px",left:this.design.anim_start_left+"px",position:"absolute",opacity:this.design.anim_start_alpha/100})):this.div.css({width:this.design.width+"px",height:this.design.height+"px",top:this.design.top+"px",left:this.design.left+"px",position:"absolute",opacity:this.design.alpha/100})},load:function(e){e.call()},show:function(e){this._shown=!0,1===this.design.anim||"true"===this.design.anim?1!==this.design.anim_autostart&&"true"!==this.design.anim_autostart||(e?this.div.get(0).style.display="block":this.animate()):this.div.get(0).style.display="block"},hide:function(e){this._shown&&(this._shown=!1,clearTimeout(this.timeoutIndex),this.div.get(0).style.display="none",e||(this._isAnimBack=!1))},sendEvent:function(e){},animate:function(){0===this.design.anim_delay?this.onAnimateEvent():this.timeoutIndex=setTimeout(t.relegate(this,this.onAnimateEvent),1e3*this.design.anim_delay)},onAnimateEvent:function(){var e,i=this.getJQueryEasingName();if(this._isAnimBack?e={top:(isNaN(this.design.anim_start_top)?this.design.top:this.design.anim_start_top)+"px",left:(isNaN(this.design.anim_start_left)?this.design.left:this.design.anim_start_left)+"px",width:(isNaN(this.design.anim_start_width)?this.design.width:this.design.anim_start_width)+"px",height:(isNaN(this.design.anim_start_height)?this.design.height:this.design.anim_start_height)+"px",opacity:(isNaN(this.design.anim_start_alpha)?this.design.alpha:this.design.anim_start_alpha)/100}:(this.div.css({top:(isNaN(this.design.anim_start_top)?this.design.top:this.design.anim_start_top)+"px",left:(isNaN(this.design.anim_start_left)?this.design.left:this.design.anim_start_left)+"px",width:(isNaN(this.design.anim_start_width)?this.design.width:this.design.anim_start_width)+"px",height:(isNaN(this.design.anim_start_height)?this.design.height:this.design.anim_start_height)+"px",opacity:(isNaN(this.design.anim_start_alpha)?this.design.alpha:this.design.anim_start_alpha)/100}),e={top:this.design.top+"px",left:this.design.left+"px",width:this.design.width+"px",height:this.design.height+"px",opacity:this.design.alpha/100}),"None"===i)this._isAnimBack?this.div.hide():this.div.show(),this.div.css(e);else{var n;this._animLength=1e3*this.design.anim_length;var o,r=Date.now();this._isAnimBack?(n=null!==this._animStartTime?r-this._animStartTime:this._animLength,o=n):(n=null!==this._animStartTime?this._animStartTime-r+this._animLength:0,o=this._animLength-n),this._animStartTime=r-n,this.div.stop();var s=this.div.get(0).style.transform,a=t.getTransformOrigin(this.div.get(0)),l={duration:o,easing:i,queue:!1,specialEasing:void 0,step:void 0,progress:t.relegate(this,this.scaleSO,i,this._isAnimBack,s,a),complete:t.relegate(this,this.onCompleteEvent,this._isAnimBack)};this.div.show().animate(e,l)}this._isAnimBack=!this._isAnimBack},getJQueryEasingName:function(){var e=this.design.anim_easemode;switch(this.design.anim_easing){case"Elastic":case"Bounce":case"Back":e+=this.design.anim_easing;break;case"Strong":e+="Expo";break;case"Regular":e="linear";break;default:e="None"}return e},onCompleteEvent:function(e){this._animStartTime=null,e&&(this.div.hide(),this._isAnimBack=!1)},reinit:function(e){e||(this._isAnimBack=!1)},scaleSO:function(e,t,i,n,o,r,s){}})}),define("lib/MathUtils",["lib/Class"],function(e){return e.extend({isNumeric:function(e){return $.isNumeric(e)},clamp:function(e,t,i){return Math.min(i,Math.max(t,e))},limitDecimal:function(e,t){var i=Math.pow(10,t);return Math.floor(e*i)/i}},{init:function(){}})}),define("lib/CssHelper",["lib/Class","lib/MathUtils"],function(e,t){var i=e.extend({_element:null,init:function(){}});return i.applyScale=function(e,i,n){if(e||(e=""),!(n&&i&&t.isNumeric(i)&&t.isNumeric(n)))return e;var o=/scale\(.+\)/;return e=e.replace(o,""),finalTransform=e+"scale("+i+","+n+")",finalTransform},i.checkUnity=function(e,t){if(e&&t){return e.match(new RegExp(t))?e:e+t}},i}),define("ekhil/view/ASOImage",["ekhil/view/AScreenObject","lib/Utils","lib/HTMLHelper","lib/CssHelper"],function(e,t,i,n){return e.extend({init:function(){this._super(),this.type="abstract_image",this.imageWidth=0,this.imageHeight=0,this.source=""},setXML:function(e){this._super(e);var i=$(e.querySelector("content"));this.source=i.attr("file");var n=$(e.querySelector("design"))
;this.imageWidth=n.attr("width")||0,this.imageHeight=n.attr("height")||0,this.streched=!!+n.attr("streched"),this.proportional=!!+n.attr("proportional"),this.vflip="1"==n.attr("vflip"),this.hflip="1"==n.attr("hflip"),this.stoppropagation="1"==n.attr("stoppropagation"),this.stoppropagation&&(this.clickFunction=t.relegate(this,this.onButtonClickEvent))},load:function(e){if(""!=this.player.getMediaPath(this.source)&&"swf"!=this.source.split(".").pop().toLowerCase()&&"xml"!=this.source.split(".").pop().toLowerCase()){this.stoppropagation?this.div.css({backgroundColor:"transparent"}):this.div.css({pointerEvents:"none",backgroundColor:"transparent"}),this.img=new i("image",{src:this.player.getMediaPath(this.source),w:this.imageWidth,h:this.imageHeight,streched:this.streched,proportional:this.proportional}).getElement();var t={},n=[];this.vflip&&n.push("scaleY(-1)"),this.hflip&&n.push("scaleX(-1)"),n.length&&$.extend(t,{"-moz-transform":n.join(" "),"-o-transform":n.join(" "),"-webkit-transform":n.join(" "),transform:n.join(" ")}),this.stoppropagation?$(this.img).css($.extend(t,{opacity:this.design.alpha/100})):$(this.img).css($.extend(t,{pointerEvents:"none",opacity:this.design.alpha/100})),$(this.img).bind({load:e,error:e}),this.stoppropagation&&this.div.bind("click",this.clickFunction),$(this.div).append(this.img)}else console.warn("ASOImage.load "+this.author_id+" - path error : "+this.source),e.call()},onButtonClickEvent:function(e){e.stopPropagation()},show:function(e){this._super(e)},scaleSO:function(e,t,i,o,r,s,a){var l=t?1-$.easing[e].apply(null,[s]):$.easing[e].apply(null,[s]),c=this.design.anim_start_width/this.design.width,h=c+(1-c)*l,u=this.design.anim_start_height/this.design.height,d=u+(1-u)*l,g=o;finalTransform=n.applyScale(i,h,d);var f={height:this.design.height,width:this.design.width,transform:finalTransform,transformOrigin:g};this.div.css(f)}})}),define("lib/Base64Images",["lib/Class"],function(e){var t=e.extend({init:function(){}});return t.getPngPlayButton=function(){return'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAYAAAA5gg06AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADdYAAA3WAZBveZwAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAA0YSURBVHhe7Z13rBxXFcZtY0IsgwApoICMBII/ECJKhJQEyxBRRLGQ+QdRIjAlISgIC2QJOUAiggQCuZfYko3tuNty770/+7k3uffee+/25fvWO8vszDdv7uzOzM68947009OevfWct1PuPffeFsaYXDBp0qSW4JPgBfAD8Ab4B/gvmAu2gnPgQfHvFjAbDAF/B78FHcHz4BnQUtWTRaQyK8CQnwddwXJwH5gYuQeWgj+Cz6r6s4JU1goYi7+Wr4J/g51AGTcptoN/gZdApn5lUpkmMEgb0AkMBWeBMmDanAa8TPKy+rRqd5pIZRqg823BO+A6UIbKCpfBW6CN6kcaSGWSoLNPgS4gK78aW/jrehO0Vv1KEqlMAnSuFegMDgNlhLxwALwKUrtvSWXcoEO85+wAqtN5hY/8HVV/40Yq4wKd6ADqi51qrKwEL6v+x4VUxgEa3g08KnYkNmbOnGkWLVpkVq1aZTZt2mR27txpDh06ZE6fPm0uX75sbt26VfjLz9Tz+40bNxbSMx/zq3Kr5CH4k7JDHEhlNaCxT4OxxcZXzZQpU0xdXZ05ePCguX37NqqoXujIAwcOmJUrVxbKV/VWyPvgQ6hC2qZSpLJS0MB2YGOxwRUzY8YMs379enPixAnz4MEDFJ2csHzWs27dukK9qj0RWQOeRdHSRpUglZWAhrUHZ4oNrYi1a9ea8+fPm8ePH6PI9IX1sv41a9bI9kXgJHgRRUpbRUUqo4IGvQY4FqYaHAovZ1euXEFR2RHe13g5VO215A74BYqSNouCVNqCRrQG/YuNisyyZcvMhQsXUFR25dy5c2bJkiWy/Zb0BK1QlLShDVJpAyrmyMGiYkMisXDhwsLTV57k5MmTZsGCBbI/FswBFY9USKUNqJQDoqpBgUybNs0cOXIE2fMpvGcdPnzYTJ06VfYvhPdQhLRlGFIZBir8g6cBocydO9dcvXoV2fMvvH/OmTNH9jOE15Fd2rQhpLIhUNE3AWc/VSMkK1asMPfu3UP2xiN3794t3FNVfxuAD1cdkF3aNgipDAIVfA5cLFZoxZYtW2r2SJ20PHr0qDDqofrdABz9b4fs0sYKqVSgYM7/cPZSVeyDb/K8fjcF4WhIxJGLTcB6fkoqvaBATmtPLVYQCsfHLl68iKxNR/gSHHHEYjyySXt7kUovKPBdTwWB8D/q0qVLyNb0hO98EX9RbyGbtLkbqXSDgr4FHrsKbpA8P2LHIRx5V3YJgLMEoQ8SUumAAniZ4/VTVeBj27ZtyNYsmzdvlvYJoB5ZpP0dpNIBBfzEU2AgHOdqrE9xUYV2WL58ubRTAD9ENukDIpUEGTkut99VUCDz5s0z9+/fR7ZmcYTvUXyBV/YSMLQgcHxPKgky/c5VSCDTp083169fR5bqZP/+/YVZ1Mb0a+QIC4fClN0Ev0QW6QupRAYGLJ5yFRDIsWPHkKV64RR39+7dzbBhw8zevXuL2vwLH6SU3QRHwVPI4vOHT0GQmMGAqqAyFi9ejOTxiOMkhxEjRhSmuPMuvDJw1F/ZTyDjJHwKJPwYYNSmKqQMzrXEJV4nOYwePTr3j/WcllH2E5wHH0GWMp+UfSBI9B9XpkD4NBenBDnJYdy4ceb48ePF1PmTCE977yJ5mU/KPiDBx8FtV4ZA4p7uDnOSw8SJE3M3YUjhMJmyo+AG+DCyBDrp567EgTCyJm6xdZIDh1/ivNymIfX19dKegh8heaCTKCpTCRrn5s2bSB6vRHWSAwc18zKYy1eVyZMnS7t6GI3kfifhC8YshC5D4fxQElKpk0iPHj3M7NmzCxE+WRf2U9nVA+fsPoDkPid915UokKRCr6pxkkPPnj3N/PnzzbVr14qlZk8i3JteQXKfkwZ5EvngvH5SEoeTHHr16lWI+75x40ax9OwI35ss49F7I7nPSSc8iXwkdamjxOkkh969e5ulS5cWYr+zJJaXPL7J/99JUHzFk0By9uxZ1pGIJOEkhz59+hTe6+7cuVOsrbZy6tQpaV/Bl5C85CTuh6ASleBAKgMvkpIkneTQr18/s3r16ppHLj18+NA2du8vSF5yEletqUQlGEyfpKThJIf+/fsX3vVqOb3C9VLKzh5o9BZ0EMfqVIIykh6SSdNJDgMHDizUm/TyGiWW0+ycXm9DJ33ZpZTwBTbp/7paOMlh0KBBZuvWrYlezr3C+6OyteALdFLo+xEfZ5OWWjrJYfDgwWb79u2pTTxahiq/Qif92qP0wetn0pIFJzkMHTrU7N69O3FnWS6p+Rmd9FeP0gdDaZOWLDnJYfjw4Wbfvn3FFsYvlgOuXemk9zxKH4w9SFqy6CSHkSNHFm70cQsHB5S9PfSkk0LDh5NooFey7CSHMWPGmKNHjxZbXL3s2bNH2tvDODqJq6XVlyX4hpy05MFJDhMmTCis/KtWLINUltFJjFJRX5ZIYwogT05yoG2qmSXmMJvX1oK9dFLoqvE0xrzy6CQHxtZxVUVU4ZSKsreH63SS+qKMNF7y8uwkwolH3mOiCKNclb290El3vUovzb+khuGUeCXxFpa/pGt00hGP0kfzPUkzfvz4qh4gLO9Je+ik5qe7iIwaNSqWgM0oT3dTPEofze9JT+AIBBcWxCWW70lj6aQBHqWPpj7iMGTIkERWfFiOOPSgk0LH7mjApCWLTkp6CiPK2N2vPEofTW0UfMCAAWbDhg2JTwZajoL/lE76jkfpo6nMJ/Xt2zfVGAgGdCp7e/g6nRQ6M8v3gMY8M8vQL656iGv7UBthXcrWgsLM7EdB6BYAca3oC5JaOIkRr7UKoowU44D0dNRm1xeSxhQtxCEcTl3Xctcwy2ihwvYBjpN4vpBKVKIxxN0R9qPWqzD4QGIZd9cNyUtO4sFRKlEZeY1gJWz/mTNnirXVVjiU5LVtAF9E8idOIlAc8yTwkbdYcMJlnNxSOkvCx3tlXw8c2ij4xu2kgZ5EPvKyqoIwLiGLW7lFWFXRC8l9Tgp9XyJZXp9Esr4PRLXrk7jS75orkYSbGyUh1TqJgY07duxILbCxUrG81OmVfgRfTHQllPDFNon3ikqdxPE1/uNwpULWhZN8lmtmRyF5yS9eJ1mtPk/inSmqk5yVEbUItq9UOOSk7ClocPU593G45UocSNyztbZO4vgaXwTztjtyhHsRbznB+zgQJPinK0Mgae+IwvE1bvGc5vhanBJhR5S3kbzMJ2UfCBJxLM9qW+k09hbi+Bo3UMriImVbibC3ELejbossZT4p++CAhH92ZQyE8yFxiddJzvha1k6DqUQ4iKvsJ+iC5D5/+BQEiXmaWOhqdBL3fneEwYZZPw3GViLsd8dTQ+33uyPIwAPdVWFl0KBxbG7B5TV53dwpSHgViHD4SOBZS1JJkIl7sO5zFRII92Ct9mmrse3hyuhUy5V8hCcXRN+DlSDjj10FNQgPDcn6235awimdiIeNdEI26QMilQ7IHGlfcEbWNMuTS7eyTwDV7QtOUMg3gPV5sU3lEJEg4eEiyi4B8Hza9sgmbe8glV5QUGhsngO3E8jL/nNxC5e/WI7NOXRFNmlzN1KpQIETPBUEwo0C87arY7XCWV9OzSt7BDAS2aStvUilAoVyr/DQgBUH/kc1hi2jbYTzVxF/QeuA9cnOUhkECv4MOFesyAq+pKa500iawukRniyt+t0A3BT/U8gubayQyoZABV8DkQ7+5Z5zWdnGLC7hQG8F58/ygOCXkF3aNgipDAMVveGq2Iq87JFqI3wwmjVrluxnCJ2RXdq0IaTSBlQYGrjihUMkjNzM60sv2837bMTTxhxKgSVRkUobUCmHjRa6GmENTz5OY/VgnMJYOW7Cq/pjwWxQilmIilTagoqrOvuc96rms8/DkcqooBGvgUgPE244HZ6105w5gl1XVyfbawkfEgJHtqMglZWABrUHZ4oNjAzfM/g4y//cWt2z+KrAUGoG2qg2RuAkeBFFSltFRSorBQ1rBzYWG1oxfHNnJBC3FE16CoPlc+KSjok4YhAEV/M/i6KljSpBKqsBDeSs7thig6uGT1IMeuFTVVz7e/OsDa4i5/RKxJGCMN4H1iMJtkhlHKCx3YD16LktfN/iCWiMYeOUwK5duwqP9ZzR5X2EjuRffqae3zMd0zNfhe83YXA0W54iFgdSGRdoeAdQX+xIY2UleFn1Py6kMm7QiU6Ax3SqTuYV7qXeUfU3bqQyCdChVqAzYFSM6nReOABeBS1VP5NAKpMEnePqjS6AgYDKCFnlNHgTtFb9ShKpTAN0ti14B1wByihZgdG8PNK1jepHGkhlmqDz/GVxARt3VQ5dEpoS3F6Ow13fBh9U7U4TqawlMAoXWXM1vHWUUgxwH4sNgL/s51S7aolUZgUYjCMYvwfzAcfClIErhUt85gKe8f5pVX9WkMosAkMyBvAT4HnwfcBB3bcBj7mbDhg3cBzwnFZeNteCaYDzXn8DvwHfA8+BZ0BqT2fVYVr8D0RODxP5H1MyAAAAAElFTkSuQmCC"/>'},t.getPngPauseButton=function(){return'<img src="data:image/png;base64,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"/>'},t.getPngReplayButton=function(){return'<img src="data:image/png;base64,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"/>'},t.getMissingImg=function(){
return"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgCcgJyAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/VOkopaAEpaKKAEpaKKAEopaKAEpaKSgApaSigBaSiigBaSiigApaSigAFFFFAC0npRRQAetFFFABR60UUAFFFFAB3o9KKKACjvRRQAUetFFABRRRQAtFJRQAUUUUAFLSUtACUtJRQAUtJRQAUUUUALSUUUALRSUGgApaSigBaKSigApaQ0UALRSUUAHelpKKAFpKKKAFpKKKAClpKKAClpKKAFpKWkoAKWkooAWikooAWkoooAWikooAKWkpaAEoopaAEoopaAExRS0UAJRRRQAUUUUAFFFFABRRRQACigUUAFFFFABRRRQAUUfjRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRmgA7UUZooAKKM0UAB6UUZozQAUUUZoAKDRRQAUUZooAKO9FGaACiiigAoFGaKACiijNABRRmigAFAoFFABRRRmgAPSijNFABRRmigAoNFGaACijNFABRRmjNABRRRQAUUUZoAKKM0UAFFGaKAFopKWgBKWkooAWiikoAWikpaAEooooAKKKKACiiigApaSloASiiigBaKKKAEooooAKKKKAFpKKKAFopKKAFoopKAFpKKKACiiigBaSlpKACj1o6CigAooooADRRRQAUUUtACd6KKDQAtJRRQAUUUd6ACg9KKO1ABRRRQAUUUUAFFFFABRRRQAUUUUAHalpKKACiiigA9KDR6UGgBaSlpKACiiigApaSigApaSloASlpKKAFooooAQ0tJS0AIKWkooAWiiigApKKWgBKKKKACiiigBaSiigBaSijNAAKKBRQAUUZozQAUUUUALSUUUAFFFFAC0lHFH40AFFFGaAFpKKKAFpKKKACijNFABRRmigAooooADRRRQAUUUUAFBozRQAUUUcUAFFFFABQelFBoAKKKM0AFFFFABRRRQAUUZozQAd6KKKAA0UUUAFFFGeaACg0ZozQAUUZooAKKKKACiijNABRRRmgAooooAKKM0UAFLRSdqACiiigBaSiigAooooAKWkooAKM0UGgAzRmiigAooNFABmgmiigAzRmiigAzRmiigAzRmiigAozR3o5oAM0ZoooAM0ZoooAM0ZoooAM0ZooNABmjNFFAB0ooNFABmjNFFABRmiigA6UZoooAKOtBooAM0Zoo70AFFFFABQTxRRQAZooooAO9GaKKACjNFFABRRRQAZozRRQAUZoooAKM0UUAFFFBoAM0UUUAGaM0c0UAFGaKKADNGaKKADNGaO1FABmiiigAopaSgAooooAKKKKACiijtQAGig0UAFFFFABRRRQAYoxQTRmgAoNHpR1oAKMUUCgA7UUdqKACiiigAxRRRQAdqO9HajvQAYooooAKKKKACiiigAooooADRQaKADFGKBRQAUCiigAooNFABR2oooAMUUc0UAGKKKKACjFFFABRiiigAxRRRQAYooo5oAKMUUUAFGKKKACjFFFAAaKDzRQAUUCigAxRRRQAdqKKKADFGKM0UABooooAO1GKO1FABiijmigBaSiigAooooAKKKKAFpKKKAA0UGigAooo70AFFFFAAaKKKACiig0AFFFFABRRRQAd6KO9FABRRRQAdqKO1FABRRxRQAUUUYoAKKKKACiijFAAaKDRQAUUUUAFFFFAAaKDRQAGiiigAo70UUAFFFFABRRRxQAUUYooAKKKKACiiigAooooAKKKKACiijigAooNFAAKKKO9ABRRxRQAUUYooAKKKKACijFFABR60dqO9AB+dFHHpRQAtJS0lABRRRQAd6KWkoAKKKD0oAKM0HpRQAUE0DpQaADNHaijtQAE0UGigAoNFBoAKKKKADtRR2ooAKKKPSgA60UUUAA6UUdqO9ABRmiloASig0UAFFFFABmilpKAA0UGigA6UdaBQaACgUUCgANFBooAM0UGjtQAUd6KKACiiigAooooAKKKWgBKKKKACiiigAzRRRQAUUUetABRRQKAA0UGigAooooAM0UtJQAUUdqO9ABmjNFLQAlFFBoAKM0dqKADNFLRQAUlLSUAFGKKDQAUUUUAFFFFABRQaO9ABR+FGaKACiijNABRRmjNAB0oooJoAKKKM0AFFGeKM0AHeijNFABRR1ozQAdqO9FGaACj8KM0UAFFFGaACijNFAB+FFGaM0AFFBozQAUfhRmjNABRRmgGgAo/Cg0ZoAKKDRmgAoozRmgAoozRQAUUZozQAUGjNFABRRRmgA/CijNGaACijNGaACijNGaACijNFAAaKKM0AFFFGc0AH4UUZooAKKM8UZoAKKKM0AFH4UUZoAKKM8UUAH4UUZooAMUUUUAFFFBoAKWiigBKKKD0oADR3oNHegA60UAUd6ACiijtQAUUUYoAKKKDQAAUUCgCgA7UUY4ooAKPSijHSgAooNFABR3oo70AHrRRRQAGig0UAFFFFABiiiigANFBpCcUAKKKRTntSngUAFApgfPanigAooNGKACig0dBQAUUY5ooAKDQKDQAUUYoxQAUUUUAFFGKPWgAooxRxQAUYoxRQACiij1oAKKMUYoADRQaAKACjvRiigAooxRQAUd6O1FABRRijFAAaKCKDQAdqKO1GKADFFGKKAFpKMe1FABRRRQAtJRRQAtJRR2oADR3oNHegAo70Ud6ACiiigAo4o7UUAFBooNABxQMUUUAHGKKO1J3oAWikpaADiiiigA4xR3pOxpe9ABRxRRQAUlLSUAHFLSetLQAcUlKeBzSA0AKaizuqU00YyR3oAUYAppcEkCsbxR4p07wpoF7rOpTm306zieaaUIz7UUZY4AJPA7CsH4a/F3wt8WLK4u/DGotqEEEhikZreSLDBQxGHUdmFAHcKuKcKYkyuRg5zTqAFNHFBpAc0ALRRR60AHGaO9JRQAvFFAooAKOKKPWgA4o4oooAKTilpKAF4o4opKAFo4oooAKOKTtRQAtAxRRQAGgYoNIKAFo70Ud6ADiiiigBDil70lFACmjiiigANHFJS0AHaik7UvegA49qKKKAD8aKKKACj1oooAKWkooAWk7UUUABooNFABRQKKACiiigAooNFABQaKKACij8KPwoASlo7dKKAEpaKO1ABRRR3oATtS0UUAFFFH4UAFJS0fhQAetFIaWgAppzjilb7px1pAwAyT060AJtJHpWF4n8V6T4J0q61fV72KwsogplnmbavLBRz25YD8aPF3jTTPBmkXOo6peW9laQozmS4kWNTgE4BYgEnHAzX4vft2ft66l8atbfw74ZupbDwxEXVngZopZQRA4yUmZGw0bduAaAG/t1ft2X3xx1afw/4emW18P256kRyCU7GRgGC55zXiv7Lv7T/iD9nvxlFqFrN5mmzSEXMAjjydxQM25gccLXiaTwvHIbjLNgtGY8El/9rPaokuEEbNj97npj5cf40Af0ifA746+GP2gPBFvq2kXkLwyIGmt0lDtHlnCgkAf3Ca9ViVigz1r+dX9l79qnxJ+zn4wtb62u5LnRXLG4sXeSROI5VQLGJEX70mefTNfuv8B/2hPDvx18IWusaLewSO5ZXtfMj85Np2klFdsAnpzQB6sM06mq4Zc/nQnU9xQA6iikzQAtJS0UAFFH4UUAFFFH4UAFFJS0AFJS0UAFJS/hR+FABRR+FFABSUvaigA60UfhR+FABRQaPwoASloFFABRR+FFABRRR36UAFFFFABRRRQAnNLRRQAUUfhRQAUUfjRQAUUUUALSUtJQAUUd6O1AAaKDR3oAKKKO9ABRRRQAUUUUAFFFFABRmijNABniiko70ALR6Ud6KACiiigA7UUnQUvegAzRmiigAoopKAA4NIzY6UMSKXPGaAG/N1rA8U+KbLwZ4d1HV9SlK2FlBJcTSbSxCIpZuByeAelO8X+NNK8GaBea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RQAGig0goAUUUCigAxRR+NFACUtJ2o70ALRiiigAopKX8aACikpe9ABj2FFH40UAFGaWkoAKDRQaACiiigAoNFFABR3oNHegA7UUUd6ACiiigANFFFAB6UHpRQaACiigdKADtRR2pKAFopKX0oAD0oopKAF7UUlHegBaKKKAA0UlFAC0UlLQAU3BznP4U6koAGQHqKYYiE2xts/WpDSUARC3DY8w+YR36UptkByow3rmpaKAIo45ATvk3j0xinJGqDAH606gUAGMUAGlNFAAaO1FJQAvejvRSd6AFoNAoNABR2NFFABRSUtABRR6UlAC0UUmKAFooooAKKSloAKKKKAA0CkNFAC0d6KO9ABRRRQAdqO9JiloADRRRQAGig0UAHaikpaACijH+cUUALSUtJQAYoxRRQAYooooAMUHpRQelABRRRQAUUUd6ACiijtQAGiiigAo7UUGgAFFAo7UAHaijtRQAUUUUAFBoNFABQaKKACiiigANFBooADRSUtABQKKKACig0UAAoNAoNABQKKBQAGiiigAo7UUUAFFHeigAoo7UGgAooooAKKKKACiij1oAKKKKAFpKKKADtR60UetABRRRQAGig0CgAooooAWkoooAO1HeijvQAUUGigAooNFAB2oo7UUALRSUUAFFLSUAFBoooAKKKKACjtRQelAAaO9BozQAUUCigAooooAO1FBooAKDRQaACiij8aADtSd6XtRQAlLSUtABSUtFACdqXvR2ooAKMUfjRQAUmKDS0AJ60tFFABikpaSgBTSUpooABRQKKAEopaKAENLQaPxoAKSlo7UAJRS/jR3oAKO1FFABRR+NFACUtFH40AFJS0lAC0lLRmgAoo/Gj8aAEoxSij1oAKKKKAA0lKaKACjvRR3oAKPWj8aKAExR3o60tAAaKPxooAKKSlNACUvejtR3oAMf5xRRn3FFAC0lLSUAFBooNABRS0lABmjtR3oPSgANFBooAKO9AooAKKKO1ABRQaKACiiigAoooHSgA7UUdqO9ABRRR6UAFJS0UAFFHajvQAUUUUAFJSmigAooooAKKKKAA0UGigAFFAoxQAUCigUABooooAKPWijtQAd6KO9FABQaKDQAUUUUAJS0d6KACiiigAooooAKKKKADtRQKKACiiigANFBooAKO9FB60AFFGKKAEpe9HaigAooooADRQaKACijtR3oAPzooooAWkoooAKDRRQAUUUUAFB6Ud6D0oAKO9FHegAzRmgdKO9ABRmijtQAZozR2ooAKKKDQAZozRRQAZozR2pKAF70ZpDS+lABmjNFFABRR2o70AGaKKKADNGaKSgBc0ZoooAM0ZoxSUALmjNBpMUALmjNAo7UAGaAaTFAoAXNGaDRQAZozRSdqAFzRmijHNABnijNFBoAM0UGj1oASlzRRQAUZooxQAZpM0uKKADNGaKO9ABmiiigAzRmiigAozQaBQAZo70elHegAzRmjFFABmjNJ2pe9ABmjNBoxQAZozSUtABnijNJjil70AGaKMUUALSUtJQAUUUUAFFGaKACjtRQelABRRRmgAooooAKKKO1ABRRRQAUHpRRQAUUUUAHajFHajmgBKWiigA7UUUc0AFFHNFABR+FFGaAA0Uc0c0AFFHeigA/CkxS0lAC4ooNFABRiiigAoFFFAARRQaKADFHaiigAxRRzRQAUUdKKACiijmgAoo5ozQAUUUUAFFFFABRRRQAUUdqKACiiigAooNHNABiiijrQAfhRRmigBKXHNFFABRiiigAoxRRQAUUc0UAGPYUUc0UAFFLSUAFBoooAWikooAKD0oooADRRRQACiijvQAdqO1FFAAaWkooAPSg0UUAFFFFAB2o70dqKADvR6UUUAB6Ud6KKADtR3oooAKKKKAA0UUUAFFFFAC0lFJQAtFFFAAKDRRQAUCiigANAoooAKO1FFAB3o70UUAHag0UUABo9aKKACiiigAFHrRRQAUUUfjQAUUUUAAo9aPxooAKKKKAA0UGigA9KO9FFABRRRQAdqO9FFABS0lFAAaDQfrRQAdjRRR3oAWik/OigBaSjFFABQaKDQAtJS0UAJ3oo70dqAA0d6DR3oAKO9Ao70AFFFHagAooooAKDRQaACjiiigBO1H4UvakoAO9LSd6WgApKWigBO1LR2ooAKKKKAEopTSUAHrS0UUAHFJS0lAC0lKaKACigUHpQAlFLQKAENLxQaKACkpaO1ACd6O9L3pO9AC0GgUHpQAUfhRR60AJS8UneloASj1pfSkoAXikpeaO1ABRRRQAgoopfWgBKXiiigANFBooAKO9FHegA4oo5ooATtRnmjtS0AFHFBooASlooNACUtHaigA4oo5ooAKKWkoAKKKKACilooASiig9KAA0UGigAHSigUGgA7UdqO1HagANFFFAAaM0UGgAooooAM8UZo7Ud6ACiiigANFBo70AGeKKO1HegAoopaAEooNFABmiiigAzRmlpBQAGjNB6UUAFFAoNABQKKBQAGjNBoFABR2oo7UAGaO9FFABRQOlBoAKKKKACiiigAzR60UUAGaAaO9FABRRRQAZo9aKKACiiigANGaDRQAUUCigAopaSgAozR0FHegAooooAKDQaKADPFFA6UUAGaKWigApKKKACijvQelABRS0UAJRRQelAAaKDR3oAKKKO9ABRRRQAUUGigAoNHpQaADNANFFABnikzS9qO9ACZpaO9HpQAZpKU9KKAEpc80dqO9ABmiiigAooNFABSUtFABmkpaQUAKaSlNFABmjNAoPegApBS0CgANGaQ0ooAM0UUdqADNJml70d6ADNGaKDQAUUUetACZ5pc0DrRmgAoo9KKADNJmlzzR2oAM0ZoooATtS0UUAFGaKKAA0ZoNFABRRR3oAM0UUUAJS5o7Ud6AAmjNFFABRmg0GgBKXNHajvQAZoozRQAtJRRQAUHvRRQAUUUUAFFFFAAelFBooABR3oFFABR2oz70UAFFBooAKDRRQAUcUUCgA7UlL2ooATvS0UUAHFJxS0d6AE7UvejtRQAcUUUUAJxRS0c0AJS0UUAFJS0c0ABFJSmigBBil7UCg0AJRS0CgBD1peKKKAEopaKAEope9FABRRRQAYFJS0UAJS8Ud6KADikpaKADvSUtFABRRRQAnaloooAKOKKKAA4pKU0c0AGKO9FFABRRRQAlHFLRQAGjFFFACUuBQaOaAE7UtFFABxRRRQAtJ60UUAHeg9KKKAFooooATvQelFFAAelHeiigAHSjvRRQAdqOwoooAD0paKKAE9KDRRQACgdKKKADtR3oooAO9HpRRQAHpR3oooAOxo70UUAHrS0UUAIaKKKAA96KKKAFptFFACmiiigAFB6UUUAFAoooADQKKKAA0djRRQAd6O9FFAAOlBoooADR60UUAHeloooAQdqPWiigA70DpRRQAtJ3oooAB0oPeiigA7UetFFAAaBRRQADtR3oooAWkoooAOwo70UUABpaKKAENBoooAOxo70UUALRRRQB/9k="},t}),define("ekhil/view/ASOMedia",["ekhil/view/AScreenObject","lib/Utils","lib/Base64Images"],function(e,t,i){var n=i.getPngPlayButton(),o=i.getPngPauseButton();return e.extend({layer:null,pauseLayer:null,pauseImage:null,media:null,timeoutIndex:null,chained:!1,init:function(e){this._super(e),this.source,this.event,this.div.css({pointerEvents:"auto"})},setXML:function(e){this._super(e);var t=e.querySelector("content");this.source=t.attributes.file.value,this.event=t.attributes.event.value;var i=e.querySelector("design");this.autostart=!!+i.attributes.autostart.value,this.anim=!!+i.attributes.anim.value,this.distantMedia=("video"==this.type||"audio"==this.type)&&(this.source.indexOf("http://")>-1||this.source.indexOf("https://")>-1)},load:function(e){this.div.css({backgroundColor:"transparent"}),this.media.css({width:"100%",height:"100%",position:"absolute",left:0,top:0}),this.loadPlayer(this.loadMedia.bind(this,e))},loadPlayer:function(e){this.design.loop&&this.media.attr("loop",""),e.apply()},loadMedia:function(e){if(""!==this.source){this.distantMedia||(this.source=this.player.getMediaPath(this.source));var t=!1;this.media.one("loadstart",function(){t||(e.call(),t=!0)}),this.media.one("error",function(){t||e.call()}),this.media.on("ended",this.onMediaEndEvent.bind(this)),this.media.attr("src",this.source)}else e.call()},show:function(){this._super(),!this.autostart||this.anim||this.chained||this.play()},play:function(e){if(this.autostart&&this.allowToPlay||!this.autostart){var t=this.media.get(0);!e&&t.currentTime&&(t.currentTime=0),t.play(),this.media.on("playing",function(){this.displayImgButton("pause")}.bind(this)),setTimeout(this.onTestIsWellLaunchedEvent(t),100)}},pause:function(e){var t=this.media.get(0);e&&t.currentTime&&(t.currentTime=0),this.displayImgButton("play"),t.pause()},displayImgButton:function(e){!this.showControls&&this.buttons&&(this.buttons.forEach(function(e){"play"!=e.actions[0].param.actionPlayer&&"pause"!=e.actions[0].param.actionPlayer||e.hide()}),this.buttons.forEach(function(t){e==t.actions[0].param.actionPlayer&&t.show()}))},chainStart:function(){this.play()},setVolume:function(e){this.media.get(0).volume=e},animate:function(){!this._isAnimBack&&this.autostart&&this.anim&&(0===this.design.anim_delay?this.play():this.timeoutIndex=setTimeout(t.relegate(this,this.play),1e3*this.design.anim_delay)),this._super()},onTestIsWellLaunchedEvent:function(e){if(e.paused){var i=this.getPlayLayer();i.off().on("click",function(e,t,i){i.stopPropagation(),t.play(),e.hide(),e.remove(),1==this.design.show_central_button&&this.activatePauseButton(t)}.bind(this,i,e)),i.show()}else 1==this.design.show_central_button&&(this.activatePauseButton(e),t.hasTouchEvent()||this.pauseImage.hide())},onMediaEndEvent:function(){var e=this.media.get(0);e.currentTime&&t.IE&&e.pause(),this.displayImgButton("play"),""!==this.event&&this.player.runCommand("SendEvent",this.event),$(this).trigger("ended")},getPlayLayer:function(){var e=this.media.get(0);if(!this.layer){this.layer=this.getLayerDiv();var t=$(n);t.attr("id","playButton"),t.css({verticalAlign:"middle",margin:"auto"}),this.layer.append(t)}return"video"==this.type?$(e).parent().append(this.layer):this.player.container.container.append(this.layer),this.layer.show(),this.layer},getPauseLayer:function(){var e=this.media.get(0);return this.pauseLayer||(this.pauseLayer=this.getLayerDiv(!0),t.hasTouchEvent()||(this.pauseImage=$(o),this.pauseImage.css({verticalAlign:"middle",margin:"auto"}),this.pauseLayer.append(this.pauseImage))),t.hasTouchEvent()||this.pauseLayer.hover(function(){this.pauseImage.show()}.bind(this),function(){this.pauseImage.hide()}.bind(this)),$(e).parent().append(this.pauseLayer),this.pauseLayer.show(),this.pauseLayer},activatePauseButton:function(e){var t=this.getPauseLayer();t.on("click",function(e,t,i){i.stopPropagation(),t.pause(),e.hide(),e.remove(),this.onTestIsWellLaunchedEvent(t)}.bind(this,t,e))},getLayerDiv:function(e){var t=this.media.get(0);if("video"==this.type)var i=$(t).css("width"),n=$(t).css("height"),o=$(t).css("margin-left"),r=$(t).css("margin-top");else var i=this.player.container.width+"px",n=this.player.container.height+"px",o=0,r=0;var s=$("<div>");return s.attr("id","play_pause_layer"),s.css({position:"absolute",width:i,height:n,marginLeft:o,marginTop:r,lineHeight:n,textAlign:"center",pointerEvents:"auto",cursor:"pointer"}),1!=this.design.show_central_button&&s.css({zIndex:1e3}),e||s.css({backgroundColor:"rgba(255, 255, 255, 0.7)"}),s}})}),define("ekhil/view/screenobject/SOArrow",["ekhil/view/AScreenObject","lib/Utils"],function(e,t){return e.extend({init:function(){this._super(),this.isInAuthorZone=!0,this.type="arrow",this.border={},this.points={},this.arrow={},this.border.color="#000000",this.border.bgcolor="#000000",this.border.width=1,this.arrow.width=0,this.arrow.height=0,this.points.pt1={x:0,y:0,arrow:!1},this.points.pt2={x:0,y:0,arrow:!1}},setXML:function(e){this._super(e);var t=e.querySelector("design");e.hasAttribute("ref")&&(this.isInAuthorZone=!1),this.border.color=$(t).attr("border_color"),this.border.bgcolor=$(t).attr("bgcolor"),this.border.width=$(t).attr("border_width"),this.arrow.width=$(t).attr("arrow_width"),this.arrow.height=$(t).attr("arrow_height"),this.line_style=$(t).attr("line_style");var i=$(t).find("point1");this.points.pt1.x=$(i).attr("x"),this.points.pt1.y=$(i).attr("y"),this.points.pt1.arrow="1"===$(i).attr("arrow");var n=$(t).find("point2");this.points.pt2.x=$(n).attr("x"),this.points.pt2.y=$(n).attr("y"),this.points.pt2.arrow="1"===$(n).attr("arrow")},load:function(e){this.draw(),this._super(e)},strokeLine:function(e,t){e.strokeStyle=this.border.color,e.fillStyle=this.border.bgcolor,e.lineWidth=t,e.fill(),e.stroke()},draw:function(){function e(e){return(""+e).replace(/[^-\d\.]/g,"")}var i=this.div.parent(),n=this.player.container.container,o=1;t.Edge&&"NOSCALE"==this.player.container.scalemode&&(o=t.getScale());var r="0px",s="0px";this.isInAuthorZone&&(r=-e(i.css("left"))+"px",s=-e(i.css("top"))+"px"),this.div.css({position:"absolute",pointerEvents:"none",left:r,top:s,width:$(n).width()+"px",height:$(n).height()+"px"});var a=parseInt(this.points.pt1.x),l=parseInt(this.points.pt1.y),c=parseInt(this.points.pt2.x),h=parseInt(this.points.pt2.y),u=c-a,d=h-l,g=Math.sqrt(u*u+d*d),f=parseInt(this.border.width),p=Math.min(this.arrow.width,g/2-f/2),m=parseInt(this.arrow.height),A=Math.sqrt(Math.pow(m,2)+Math.pow(p,2)),v=180/Math.PI*Math.asin(m/A),b=2*(f/Math.sin(Math.PI/180*(90-v))+m),y=Math.abs(g),S=f/2*(1/Math.sin(Math.PI/180*v)),w=y+S;if(g>0){var x;x=0!=u?180/Math.PI*Math.atan(d/u):l>h?-90:90,u<0&&(x+=180)}var C=$("<canvas />").attr({width:w,height:b}),k=C[0].getContext("2d");k.lineJoin="miter",k.translate(f/2*A/m,b/2),k.beginPath(),k.moveTo(0,0);var _,T;if(this.points.pt1.arrow?(k.lineTo(p,-m),k.lineTo(p,m),k.closePath(),this.strokeLine(k,f),_=p):_=0,this.points.pt2.arrow?(k.beginPath(),k.lineTo(g-2*p,0),k.lineTo(g-2*p,-m),k.lineTo(g-p,0),k.lineTo(g-2*p,m),k.closePath(),this.strokeLine(k,f),T=g-2*p):T=g,this.line_style&&"solid"!=this.line_style){switch(this.line_style){case"dotted":var R=1+f,E=1+f;break;case"dashed":var R=15+f,E=4+f;break;default:var R=1,E=1}k.setLineDash&&void 0!=k.setLineDash&&k.setLineDash([R,E])}k.moveTo(_,0),k.lineTo(T,0),this.strokeLine(k,f);var N=a-Math.cos(Math.PI/180*x)*S,L=l-b/2-Math.sin(Math.PI/180*x)*S;t.rotate(C,x,"0","translate("+N*o+"px, "+L*o+"px)"),$(C).css({position:"absolute"}),this.div.append(C)}})}),define("ekhil/view/screenobject/SOBalloon",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="balloon",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOBasket",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="basket",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOBasketButton",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="basketButton",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOBasket_item",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="basket_item",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOButton",["lib/Utils","ekhil/model/Runtime","ekhil/view/AScreenObject","lib/HTMLHelper","lib/TracesLog"],function(e,t,i,n,o){return i.extend({init:function(e){this._super(e),this.type="button",this.img_on=$("<div />"),this.img_off=$("<div />"),this.img_roll=$("<div />"),this.img_out=$("<div />"),this.img_blink=$("<div />"),this.clickFunction=this.onButtonClickEvent.bind(this),this.div.append(this.img_on),this.div.append(this.img_roll),this.div.append(this.img_out),this.div.append(this.img_blink),this.div.append(this.img_off),this.div.css("text-align","center"),this.img_off.hide(),this.img_roll.hide(),this.img_out.hide(),this.img_blink.hide(),this.actions=[],this.condition=null,this.currentActionIdx=0,this.resetAfterLastAction=!1,this.actionMode="",this.event="",this.rollOutActions=[],this.rollAction=!1,this.enabled=null,this.started=!1,this.listTimeout=[],this.tracesLog=o.getInstance()},setXML:function(e){this._super(e),""==this.design.file_out&&(this.design.file_out=this.design.file_on);var t=e.querySelector("content");this.setXmlContentParams(t)},setXmlContentParams:function(e){var t=null;if(e){t=e.querySelectorAll("action"),this.actions=[];for(var i=t.length,n=null,o=0;o<i;o++)n=t[o],this.actions.push({action:n.getAttribute("action"),param:n.getAttribute("param")||"",time:0==n.getAttribute("time")?.001:n.getAttribute("time"),mode:n.getAttribute("mode"),key:n.getAttribute("key"),event:n.getAttribute("event")});void 0!==this.actions[0]&&this.setResetAfterLastAction(0);var r=e.querySelector("condition");null!==r&&""!=r.textContent&&void 0!=r.textContent&&(this.condition=r.textContent)}return this},load:function(e){this.div.css({cursor:"pointer",backgroundColor:"transparent"}),this.loadImages([{element:this.img_on,path:this.design.file_on},{element:this.img_off,path:this.design.file_off},{element:this.img_roll,path:this.design.file_roll},{element:this.img_out,path:this.design.file_out},{element:this.img_blink,path:this.design.file_blink}],e)},loadImages:function(t,i){if(t.length>0){var o=t.shift();if(""!=o.path&&0!=o.path&&void 0!=o.path){var r=new n("image",{src:this.player.getMediaPath(o.path),w:this.design.width,h:this.design.height,streched:this.design.streched,proportional:this.design.proportional}).getElement();o.element.append(r),$(r).on("load",e.relegate(this,this.loadImages,t,i)),$(r).on("error",e.relegate(this,this.loadImages,t,i))}else this.tracesLog.saveHtmlGrekhilLogs("SOButton",this.tracesLog.LOADING_LOG,"SOButton.load: this.author_id: "+this.author_id+" No image to load for this button",this.tracesLog.STYLE_WARNING_LOGS),this.loadImages(t,i)}else i&&i.call()},show:function(e){this._super(e),this.stop(),this.initActions()},hide:function(e){for(this._super(e),$("#container").off("click");0!=this.listTimeout.length;)clearTimeout(this.listTimeout.pop())},initActions:function(){this.currentActionIdx=0,this.rollAction=!1,this.initNextAction()},reset:function(){this.stop(),void 0!==this.actions[this.currentActionIdx]&&this.setResetAfterLastAction(this.currentActionIdx),this.resetAfterLastAction&&this.initActions()},setResetAfterLastAction:function(e){this.resetAfterLastAction="autostart_time"!=this.actions[e].mode&&"after_time"!=this.actions[e].mode},start:function(){(this.enabled||this.started)&&(this.started=!0,this.execute())},stop:function(){this.started=!1},initNextAction:function(){if(this.currentActionIdx>=this.actions.length)this.reset();else switch(this.actionMode=this.actions[this.currentActionIdx].mode,this.actionMode){case"roll":this.rollAction=!1,this.stop();break;case"autostart_time":case"after_time":this.autoStartAction();break;case"mouse":this.stop(),$("#container").off("click"),$("#container").one("click",this.clickFunction);break;case"event":this.stop(),this.event=this.actions[this.currentActionIdx].event;break;case"button":default:this.stop(),this.actionMode="button",this.div.off("click"),this.div.one("click",this.clickFunction),this.rollAction=!1}},execute:function(){if(this.started||!0===this.enabled){void 0!=this.actions[this.currentActionIdx]?(this.rollAction&&this.rollOutActions.push(this.currentActionIdx),this.executeAction(this.currentActionIdx),this.started&&(this.currentActionIdx++,this.initNextAction())):this.reset()}},executeAction:function(e){return this.player.runCommand("Execute",this.actions[e].action,this.actions[e].param),e},switchStateImg:function(e){
for(var t=[this.img_on,this.img_roll,this.img_off,this.img_out,this.img_blink],i=0;i<t.length;i++){var n=t[i];n===e?n.show():n.hide()}},enable:function(e){this.enabled!=e&&(this.enabled=e,this.enabled?("button"==this.actionMode&&(this.div.off("click"),this.div.one("click",this.clickFunction)),this.div.on("mouseenter",this.onButtonRollInEvent.bind(this)),this.div.on("mouseleave",this.onButtonRollOutEvent.bind(this)),this.div.off("touchstart"),this.div.on("touchstart",this.onButtonTouchStartEvent.bind(this)),this.div.off("touchend"),this.div.on("touchend",this.onButtonTouchEndEvent.bind(this)),this.switchStateImg(this.img_on),this.div.css({pointerEvents:"auto"})):(this.div.off("click"),this.div.off("mouseenter"),this.div.off("mouseleave"),this.div.off("touchstart"),this.div.off("touchend"),this.switchStateImg(this.img_off),this.div.css({pointerEvents:"none"})))},autoStartAction:function(){0==this.actions[this.currentActionIdx].time?this.start():this.listTimeout.push(setTimeout(this.start.bind(this),1e3*this.actions[this.currentActionIdx].time))},sendEvent:function(e){this.enabled&&"event"==this.actionMode&&this.event===e&&this.start()},onButtonClickEvent:function(t){this.enabled&&("button"!=this.actionMode&&"mouse"!=this.actionMode||(t&&!e.isMobile()&&t.stopPropagation(),this.start()))},onButtonTouchStartEvent:function(e){this.enabled&&(e&&e.preventDefault(),this.onButtonRollInEvent())},onButtonTouchEndEvent:function(e){this.enabled&&(e&&e.preventDefault(),this.onButtonRollOutEvent(),this.onButtonClickEvent())},onButtonRollInEvent:function(){this.enabled&&(this.switchStateImg(this.img_roll),"roll"==this.actionMode&&(this.rollAction=!0,this.start()))},onButtonRollOutEvent:function(){if(this.enabled){this.switchStateImg(this.img_out),"roll"==this.actionMode&&(this.rollAction=!1);for(var e=this.rollOutActions.length,t=0;t<e;t++)this.executeAction(this.rollOutActions.pop())}}})}),define("ekhil/view/screenobject/SOComponent",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="component",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("lib/TextHelper",["lib/Utils"],function(e){var t={face:function(e){return{fontFamily:e+", Arial"}},size:function(e){return{fontSize:e+"px"}},align:function(e){return{textAlign:e}},leftmargin:function(e){return{marginLeft:e+"px"}},rightmargin:function(e){return{marginRight:e+"px"}},bgcolor:function(e){return{backgroundColor:e}},fontcolor:function(e){return{color:e}},alpha:function(e){return{opacity:e/100}},bordercolor:function(e){return{borderColor:e}},border:function(e){var t="",i="";return+e&&(t="solid",i="1px"),{borderStyle:t,borderWidth:i}},underline:function(e){return{textDecoration:+e?"underline":"none"}},italic:function(e){return{fontStyle:+e?"italic":"normal"}},bold:function(e){return{fontWeight:+e?"bold":"normal"}},fontsize:function(e){return{fontSize:e+"px"}},font:function(e){return{fontFamily:e+", Arial"}},transparent:function(e){return+e?{backgroundColor:"none"}:{}},v_padding:function(e){return{paddingTop:e+"px",paddingBottom:e+"px"}},h_padding:function(e){return{paddingLeft:e+"px",paddingRight:e+"px"}},width:function(e){return{width:e+"px"}},height:function(e){return{height:e+"px"}},top:function(e){return{top:e+"px"}},left:function(e){return{left:e+"px"}}},i=["html","body","#text","textformat","font","p"];return{LINE_HEIGHT_FACTOR:"1.14",replaceTag:function(e){switch(e){case"font":case"#text":return"span";default:return"div"}},getLinkNode:function(e,t,i,n){if(void 0!==t.attributes&&null!==t.attributes&&void 0!==t.attributes.href&&null!==t.attributes.href){var o=t.attributes.href.value;if(/^http/.test(o))e.href=o,e.target="_blank";else if(/^page/.test(o)){var r=o.split("/").reverse()[0];e.href="#","function"==typeof n&&$(e).bind("click",function(){n(r)})}else if(/^mailto/.test(o))e.href=o,e.target="_blank";else if(i){var s=i(o);""!=s&&(e.href=s,e.target="_blank")}$(e).css("position","relative"),$(e).css("pointer-events","auto")}return e},getListStyle:function(t,i,n,o,r){var s=1,a=$(t).closest("textformat"),l=0;a&&a.length>0&&(a[0].hasAttribute("leftmargin")&&(l=a[0].getAttribute("leftmargin")),s=Math.floor(l/24)+1>8?8:Math.floor(l/24)+1);var c="",h=i.attributes["img_level_"+s];h&&""!==h.value&&o&&(c=o(h.value));var u=+e.removeCSSUnit($("span",n).css("fontSize"));if(r){var d=$("span",n).css("color"),g=u;$(n).css({content:"•",fontSize:g+"px",color:d})}else if(""===c&&(c="../_shared/medias/list_level_"+s+".png",u=Math.round(.4*u)),""!=c){var f=new Image;f.src=c,$(f).on("load",function(){var e=document.createElement("canvas"),t=u/f.height*f.width;e.height=u,e.width=t,e.getContext("2d").drawImage(f,0,0,t,u),$(n).css({listStyleImage:"url("+e.toDataURL()+")"})})}},checkFormatTagname:function(e){var t=new RegExp("<|>|/","g");return t.test(e)&&(e=e.replace(t,"")),e},checkFormatSpace:function(e){if(new RegExp("^ {2,}").test(e.textContent)){for(var t="<span class='tabulation'>",i=e.textContent.match("^ {2,}")[0].length,n=0;n<i;n++)t+="&nbsp;";t+="</span>",e.textContent=t+e.textContent}},parseXHTMLNode:function(n,o,r,s,a){var l=-1!==$.inArray(n.nodeName.toLowerCase(),i)?this.replaceTag(n.nodeName.toLowerCase()):n.nodeName.toLowerCase();l=this.checkFormatTagname(l);var c=document.createElement(l),h={},u=n.attributes;if(void 0!==u&&null!==u){for(var d=u.length,g=0;g<d;g++)void 0!==t[u[g].name]&&"function"==typeof t[u[g].name]?h=$.extend(t[u[g].name](u[g].value),h):h[u[g].name]=u[g].value;$(c).css(h)}var f=n.childNodes,p=f.length;if(p>0)for(var g=0;g<p;g++)c.appendChild(this.parseXHTMLNode(f[g],o,r,s,a));else c.innerHTML=e.convertNodeHtml(n.textContent),this.checkFormatSpace(n);return"li"===l?this.getListStyle(n,o,c,r,a):"a"===l&&o.attributes.hyperlink_standard&&"0"===o.attributes.hyperlink_standard.value&&($(c).css({color:o.attributes.hyperlink_color.value,textDecoration:"none"}),$(c).on("mouseover",function(){$(c).css("color",o.attributes.hyperlink_color_roll.value)}),$(c).on("mouseout",function(){$(c).css("color",o.attributes.hyperlink_color.value)})),c=this.getLinkNode(c,n,r,s)},parseDesignNode:function(e){var i={};if(void 0!=e)if(e.attributes)for(var n=e.attributes,o=n.length,r=!1,s=0;s<o;s++){var a=n[s];"transparent"===a.name&&"1"==a.value&&(r=!0),"bgcolor"===a.name&&r||"function"==typeof t[a.name]&&(i=$.extend(i,t[a.name](a.value)))}else{var r=!1;for(var l in e){var c=e[l];"transparent"===l&&"1"==c&&(r=!0),"bgcolor"===l&&r||"function"==typeof t[l]&&(i=$.extend(i,t[l](c)))}}return i},createTextPartition:function(e){for(var t,i=new RegExp('<a href="([file|http|page]+)[^"]*".*?>.*?</a>',"gi"),n=[],o=0;null!==(t=i.exec(e));){if(o<t.index){var r={type:"txt",begin:o,end:t.index};n.push(r)}o=i.lastIndex;var s={type:t[1],link:t[0],begin:t.index,end:i.lastIndex};n.push(s)}if(o<e.length-1){var r={type:"txt",begin:o,end:e.length};n.push(r)}return n},interpretItem:function(e,t,i,n,o){switch(t.type){case"file":var r=new RegExp('<a href="file://([^"]*)".*?>(.*?)</a>',"gi"),s=r.exec(e);if(s[0]&&s[1]&&s[2]){var a=document.createElement("a");if(n){var l=n(s[1]);""!=l&&(a.href=l,a.target="_blank",a.innerHTML=s[2])}else console.log("Invalid file link");$(a).css({pointerEvents:"auto"}),i.append(a)}break;case"http":var r=new RegExp('<a href="([http|https]+://[^"]*)".*?>(.*?)</a>',"gi"),s=r.exec(e);if(s[0]&&s[1]&&s[2]){var a=document.createElement("a");a.target="_blank",a.href=s[1],a.innerHTML=s[2],$(a).css({pointerEvents:"auto"}),i.append(a)}break;case"page":var r=new RegExp('<a href="page://([^"]*)".*?>(.*?)</a>',"gi"),s=r.exec(e);if(s[0]&&s[1]&&s[2]){var a=document.createElement("a"),c=s[1];a.href="#",a.innerHTML=s[2],$(a).css({pointerEvents:"auto"}),$(a).data("index",c),i.append(a),"function"==typeof o&&$(a).bind("click",function(){var e=$(this).data("index");o(e)})}break;case"txt":i.get(0).insertAdjacentHTML("beforeend",e);break;default:console.log("Unexpected type")}},interpretText:function(e,t,i,n){var o=this.createTextPartition(e);if(o.length>1)for(var r=0;r<o.length;r++){var s=e.substring(o[r].begin,o[r].end);this.interpretItem(s,o[r],t,i,n)}else t.html(e)},reformatHtml:function(e){return e.split("<li>").join("<ul><li>").split("</li>").join("</li></ul>").split("<p").join("<div").split("</p>").join("</div>").split("<body").join("<div").split("</body>").join("</div>")},parseTextNode:function(e,t,i,n,o,r){var s,a,l=void 0!==e.attributes.format&&"xhtml"===e.attributes.format.value?"xhtml":"txt";t.attributes.bgcolor&&(a=t.attributes.bgcolor.value);var c=this.parseDesignNode(t);if("xhtml"===l){var h=e.textContent;h=this.reformatHtml(h);var u=document.createElement("div");u.innerHTML=h;var d=this.parseXHTMLNode(u,t,i,n,o);d=this.cleanText(d),s=$(d);var g=d.querySelectorAll("ul");$(g).css({margin:0}),s.css({"font-size":"10px"}),e.textContent.indexOf("bgcolor")>-1&&e.textContent.match(/bgcolor="(#[0-9A-F]+)"/)&&(a=e.textContent.match(/bgcolor="(#[0-9A-F]+)"/)[1])}else s=$("<div/>").css(c).css("border","none"),this.interpretText(e.textContent,s,i,n);return t.attributes.width&&t.attributes.height?s.css({width:t.attributes.width.value,height:t.attributes.height.value,boxSizing:"border-box",padding:"2px"}):s.css({width:"100%",height:r||"100%",boxSizing:"border-box",padding:"2px"}),t.hasAttribute("transparent")&&"0"===t.getAttribute("transparent")&&s.css({backgroundColor:a}),t.hasAttribute("border")&&"1"===t.getAttribute("border")&&t.hasAttribute("bordercolor")&&s.css({border:"solid 1px",borderColor:t.getAttribute("bordercolor")}),t.hasAttribute("vertical_centred")&&"1"===t.getAttribute("vertical_centred")&&$(s.get(0).children).wrapAll("<div />"),"1"===t.getAttribute("transparent")&&s.children("div").css("background-color","rgba(0, 0, 0, 0)"),s},getEquivalence:function(e,i){if("function"==typeof t[e])return t[e](i)},cleanText:function(e){for(var t=e.querySelectorAll("br"),i=t.length,n=0;n<i;n++){var o=t[n].previousSibling;if(o&&"div"===o.tagName.toLowerCase()&&""!==o.textContent)t[n].parentNode.removeChild(t[n]);else{if(!t[n].nextSibling){var r=document.createTextNode(" ");t[n].parentNode.appendChild(r)}}}return e},calculateTextSize:function(e,t){t=t||{},t.font=t.font||"Arial",t.fontSize=t.fontSize||"12px",t.fontStyle=t.fontStyle||"normal",t.fontWeight=t.fontWeight||"normal";var i={},n=document.createElement("div"),o=document.createTextNode(e);return n.appendChild(o),n.style.fontFamily=t.font,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.position="absolute",n.style.visibility="hidden",n.style.left="-999px",n.style.top="-999px",n.style.width="auto",n.style.height="auto",n.style.lineHeight=n.style.fontSize,document.body.appendChild(n),i.width=n.offsetWidth,i.height=n.offsetHeight,n.parentNode.removeChild(n),i},hasVariables:function(e){return/\[\!([A-Z]+)\!\]/g.test(e)},replaceVariables:function(e,t){if(this.hasVariables(e)){var i=e;for(var n in t)var i=i.split("[!"+n+"!]").join(t[n]);return i}return e}}}),define("ekhil/view/screenobject/SOCourseview",["ekhil/view/AScreenObject","ekhil/model/Course","lib/Utils","lib/TextHelper","ekhil/controller/helper/NavigationHelper"],function(e,t,i,n,o){return e.extend({init:function(){this._super(),this.courseViewDesign={},this.type="courseview",this.player=require("ekhil/EkhilPlayer").getInstance(),this.course=this.player.getModel(t.MODEL_ID),this.navigationHelper=new o},setXML:function(e){this._super(e),e.querySelector("content>level0>item_on")&&(this.listUrl=this.player.getMediaPath(e.querySelector("content>level0>item_on").attributes.seen_file_false.value));for(var t=e.querySelector("design"),i=e.querySelectorAll("content>*"),n=i.length,o=0;o<n;o++){var r=i[o];if(/^level/.test(r.nodeName)){var s=+r.nodeName.replace("level","");+r.attributes.default_style.value?this.courseViewDesign[s]=this.getDesignParams(t):this.courseViewDesign[s]=this.getDesignParams(r),this.seen_color=this.courseViewDesign[s].item_results.masterycolor,this.courseViewDesign.length=o+1}}this.options=e.querySelector("content")},load:function(e){var t=$('<div style="display: table"/>').append(this.getListStructure(void 0));this.div.html(t),$("td",t).css({verticalAlign:"middle"}),this.div.find(".enableLink").each(this.activateLinks.bind(this)),$(t).find(".parent").each(this.applyParentDesign.bind(this)),"1"==this.design.scroll_bar_sommaire?this.div.addClass("scrollable"):this.div.css({overflow:"hidden"}),this.hideDisabledIndexes(),this.collapseList(),e&&e.call()},applyParentDesign:function(e,t){var i=$(t).data("level");$(t).find("tr.children[data-level="+i+"]").each(this.applyDefaultDesign.bind(this,i))},applyDefaultDesign:function(e,t,i){var n=void 0!==this.courseViewDesign[e]?this.courseViewDesign[e]:this.courseViewDesign[this.courseViewDesign.length-1],o=n.rows.indent*e;$(i).find(".indent").each(function(){$(this).css({width:o+"px"})}),$(i).find(".bullet").each(function(){var e=new Image;e.src=n.item_on.seen_file_false;var t=this;$(t).append(e)}),this.applyStyle(i)},getLevel:function(e){return $(e).parent(".parent").data("level")},setIndex:function(e){var t=this.div.get(0).querySelector('[data-node="'+e+'"]');$(t).data("level");$(".active").each(this.removeActive.bind(this)),$(t).addClass("active"),this.applyStyle(t,!0),$(t).parents("tr:first").show().addClass("open")},setHistory:function(e){this.history=e,$("[data-node]",this.div).each(this.setSeenNode.bind(this))},setSeenNode:function(e,t){var i=$(t).data("node").toString();this.navigationHelper.isSeenNode(i)&&($(t).addClass("seen"),this.applyStyle(t))},removeActive:function(e,t){$(t).removeClass("active"),this.applyStyle(t)},resizeSeenColumn:function(e,t){if(this.courseViewDesign[e]&&this.courseViewDesign[e].column_seen){var i=this.courseViewDesign[e].column_seen.col_width,n=$(t).find("img").width(),o=Math.max(i,n);$(t).find(".bullet").css("width",o+"px")}},applyStyle:function(e,t){var n,o,r,s,a,l=$(e).data("level");if(void 0!==this.courseViewDesign[l]){var c=i.hex2RGBA(this.seen_color);n=this.courseViewDesign[l]}else n=this.courseViewDesign[this.courseViewDesign.length-1];t?(r=n.item_selected,s=n.item_roll):$(e).hasClass("enableLink")?(r=n.item_on,s=n.item_roll):(r=n.item_off,s=n.item_off),$(">.courseviewCell",e).css({padding:n.rows.row_padding+"px 0",paddingBottom:1*n.rows.row_spacing+1*n.rows.row_padding+"px"}),$(">.title, >.title>a",e).css(r),$(e).hasClass("seen")||t?(a=r.seen_file_true,$(">.title, >.title>a",e).css("color",c)):a=r.seen_file_false,$(e).find("img").attr("src",a).on("load",this.resizeSeenColumn.bind(this,l,e)),$(">.title>a",e).bind({mouseover:function(){$(this).css(s),o=$(e).hasClass("seen")||t?s.seen_file_true:s.seen_file_false,$(e).find("img").attr("src",o)},mouseout:function(){$(this).css(r),$(e).hasClass("seen")||t?(o=r.seen_file_true,$(">.title, >.title>a",e).css("color",c)):o=r.seen_file_false,$(e).find("img").attr("src",o)}})},collapseList:function(){var e=this.courseViewDesign,t=this.course;this.div.find(".children").each(function(){var i=$(this).data("level"),n=$(this).data("node"),o=void 0!==e[i]?e[i]:e[e.length-1];("collapse"==o.rows.expanded||1!=n&&"auto"==o.rows.expanded&&t.isTheme(n))&&$(this).next("tr:not(.children)").hide()})},activateLinks:function(e,t){var i=$(t).data("node"),n=$("<a/>");n.attr("href","#");var o=this.course.getEnableIndexChildrenList(i),r=o.length;this.course.isTheme(i)&&r>0?n.click(this.onClickThemeEvent.bind(this,t)):n.click({nodeIndex:i},function(e){e.preventDefault(),e.stopPropagation(),this.player.runCommand("Execute","gotopage",e.data.nodeIndex)}.bind(this)),$(".title>span",t).wrap(n)},disableIndexesInLook:function(e){var t=this.options.attributes.seen.value,i=[];switch(t){case"all":return e;case"true_only":for(var n=0;n<e.length;n++)this.navigationHelper.isSeenNode(e[n])&&i.push(e[n]);break;case"false_only":for(var n=0;n<e.length;n++)this.navigationHelper.isSeenNode(e[n])||i.push(e[n])}return i},onClickThemeEvent:function(e,t){if(t.preventDefault(),t.stopPropagation(),$(e).next("tr:not(.children)").length){var i=$(e).next("tr:not(.children)"),n=!0;if(i.hasClass("open"))i.hide().removeClass("open"),n=!1;else{var o=!0;$(e).parents("tr:not(.children)").each(function(){$(this).hasClass("open")&&(o=!1)}),o&&$(".open").each(this.hideTheme.bind(this)),i.show().addClass("open")}this.applyStyle(e,n)}else this.player.runCommand("GoToPage",nodeIndex)},hideTheme:function(e,t){$(t).hide().removeClass("open");var i=$(t).prev(".children");this.applyStyle(i)},hideDisabledIndexes:function(){var e=!1;this.div.find(".children").each(function(){$(this).hasClass("enableIndex")?e=!0:$(this).next("tr:not(.children)").length||$(this).hide()}),e||$(this).hasClass("enableIndex")||($(this).hide(),$(this).parent("li").hasClass("enableIndex")||$(this).parent("li").hide())},getDesignParams:function(e){var t={},o=this.player,r={rows:i.parseXMLAttributes(e.querySelector("rows")),item_on:i.parseXMLAttributes(e.querySelector("item_on")),item_roll:i.parseXMLAttributes(e.querySelector("item_roll")),item_off:i.parseXMLAttributes(e.querySelector("item_off")),item_selected:i.parseXMLAttributes(e.querySelector("item_selected")),item_results:i.parseXMLAttributes(e.querySelector("item_results")),column_seen:i.parseXMLAttributes(e.querySelector("column_seen"))};for(var s in r){void 0===t[s]&&(t[s]={});for(var a in r[s])if(/file/.test(a))t[s][a]=o.getMediaPath(r[s][a]);else if("bgalpha"===a||"bgcolor"===a){var l=1==this.design.transparent;if(void 0!==t[s].bgcolor){var c=i.hex2RGBA(t[s].bgcolor,l?0:r[s][a]/100);t[s].backgroundColor=c}else if(void 0!==t[s].bgalpha){var c=i.hex2RGBA(r[s][a],l?0:t[s].bgalpha/100);t[s].backgroundColor=c}else t[s][a]=r[s][a]}else void 0!==n.getEquivalence(a,r[s][a])?$.extend(t[s],n.getEquivalence(a,r[s][a])):t[s][a]=r[s][a]}return t},getListStructure:function(e,t){t=t||0;var i=this.course.getChildrenList(e,!0),n=i.length,o="";if(n)for(var r=0;r<n;r++){var s=i[r],a=this.course.getMetadata(s),l=this.course.getNodeNavigation(s),c=this.course.isTheme(s),h=[];if(l.disableLink||h.push("enableLink"),l.disableIndex||c){if(c&&!l.disableIndex){var u=this.getListStructure(s,t+1);o+=this.createEntry(t,s,a.title,h),o+='<tr><td class="courseviewCell" colspan="3">'+u+"</td></tr>"}}else h.push("enableIndex"),o+=this.createEntry(t,s,a.title,h)}return""!==o&&(o='<table class="parent" data-level="'+t+'">'+o+"</table>"),o},createEntry:function(e,t,i,n){var o=void 0!==this.courseViewDesign[e]?this.courseViewDesign[e]:this.courseViewDesign[this.courseViewDesign.length-1],r="";return"1"===o.rows.show_index&&(r=""!==i?t+" - ":t+" "),n.push("children"),buffer='<tr data-level="'+e+'" data-node="'+t+'" id="node_'+t.replace(".","_")+'" class="'+n.join(" ")+'"><td class="indent courseviewCell"></td><td class="bullet courseviewCell"></td><td class="title courseviewCell"><span>'+r+i+"</span></td>",buffer+="</tr>",buffer}})}),define("ekhil/view/screenobject/SOEldar",["ekhil/view/AScreenObject","lib/Utils"],function(e,t){return e.extend({eldar:null,screenWidth:0,screenHeight:0,init:function(){this._super(),this.type="eldar",this.eldar={},this.xml=null},setXML:function(e){this._super(e),this.id=e.querySelector("elfe>content").getAttribute("type"),this.id||console.error("Invalid xml content for the activity:",e),this.xml=e},load:function(e){require(["eldar/"+this.id],this.eldarFileLoaded.bind(this,e))},show:function(e){this._super(e),this.eldar.show()},eldarFileLoaded:function(e,t){this.eldar=new t(this.xml,this.screenWidth,this.screenHeight),this.eldar.onEldarLoaded(this.div,e)},setScreenSize:function(e,t){this.screenWidth=e,this.screenHeight=t},hide:function(){this._super(),this.eldar.isCorrected=!1}})}),define("ekhil/view/screenobject/SOEllipse",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="ellipse",this.design={},this.design.transparent=!1,this.design.alpha=100,this.design.bgcolor="#000000",this.design.border=!0,this.design.borderColor="#000000",this.design.borderWidth=1},setXML:function(e){this._super(e);var t=e.querySelector("design");this.design.transparent="1"===t.getAttribute("transparent"),this.design.alpha=t.getAttribute("alpha"),this.design.bgcolor=t.getAttribute("bgcolor"),this.design.border="1"===t.getAttribute("border"),this.design.borderColor=t.getAttribute("border_color"),this.design.borderWidth=t.getAttribute("border_width"),this.width=t.getAttribute("width"),this.height=t.getAttribute("height")},load:function(e){var t=$("<canvas />").attr({width:this.width,height:this.height}).appendTo(this.div);this.drawEllipse(t.get(0).getContext("2d"),0,0,this.width,this.height,this.design.transparent,this.design.alpha,this.design.bgcolor,this.design.border,this.design.borderColor,this.design.borderWidth),$(t).css({width:"100%",height:"100%",display:"block"}),e.call()},drawEllipse:function(e,t,i,n,o,r,s,a,l,c,h){var u=t+h/2,d=i+h/2,g=n-h,f=o-h;l||(h=0,c=a),e.fillStyle=a,e.strokeStyle=c,e.lineWidth=h;var p=g/2*.5522848,m=f/2*.5522848,A=u+g,v=d+f,b=u+g/2,y=d+f/2;e.moveTo(u,y),e.bezierCurveTo(u,y-m,b-p,d,b,d),e.bezierCurveTo(b+p,d,A,y-m,A,y),e.bezierCurveTo(A,y+m,b+p,v,b,v),e.bezierCurveTo(b-p,v,u,y+m,u,y),e.closePath(),e.stroke(),r||e.fill()}})}),define("ekhil/view/screenobject/SOGraza",["ekhil/view/AScreenObject","ekhil/model/Runtime","graza/GrazaPlayer"],function(e,t,i){return e.extend({moviePath:null,loaded:!1,init:function(){this._super(),this.type="graza"},setXML:function(e){this._super(e);var t=e.querySelector("content");t&&t.attributes.file&&(this.moviePath=this.player.getMediaPath(t.attributes.file.value));var i=e.querySelector("design");if(i&&i.hasAttribute("caption")){var n=i.getAttribute("caption");this.movieCaption=""!=n?n:e.getAttribute("author_id")}},load:function(e){if(this.loaded||null==this.moviePath)e.call();else{var n=this.player.getModel(t.MODEL_ID);this.graza=new i(this.moviePath,this.div.get(0),this.player,n,this.onGrazaLoadedEvent.bind(this,e))}},onGrazaLoadedEvent:function(e){this.loaded=!0,e.call()},show:function(e){this._super(e);var i=this.graza.getSize(),n=.5*(this.design.width-i.width),o=.5*(this.design.height-i.height),r=this.design.width/i.width,s=this.design.height/i.height;if("1"==this.design.proportional&&(r>s?r=s:s=r),"0"==this.design.streched&&(r>1&&(r=1),s>1&&(s=1)),$(this.div).css({transform:"scale("+r+", "+s+") translate("+n+"px, "+o+"px)",transformOrigin:"50% 50% 0"}),this.div.css({position:"absolute"}),1==e){var a=this.graza.getModel(t.MODEL_ID);!0!==a.isPlaying&&!0!==a.isTechnicalPause||this.graza.runCommand("ExecuteAction","play")}else this.graza.runCommand("ExecuteAction","gotostart")},hide:function(e){if(this._shown){if(1==e){1==this.graza.getModel(t.MODEL_ID).isPlaying&&this.graza.runCommand("ExecuteAction","pause")}else this.graza.runCommand("ExecuteAction","stop");this._super(e)}}})}),define("ekhil/view/screenobject/SOImage",["ekhil/view/ASOImage"],function(e){return e.extend({init:function(){this._super(),this.type="image"}})}),define("ekhil/view/screenobject/SOFlash",["ekhil/view/AScreenObject","ekhil/view/screenobject/SOGraza","ekhil/view/screenobject/SOImage"],function(e,t,i){return e.extend({init:function(){this._super()},setXML:function(e){var n=e.querySelector("content"),o=null;if(n&&n.attributes.file){"xml"===n.attributes.file.value.split(".").pop()&&(o=new t)}o||(o=new i),o.setXML(e),$.extend(this,o)}})}),define("ekhil/view/screenobject/SOGlossary",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="glossary",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOIframe",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({HTMLElement:null,globalCss:{},content:null,init:function(){this._super(),this.type="iframe",this.isCodeIE=!1,this.source="",this.iframe=$("<iframe/>"),this.div.append(this.iframe)},setXML:function(e){this._super(e),this.content=e.querySelector("content")},applyCss:function(){this.iframe.css({width:this.design.width,height:this.design.height,border:0,position:"absolute",left:0,top:0,pointerEvents:"auto"})},load:function(e){this.applyCss();switch(this.content.getAttribute("type")){case"file":this.source=this.player.getMediaPath(this.content.getAttribute("file")),!0;break;case"uri":this.source=i.getDecodedString(this.content.getAttribute("file")),!0;break;case"code":this.content&&this.content.firstChild?i.IE?(this.source=this.content.firstChild.nodeValue,this.isCodeIE=!0):this.source="data:text/html;base64,"+window.btoa(this.content.firstChild.nodeValue):this.source=null}this.isCodeIE?(this.iframe.remove(),this.iframe=$("<div/>"),this.applyCss(),this.iframe.html(this.source),this.div.html(this.iframe),e()):(this.iframe.one("load",this.onIframeLoaded.bind(this,e)),this.iframe.one("error",this.onIframeLoaded.bind(this,e)),this.iframe.attr("src",null))},onIframeLoaded:function(e,t){this.iframe.get(0).onload=null,e()},show:function(){this._super(),this.isCodeIE||this.iframe.attr("src",this.source)},hide:function(){this._super(),this.isCodeIE||this.iframe.attr("src",null)}})}),define("ekhil/view/screenobject/SOIndex",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({HTMLElement:null,globalCss:{},init:function(){this._super(),this.type="index",this.text1=$("<span />"),this.text2=$("<span />"),this.text3=$("<span />")},setXML:function(e){this._super(e),this.designNode=e.querySelector("design"),this.separatorNode=e.querySelector("separator"),this.totalNode=e.querySelector("total")},load:function(e){this.div.css(t.parseDesignNode(this.designNode)),this.text1.css(t.parseDesignNode(this.designNode)),this.text1.css({position:"absolute",left:this.designNode.getAttribute("gaucheText")+"px",top:this.designNode.getAttribute("hautText")+"px",width:this.designNode.getAttribute("largeurText")+"px",height:this.designNode.getAttribute("hauteurText")+"px"}),this.div.append(this.text1),this.design.showtotal&&(this.text2.text(this.separatorNode.getAttribute("separator")),this.text2.css(t.parseDesignNode(this.separatorNode)),this.text2.css({position:"absolute",left:this.separatorNode.getAttribute("gauche")+"px",top:this.separatorNode.getAttribute("haut")+"px",width:this.separatorNode.getAttribute("largeur")+"px",height:this.separatorNode.getAttribute("hauteur")+"px"}),this.text3.css(t.parseDesignNode(this.totalNode)),this.text3.css({position:"absolute",left:this.totalNode.getAttribute("gauche")+"px",top:this.totalNode.getAttribute("haut")+"px",width:this.totalNode.getAttribute("largeur")+"px",height:this.totalNode.getAttribute("hauteur")+"px"}),this.div.append(this.text2),this.div.append(this.text3)),i.removeUserSelect(this.div),e.call()},setTotalNum:function(e){this.text3.text(e)},setIndex:function(e,t){if(this.design.position)var i=t;else{var i=e,n=this.design.deepness;if(0!=n){var o=i.split("."),r=o.length;n>0?(n=Math.min(n,r),i=o.slice(r-n,r).join(".")):n<0&&(n=-Math.min(-n,r),i=o.slice(0,-n).join("."))}}this.text1.text(i)},getProgressUse:function(){return this.design.useProgress}})}),define("ekhil/view/screenobject/SOMathML",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="mathML",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOMaxtimeCurtain",["lib/Utils","ekhil/controller/helper/NavigationHelper","ekhil/view/ASOImage"],function(e,t,i){return i.extend({_intervalId:null,delay:null,init:function(){this._super(),this.type="maxtime_curtain"},load:function(){this._super.apply(this,arguments),this.div.css({pointerEvents:"auto"})},show:function(){this._super(),this.div.hide(),-1!==this.delay&&(0===this.delay?this.showCurtain():this._intervalId=setInterval(e.relegate(this,this.showCurtain),1e3*this.delay))},hide:function(){this._super(),this._removeTimer()},showCurtain:function(){this._removeTimer(),this.div.show()},_removeTimer:function(){void 0!==this._intervalId&&clearInterval(this._intervalId)}})}),define("ekhil/view/screenobject/SOProgressbar",["lib/Utils","ekhil/model/Runtime","ekhil/view/AScreenObject","lib/HTMLHelper","lib/TextHelper"],function(e,t,i,n,o){return i.extend({init:function(){this._super(),this.type="progressbar",this.imageWidth=0,this.imageHeight=0,this.source="",this.orientation,this.text=$("<span />")},isSprite:function(){return"stepping"==this.display},getTarget:function(){return this.target},setXML:function(e){var t,i={fontFamily:"Arial",fontSize:"10px",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",color:"#000000",backgroundColor:"#FFFFFF",width:"30px",height:"20px"};this._super(e);var n=($(e.querySelector("content")),$(e.querySelector("design")));this.target=n.attr("target"),this.streched=!!+n.attr("streched"),this.proportional=!!+n.attr("proportional"),this.source=n.attr("file"),this.imageWidth=n.attr("width")||0,this.imageHeight=n.attr("height")||0,this.display=n.attr("display")||"stretching",this.direction=n.attr("direction"),this.reverse=n.attr("reverse");var t=$.extend(o.parseDesignNode(n.get(0)),{top:"auto",left:"auto",width:""!==n.attr("largeurText")?n.attr("largeurText")+"px":i.width,height:""!==n.attr("hauteurText")?n.attr("hauteurText")+"px":i.height});t=$.extend(i,t),this.text.css(t)},load:function(e){if(this.source)if(this.isSprite())this.wrapper=$("<div/>").css({width:this.imageWidth+"px",height:this.imageHeight+"px",position:"relative",overflow:"hidden"}),this.img=new Image,this.img.src=this.player.getMediaPath(this.source),this.img.addEventListener("load",this.spriteLoaded.bind(this,e),!1),this.img.addEventListener("error",this.spriteLoaded.bind(this,e),!1),$(this.div).append(this.wrapper);else{this.div.css({pointerEvents:"none",backgroundColor:"transparent"});this.player.container.container.width();this.img=new n("image",{src:this.player.getMediaPath(this.source),w:this.imageWidth,h:this.imageHeight,streched:this.streched,proportional:this.proportional}).getElement(),$(this.img).bind({load:e,error:e}).css({overflow:"hidden"}),$(this.div).append(this.img)}else this.div.append(this.text),e.call()},spriteLoaded:function(e,t){"load"===t.type&&(this.img=t.target,this.img.height>2*this.imageHeight?this.orientation="horizontal":this.img.width>2*this.imageWidth&&(this.orientation="vertical"),"horizontal"==this.orientation?this.nbSprite=Math.floor(this.img.height/this.imageHeight):"vertical"==this.orientation&&(this.nbSprite=Math.floor(this.img.width/this.imageWidth)),$(this.img).css({position:"absolute",left:0,top:0}),this.wrapper.append(this.img),this.setImagePosition(0)),e()},setImagePosition:function(e){if(this.nbSprite&&e){if(e<100)var t=Math.floor(.01*e*this.nbSprite);else var t=this.nbSprite-1;"horizontal"==this.orientation?$(this.img).css({top:-this.imageHeight*t+"px"}):"vertical"==this.orientation&&$(this.img).css({left:-this.imageWidth*t+"px"})}},setProgression:function(e){if(this.source)if(this.isSprite())this.setImagePosition(e);else switch(this.direction){case"vertical":this.img.css({height:e+"%",position:"absolute",bottom:0});break;case"both":this.img.css({height:e+"%"});case"horizontal":default:this.img.css({width:e+"%"})}else this.text.html(Math.round(e)+" %")}})}),define("lib/graphic/Rectangle",["lib/Class"],function(e){return e.extend({init:function(e){this.defaultOptions={borderWidth:0,marginLeft:0,marginTop:0,borderStyle:"solid",borderColor:"#FFF",backgroundColor:"transparent",opacity:100,borderRadius:0,pointerEvents:"none",width:"100%",height:"100%"},this.element=$("<div/>"),this.setOptions(e)},setOptions:function(e){this.options=$.extend(this.defaultOptions,e),this.draw()},draw:function(){this.element.css(this.options)},getElement:function(){return this.element}})}),define("ekhil/view/screenobject/SORectangle",["ekhil/view/AScreenObject","lib/Utils","lib/graphic/Rectangle"],function(e,t,i){return e.extend({init:function(e){this._super(),this.type="rectangle",this.design={},this.design.transparent=!1,this.design.alpha=100,this.design.ray=0,this.design.bgcolor="#000000",this.design.border=!0,this.design.borderColor="#000000",
this.design.borderWidth=1},setXML:function(e){this._super(e);var i=e.querySelector("design");this.design.width=t.getAttribute(i,"width",null),this.design.height=t.getAttribute(i,"height",null),this.design.transparent=!!i.hasAttribute("transparent")&&"1"==i.getAttribute("transparent"),this.design.alpha=t.getAttribute(i,"alpha",null),this.design.rounded=t.getAttribute(i,"rounded",null),this.design.ray=t.getAttribute(i,"ray",null),this.design.bgcolor=t.getAttribute(i,"bgcolor",null),this.design.border=!!i.hasAttribute("border")&&"1"==i.getAttribute("border"),this.design.borderColor=t.getAttribute(i,"border_color",null),this.design.borderWidth=t.getAttribute(i,"border_width",null)},load:function(e){this.div.css({pointerEvents:"none"});var t=0;this.design.border&&(t=+this.design.borderWidth/+this.design.width*100);var n=new i({width:100-t+"%",height:100-t+"%",borderWidth:this.design.border?this.design.borderWidth:0,marginLeft:this.design.border?-this.design.borderWidth/2+"px":0,marginTop:this.design.border?-this.design.borderWidth/2+"px":0,borderStyle:"solid",borderColor:this.design.borderColor,backgroundColor:this.design.transparent?"none":this.design.bgcolor,borderRadius:"1"==this.design.rounded&&this.design.ray?this.design.ray+"px":0,pointerEvents:"none"}).getElement();$(n).appendTo(this.div),e.call()}})}),define("ekhil/view/screenobject/SOScore",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({init:function(){this._super(),this.type="score",this.scoreValue=$("<span />"),this.suffix=$("<span />"),this.score=0},setXML:function(e){this._super(e),this.designNode=e.querySelector("design"),this.design.suffix=e.querySelector("suffixe").textContent,this.suffix_design=e.querySelector("suffixe_design"),this.design.suffix_design={},i.setXmlAttributes(this.suffix_design,this.design.suffix_design)},load:function(e){this.div.css(t.parseDesignNode(this.designNode)),this.suffix.text(this.design.suffix),this.suffix.css(t.parseDesignNode(this.suffix_design)),this.div.css({whiteSpace:"nowrap"}),this.div.append(this.scoreValue),this.div.append(this.suffix),this.setScore(),e.call()},setScore:function(e){this.score=e},getFormattedScore:function(e){var t="";if(isNaN(e)&&(e=0,console.log("Score was NaN !")),"discrete"==this.design.scoretype);else{var i=+e,n=this.design.min;i=n+i/100*(this.design.max-n);var o=Math.pow(10,this.design.decimals);i=Math.round(i*o)/o,t=i.toString()}return t},show:function(){this._super(),this.scoreValue.text(this.getFormattedScore(this.score))}})}),define("ekhil/view/screenobject/SOSmiley",["ekhil/view/AScreenObject","lib/Utils","lib/HTMLHelper"],function(e,t,i){return e.extend({init:function(e){this._super(e),this.type="smiley"},setXML:function(e){this._super(e);var i=require("ekhil/EkhilPlayer").getInstance(),n=e.querySelector("design");this.designAttributes=t.parseXMLAttributes(n),this.file_bad=i.getMediaPath(this.designAttributes.file_bad),this.file_good=i.getMediaPath(this.designAttributes.file_good),this.file_normal=i.getMediaPath(this.designAttributes.file_normal)},setSmileyState:function(e){this.state=e},load:function(e){var t={w:this.designAttributes.width,h:this.designAttributes.height,streched:!!+this.designAttributes.streched,proportional:!!+this.designAttributes.proportional};this.images={good:new i("image",$.extend(t,{src:this.file_good})).getElement(),bad:new i("image",$.extend(t,{src:this.file_bad})).getElement(),normal:new i("image",$.extend(t,{src:this.file_normal})).getElement()};for(var n in this.images)$(this.images[n]).css({position:"absolute",top:0,left:0}).hide().appendTo(this.div);e.call()},show:function(){this._super();for(var e in this.images)$(this.images[e]).hide();$(this.images[this.state]).show()}})}),define("ekhil/view/screenobject/SOSound",["ekhil/view/ASOMedia","lib/Utils","lib/HTMLHelper","ekhil/view/screenobject/SOButton"],function(e,t,i,n){return e.extend({init:function(e){this.type="audio",this._super(e),this.paramsButtonsXML={},this.currentTime=0,this.countBtn=0,this.buttons=[],this.BUTTON_LIST=[],this.role,this.containerControl=$("<div/>").attr("class","audio-controls"),this.media=$('<audio preload="auto" controlsList="nodownload" oncontextmenu="return false; "/>'),this.div.append(this.media)},setXML:function(e){this._super(e),this.paramsButtonsXML=e.querySelector("design"),this.linked=!!this.paramsButtonsXML.hasAttribute("linked")&&"1"==this.paramsButtonsXML.getAttribute("linked"),this.showControls=!!this.paramsButtonsXML.hasAttribute("show_controls")&&"1"==this.paramsButtonsXML.getAttribute("show_controls"),this.transparent=!!this.paramsButtonsXML.hasAttribute("transparent")&&"1"==this.paramsButtonsXML.getAttribute("transparent"),this.border=!!this.paramsButtonsXML.hasAttribute("border")&&"1"==this.paramsButtonsXML.getAttribute("border"),this.borderColor=this.paramsButtonsXML.hasAttribute("bordercolor")?this.paramsButtonsXML.getAttribute("bordercolor"):"#000",this.bgColor=this.paramsButtonsXML.hasAttribute("bgcolor")?this.paramsButtonsXML.getAttribute("bgcolor"):"#000",this.showControls||("1"==this.paramsButtonsXML.getAttribute("show_play")&&(this.countBtn+=1,this.BUTTON_LIST.push("button_pause"),this.BUTTON_LIST.push("button_play")),"1"==this.paramsButtonsXML.getAttribute("show_stop")&&(this.countBtn+=1,this.BUTTON_LIST.push("button_stop")))},load:function(e){this.showControls?(this.div.append(this.media),$(this.media).css({width:"100%"})):(this.BUTTON_LIST.forEach(function(e){var t=this.paramsButtonsXML.querySelector(e),i=new n(this.player);this.role=e.split("_")[1],i.setXML(t),i.actions=[{action:"media",event:"",key:0,mode:"button",param:{actionPlayer:this.role,author_id:this.author_id},time:"0"}],i.design={file_on:t.getAttribute("file_on")?t.getAttribute("file_on"):"../medias/btn_"+this.role+"_on.png",file_roll:t.getAttribute("file_roll")?t.getAttribute("file_roll"):"../medias/btn_"+this.role+"_roll.png",file_off:t.getAttribute("file_on")?t.getAttribute("file_on"):"../medias/btn_"+this.role+"_on.png",file_out:t.getAttribute("file_on")?t.getAttribute("file_on"):"../medias/btn_"+this.role+"_on.png",file_down:t.getAttribute("file_down")?t.getAttribute("file_down"):"../medias/btn_"+this.role+"_on.png"},i.enable(!0),this.containerControl.append(i.div),this.buttons.push(i)}.bind(this)),this.div.append(this.media),this.div.append(this.containerControl)),this.loadPlayer(this.loadMedia.bind(this,e)),this.showControls||this.loadButtons(this.buttons)},loadButtons:function(e,t){e.forEach(function(e){e.load(t)})},loadPlayer:function(e){this._super(e),this.showControls&&this.media.attr("controls",!0),this.media.attr("id",this.author_id)},hide:function(){this.media.get(0).pause(),this._super()},applyDesign:function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e],i=t.actions[0].param.actionPlayer;"play"==i||"pause"==i?$(t.div).css({width:"calc(100% / "+this.countBtn+")",position:"absolute",left:0,height:"100%",top:0}):$(t.div).css({width:"calc(100% / "+this.countBtn+")",position:"absolute",left:this.countBtn>1?"50%":"0",height:"100%",top:0}),$(t.div).find("img").each(function(e,t){var i=this.div?"calc("+this.div.height()+"px - 5px)":"calc(100% - 5px)";$(t).css({width:"100%",height:i,position:"relative",cursor:"pointer"})}.bind(this))}var n={};n.border=this.border?"1px solid "+this.borderColor:"none",n.backgroundColor=this.transparent?"none":this.bgColor,this.div.css(n)},show:function(){this._super(),this.showControls||(this.buttons.forEach(function(e){e.show()}.bind(this)),this.displayImgButton("play"),this.applyDesign())}})}),define("ekhil/view/screenobject/SOSummary",["ekhil/view/AScreenObject","lib/Utils","ekhil/controller/helper/NavigationHelper","lib/TextHelper"],function(e,t,i,n){return e.extend({PLUS_OFF:"../_shared/medias/plus_off.png",MINUS_OFF:"../_shared/medias/minus_off.png",targetNodes:null,currentNode:null,_course:null,_runtime:null,imgSeen:null,imgMastery:null,seenIconWidth:0,divScoreDimension:null,navigationHelper:new i,imgMasteryLoad:!1,init:function(e){this.targetNodes=[],this._super(e),this.type="summary",this.div.addClass("scrollable")},setXML:function(e){this._super(e);var t=e.querySelector("design");e.querySelector("content");this.page_score="1"===$(t).attr("page_score"),this.page_state="1"===$(t).attr("page_state"),this.page_index="1"===$(t).attr("page_index"),this.theme_score="1"===$(t).attr("theme_score"),this.theme_state="1"===$(t).attr("theme_state"),this.theme_index="1"===$(t).attr("theme_index"),this.simple_index="1"===$(t).attr("simple_index"),this.filter=$(t).attr("filter"),this.active_clic="1"===$(t).attr("active_clic"),this.not_mastery_icone=this.player.getMediaPath($(t).attr("not_mastery_icone")),this.mastery_icone=this.player.getMediaPath($(t).attr("mastery_icone")),this.not_seen_icone=this.player.getMediaPath($(t).attr("not_seen_icone")),this.seen_icone=this.player.getMediaPath($(t).attr("seen_icone")),this.discover_icone=$(t).attr("discover_icone"),this.result_icone=$(t).attr("result_icone"),this.observe_icone=$(t).attr("observe_icone"),this.eval_icone=$(t).attr("eval_icone"),this.bgcolor_selectedv=$(t).attr("bgcolor_selectedv")||"",this.bgcolor_off=$(t).attr("bgcolor_off"),this.bgcolor_roll=$(t).attr("bgcolor_roll"),this.color_selected=$(t).attr("color_selected"),this.color_roll=$(t).attr("color_roll"),this.color_off=$(t).attr("color_off"),this.linecolor=$(t).attr("linecolor"),this.line="1"===$(t).attr("line"),this.opened="1"===$(t).attr("opened"),this.leading=+$(t).attr("leading"),this.indentline=+$(t).attr("indentline"),this.indent=+$(t).attr("indent"),this.offset=+$(t).attr("offset"),this.plus_minus="1"===$(t).attr("plus_minus"),this.bgcolor=$(t).attr("bgcolor"),this.transparent="1"===$(t).attr("transparent"),this.bordercolor=$(t).attr("bordercolor"),this.border="1"===$(t).attr("border"),this.fontcolor=$(t).attr("fontcolor"),this.underline="1"===$(t).attr("underline"),this.italic="1"===$(t).attr("italic"),this.bold="1"===$(t).attr("bold"),this.fontsize=+$(t).attr("fontsize"),this.font=$(t).attr("font"),this.index=$(t).attr("index"),this.summary_type=$(t).attr("type"),this.isresult="1"===$(t).attr("isresult")},load:function(e){this.imgSeen=new Image,this.imgNotSeen=new Image,this.imgSeen.src=this.seen_icone,this.imgNotSeen.src=this.not_seen_icone,this.imgMastery=new Image,this.noImgMastery=new Image,this.imgMastery.src=this.mastery_icone,this.noImgMastery.src=this.not_mastery_icone,e.call()},show:function(){this._super();var e=$("<div />").css({width:"100%"});e.addClass("table");for(var t in this.nodesToShow)this.drawNode(t,this.nodesToShow[t],e);$(this.div).css({overflowX:"hidden"}),$(this.div).html(e);var i=this.indent;$(".table",this.div).css({display:"block",width:this.border?"99%":"100%"}),$("img",this.div).css({verticalAlign:"middle"}),this.opened||$(".collapsable",this.div).hide(),$("[data-level]").each(function(){var e=$(this).data("level");$(this).css({paddingLeft:i*e+"px"})}),this.resizeColumn(this.div)},refreshScroll:function(){var e=$(this.eldar).find("> div"),t=Math.round($(e).innerHeight()/$(e).prop("scrollHeight")*100);$(".cursor",this.eldar).css("height",t+"%")},drawNode:function(e,i,o,r,s){s=s||0,r=r||0;var a=this._runtime.getNodeData(e),l=void 0!==a&&(this._course.isPage(e)&&a.tries>0||this._course.isTheme(e)&&0==a.tries),c=void 0!==a&&this.navigationHelper.isValidated(e),h=this._course.isTheme(e)&&this.theme_state||this._course.isPage(e)&&this.page_state,u=this._course.isTheme(e)&&l&&this.theme_score||this._course.isPage(e)&&this.page_score&&l,d=this._course.getNodeNavigation(e).disableLink,g=e==this.currentNode,f=this.isresult||!this._course.getNodeNavigation(e).disableIndex,p=this._course.isPage(e)&&this.page_index,m=this._course.isTheme(e)&&this.theme_index,A=this._course.isPage(e)&&this.page_score,v=this._course.isTheme(e)&&this.theme_score;switch(this.filter){case"none":break;case"seen":f&&!l&&(f=!1);break;case"not_seen":f&&l&&(f=!1);break;case"mastery":f&&!c&&(f=!1);break;case"not_mastery":f&&c&&(f=!1);break;default:console.warn(this.index+" SOSommary : unknonw filter")}if(f){var b=d?this.color_off:g?this.color_selected:this.fontcolor,y=$("<div />").css({fontFamily:this.font,fontSize:this.fontsize,color:b,fontStyle:this.italic?"italic":"normal",fontWeight:this.bold?"bold":"normal",whiteSpace:"nowrap"});y.addClass("level-"+r),y.addClass(s),t.removeUserSelect(y);var S=$("<div />").css({fontFamily:this.font,fontSize:this.fontsize,color:"inherit",display:"inline-block",fontStyle:this.italic?"italic":"normal",fontWeight:this.bold?"bold":"normal",verticalAlign:"middle",textAlign:"left",paddingBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",border:this.border?"solid 1px "+this.bordercolor:"none"});if(S.addClass("title"),S.attr("data-level",r),p||m?S.html("&nbsp;"+e+"&nbsp;"+this._course.getNodeTitle(e)):S.html("&nbsp;"+this._course.getNodeTitle(e)),this.plus_minus&&void 0!=i&&t.count(i)>0){var w=$("<img/>");w.attr("src",this.opened?this.MINUS_OFF:this.PLUS_OFF),w.data("collapse",e),w.on("click",t.relegate(this,this.onClickExpandButtonEvent)),this.opened&&w.addClass("open"),S.prepend(w)}if(h){if(l&&this.seen_icone||!l&&this.not_seen_icone){var x=new Image;x.src=l?this.seen_icone:this.not_seen_icone;var C=$("<div/>").css({display:"inline-block",border:this.border?"solid 1px "+this.bordercolor:"none"}).addClass("seenWrapper");C.append(x),this.seenIconWidth=x.width}var k=new Image;k.src=c?this.mastery_icone:this.not_mastery_icone;var _=$("<div/>").css({display:"inline-block",border:this.border?"solid 1px "+this.bordercolor:"none"}).addClass("masteryWrapper");(c&&this.mastery_icone||!c&&this.not_mastery_icone)&&_.append(k)}if(A||v||u){var T=$("<div />").css({fontFamily:this.font,fontSize:this.fontsize,color:"inherit",fontStyle:this.italic?"italic":"normal",fontWeight:this.bold?"bold":"normal",border:this.border?"solid 1px "+this.bordercolor:"none",paddingRight:"10px",whiteSpace:"nowrap",textAlign:"center",display:"inline-block",verticalAlign:"middle"});T.addClass("summary_score");var R;R=u&&void 0!==a?this._course.isTheme(e)?Math.round(this.navigationHelper.getScore(e))+"%":a.score+"%":"&nbsp;",(A||v)&&(this.divScoreDimension=n.calculateTextSize("100%",{fontFamily:this.font,fontSize:this.fontsize,fontStyle:this.italic?"italic":"normal",fontWeight:this.bold?"bold":"normal"}),T.width(this.divScoreDimension.width+4)),T.html(R)}if(y.append(S),void 0!==C&&y.append(C),void 0!==_&&y.append(_),void 0!==T&&y.append(T),!d&&this.active_clic&&($(y).hover(function(){$(y).css({color:this.color_roll,cursor:"pointer"})}.bind(this),function(){$(y).css({color:b,cursor:"default"})}.bind(this)),$(y).on("click",t.relegate(this,this.onClickEvent,e))),$(y).data("index",e),$(o).append(y),this.leading){var E=$("<div />").css({height:this.leading+"px",border:"none"});E.addClass("table-row"),E.addClass("level-"+r),E.addClass(s),$(o).append(E)}}if(s=s?s+" collapsable item-collapse-"+e.replace(/\./g,"-"):"collapsable item-collapse-"+e.replace(/\./g,"-"),void 0!=i)for(var N in i)this.drawNode(N,i[N],o,r+1,s)},resizeColumn:function(e){var i=$(e).width(),n=($(".seenWrapper img").width(),$(".masteryWrapper img").width(),this.divScoreDimension?this.divScoreDimension.width+4:0),o=$(this.div).attr("id"),r=$("#"+o).find(".masteryWrapper img"),s=$("#"+o).find(".seenWrapper img"),a=t.getBoundariesImage(r),l=t.getBoundariesImage(s),c=i-(l.maxWidth+a.maxWidth+n)-15;$(".seenWrapper").css({width:l.maxWidth+"px",display:"inline-block",textAlign:"center",overflow:"hidden"}),$(".masteryWrapper").css({width:a.maxWidth+"px",display:"inline-block",textAlign:"center",overflow:"hidden"}),$(".summary_score").css({display:"inline-block"}),$(".title").each(function(e,t){var i=$(t).data("level")*this.indent;$(t).css({width:c-i})}.bind(this))},onClickExpandButtonEvent:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).data("collapse");$(e.target).hasClass("open")?($(e.target).removeClass("open"),$(".item-collapse-"+t.replace(/\./g,"-"),this.div).hide(),$(e.target).attr("src",this.PLUS_OFF)):($(e.target).addClass("open"),$(".item-collapse-"+t.replace(/\./g,"-"),this.div).show(),$(e.target).attr("src",this.MINUS_OFF)),this.refreshScroll()},onClickEvent:function(e,t){null===this._course||this._course.getNodeNavigation(e).disableLink||this.player.runCommand("Execute","gotopage",e),t.stopPropagation()},getType:function(){return this.summary_type},getIndex:function(){var e=this.index;return e||void 0},setCourse:function(e){return this._course=e,this},setRuntime:function(e){return this._runtime=e,this},setTargetNodes:function(e){return this.targetNodes=e,this.nodesToShow=e,this},setCurrentNode:function(e){this.currentNode=e}})}),define("ekhil/view/screenobject/SOTable",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="table",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOText",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({HTMLElement:null,originalHTMLElement:null,globalCss:{},init:function(){this._super(),this.type="text",this.content={text:"",type:"txt"},this.design={backgroundColor:"#000000",border:"",bordercolor:"#000000",scrollbar:!1},this.div.css("pointer-events","none")},setXML:function(e){this._super(e);var i=e.querySelector("design"),n=e.querySelector("content");this.globalCss={"-webkit-hyphens":"none","-moz-hyphens":"none","-ms-hyphens":"none","-o-hyphens":"none",hyphens:"none",display:"block",width:"100%",height:"100%",lineHeight:t.LINE_HEIGHT_FACTOR,"white-space":"pre-wrap"},this.HTMLElement=t.parseTextNode(n,i,this.player.getMediaPath.bind(this.player),this.textLinkGotoPageFunction.bind(this),!1).get(0),$(this.HTMLElement).css({width:"100%",height:"100%"}),i.hasAttribute("scrollbar")&&"0"==i.getAttribute("scrollbar")&&$(this.HTMLElement).css({"-webkit-column-width":this.div.width(),"-moz-column-width":this.div.width(),"-o-column-width":this.div.width(),"column-width":this.div.width()}),this.originalHTMLElement=this.HTMLElement},textLinkGotoPageFunction:function(e){this.player.runCommand("GoToPage",e)},load:function(e){var t=$("<div />").css(this.globalCss).html(this.HTMLElement);1==this.design.selectable?this.div.css("pointer-events","auto"):i.removeUserSelect(t.get(0)),"1"==this.design.scrollbar?this.div.addClass("scrollable"):this.div.css("overflow","hidden"),this.div.append(t),e.call()},setData:function(e){var i=this.originalHTMLElement.innerHTML,n=t.replaceVariables(i,e);n!=i&&(this.HTMLElement.innerHTML=n)}})}),define("ekhil/view/screenobject/SOTextballoon",["ekhil/view/AScreenObject"],function(e){return e.extend({init:function(){this._super(),this.type="textballoon",console.warn("SO "+this.type+" isn't supported in HTML5")}})}),define("ekhil/view/screenobject/SOTimer",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({startTime:0,maxTime:null,intervalID:null,init:function(){this._super(),this.type="timer",this.startTime=0,this.text=$("<span />")},setXML:function(e){this._super(e),this.designNode=e.querySelector("design")},load:function(e){this.div.css(t.parseDesignNode(this.designNode)),this.text.css(t.parseDesignNode(this.designNode)),this.div.append(this.text),e.call()},show:function(){this._super(),this.refresh(),this.design.interval>0&&(this.intervalID=setInterval(i.relegate(this,this.refresh),1e3*this.design.interval))},refresh:function(){var e=new Date,t="";switch(this.design.target){case"clock":t=i.pad(e.getHours(),2)+":"+i.pad(e.getMinutes(),2)+":"+i.pad(e.getSeconds(),2);break;case"session":t=this.formatTime(e.getTime()-this.startTime);break;case"maxtime":var n=e.getTime()-this.startTime,o=Math.max(this.maxTime-n,0);t=this.formatTime(o)}this.text.text(t)},formatTime:function(e){var t="",n=i.seconds2HMSArray(Math.round(.001*e));return n[0]&&n[0]>0&&(t+=i.pad(n[0],2)+":"),t+=i.pad(n[1],2)+":"+i.pad(n[2],2)},hide:function(){this._super(),clearInterval(this.intervalID)},setStartTime:function(e){this.startTime=e},setMaxTime:function(e){try{this.maxTime=1e3*e}catch(e){this.maxTime=0,console.info("maxTime Format problem")}},getMaxTime:function(){return this.maxTime},setInitNode:function(e){this.initNode=e}})}),define("ekhil/view/screenobject/SOTitle",["ekhil/view/AScreenObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({HTMLElement:null,globalCss:{},init:function(){this._super(),this.type="title",this.text=$("<span />")},setXML:function(e){this._super(e),this.designNode=e.querySelector("design");var t=e.querySelector("prefixe");this.design.prefixe=t.firstChild.nodeValue;var n=e.querySelector("separator");this.design.separator=n.firstChild.nodeValue;var o=e.querySelector("level2");void 0!=o&&(this.design.level2={},i.setXmlAttributes(o,this.design.level2));var r=e.querySelector("level3");void 0!=r&&(this.design.level3={},i.setXmlAttributes(r,this.design.level3));var s=e.querySelector("level4");s&&(this.design.level4={},i.setXmlAttributes(s,this.design.level4))},load:function(e){this.div.css(t.parseDesignNode(this.designNode)),this.div.css({overflow:"hidden"}),this.text.css(t.parseDesignNode(this.designNode)),this.div.append(this.text),i.removeUserSelect(this.div),e.call()},setText:function(e,t,i,n,o){var r=this.design.prefixe;if(void 0==r&&(r=""),"course"==this.design.target){var s=this.getLevelCss(1);r+=$("<span/>").css(s).text(i).get(0).outerHTML}else{var a,l="hierarchy"==this.design.levelmode;if(l){a=[],!e&&o&&o.length>0&&(e=o[o.length-1]);for(var c=""+e;""!=c;)a.unshift(c),c=c.split(".").slice(0,-1).join(".")}else a=o;for(var h=this.design.levels,u=this.design.show_page,d=[],g=a.length-1;g>=0&&d.length<h;g--){var f=null!=t.getPage(a[g]);if(!f||u&&f){void 0!=(f?t.getPage(a[g]):t.getTheme(a[g]))&&d.unshift(a[g])}}var p=d.length,m="";l&&p>h&&this.design.show_index&&!this.design.show_total&&d[0].indexOf(".")>-1&&(m=d[0].split(".").slice(0,-1).join(".")+".");for(var A="",g=0;g<p;g++){var v="";this.design.show_index&&(v+=m,m="",v+=d[g].split(".").pop(),v+=" "),v+=t.getNodeTitle(d[g]);var s=this.getLevelCss(g+1);A+=$("<span/>").css(s).text(v).get(0).outerHTML,g<p-1&&(A+=$("<span/>").css(s).text(this.design.separator).get(0).outerHTML)}r+=A}this.text.html(r)},getLevelCss:function(e){var i={};i.attributes=[],i.attributes.push({name:"font",value:this.design.font}),i.attributes.push({name:"underline",value:this.design.underline});var n=this.design;if(void 0!=this.design["level"+e]&&null!=this.design["level"+e])var n=this.design["level"+e];return i.attributes.push({name:"fontsize",value:n.fontsize}),i.attributes.push({name:"fontcolor",value:n.fontcolor}),i.attributes.push({name:"bold",value:n.bold}),i.attributes.push({name:"italic",value:n.italic}),t.parseDesignNode(i)},show:function(){this._super()}})}),define("ekhil/view/screenobject/SOVariable",["ekhil/view/AScreenObject","lib/TextHelper"],function(e,t){return e.extend({init:function(){this._super(),this.type="variable",this.variableValue=$("<span />"),this.variableName="",this.variable},setXML:function(e){this._super(e),this.designNode=e.querySelector("design"),this.variableName=e.querySelector("design").getAttribute("variable")},load:function(e){this.div.css(t.parseDesignNode(this.designNode)),this.div.css({whiteSpace:"nowrap"}),this.div.append(this.variableValue),e.call()},show:function(){this._super(),this.refresh()},refresh:function(){this.variableValue.text(this.variable)},setVariableValue:function(e){this.variable=e},getVariableName:function(){return this.variableName}})}),define("ekhil/view/screenobject/SOVideo",["ekhil/view/ASOMedia","lib/Utils"],function(e,t){var i=0,n=e.extend({ytPlayer:null,ytReady:!1,allowToPlay:!0,reinitCurrentTimeAtPlay:!0,init:function(e){this.type="video",this.videoType="file",this._super(e),this.media=$('<video preload="auto" playsinline controlsList="nodownload" oncontextmenu="return false;" />'),this.div.append(this.media)},setXML:function(e){this._super(e);var t=e.querySelector("content");if(this.mediaEvent=t.getAttribute("event"),t.hasAttribute("video_type")&&(this.videoType=t.getAttribute("video_type")),this.videoType===n.YOUTUBE)this.media.remove(),this.media=$('<iframe id="player_'+this.author_id+'" type="text/html" width="'+this.design.width+'" height="'+this.design.width+'" src="https://www.youtube.com/embed/'+this.source+"?enablejsapi=1&rel=0&origin="+window.location.protocol+"//"+window.location.host+'" frameborder="0"></iframe>').appendTo(this.div),this.div.append(this.media);else{var i=e.querySelector("design");if(i&&i.hasAttribute("show_buttons")){"1"==i.getAttribute("show_buttons")&&$(this.media).attr("controls",!0)}}},isSupported:function(e){return this.videoType===n.YOUTUBE||t.checkSupportExtensionMedia(this.source,t.nonSupportedVideoFormats,e)},loadPlayer:function(e){this.videoType===n.YOUTUBE?require(["https://www.youtube.com/iframe_api"],t.relegate(this,this.onYoutubeApiIframeLoaded,e)):(this.isSupported(!0)&&1==this.design.show_controls&&1==this.design.show_buttons&&this.media.attr("controls",!0),this._super(e))},findVideoSize:function(){var e=this.design.width,i=this.design.height,n=this.media.get(0),o=n.videoWidth,r=n.videoHeight;o>0&&r>0?(n.removeEventListener("loadeddata",this.onLoadedData),this.media.css({width:o>e?e:o+"px",height:r>i?i:r+"px",marginLeft:o>e?"0px":.5*(e-o)+"px",marginTop:r>i?"0px":.5*(i-r)+"px"})):this.attempts<5&&(this.attempts++,setTimeout(t.relegate(this,this.findVideoSize),200))},onLoadedData:function(){this.attempts=0,this.findVideoSize()},loadMedia:function(e){this.isSupported(!1)&&0==this.design.streched&&this.media.on("loadeddata",t.relegate(this,this.onLoadedData)),this.isSupported(!1)&&this.videoType!==n.YOUTUBE?this._super(e):e.call()},show:function(){this.isSupported(!1)&&(this._super(),1!=this.design.show_central_button||0!=this.design.show_controls&&0!=this.design.show_buttons||this.showCentralButton())},onYoutubeApiIframeLoaded:function(e){window.onYouTubeIframeAPIReady=t.relegate(this,this.onYoutubeApiLoaded,e),i<1?i++:this.onYoutubeApiLoaded(e,!0)},onYoutubeApiLoaded:function(e,i){this.ytPlayer=new YT.Player("player_"+this.author_id,{playerVars:{html5:1},events:{onReady:t.relegate(this,this.setVideoReady),onStateChange:t.relegate(this,this.onPlayerStateChange)}}),i&&this.setVideoReady(),e.call()},setVideoReady:function(){this.ytReady=!0,(t.IE||t.Firefox)&&setInterval(this.checkState.bind(this),1e3)},checkState:function(){var e=this.ytPlayer.getPlayerState();return this.playerState!==e&&this.onPlayerStateChange({data:e}),this.playerState=e,e},onPlayerStateChange:function(e){0===e.data&&""!==this.mediaEvent&&this.player.runCommand("SendEvent",this.mediaEvent)},setVolume:function(e){this.videoType===n.YOUTUBE&&this.ytPlayer.setVolume?this.ytReady&&this.ytPlayer.setVolume(100*e):this._super(e)},hide:function(){this.videoType===n.YOUTUBE&&this.ytPlayer.pauseVideo?this.ytReady&&this.ytPlayer.pauseVideo():this.isSupported(!1)&&this.media.get(0).pause&&this.media.get(0).pause(),this._super()},play:function(){if(this.videoType===n.YOUTUBE)this.ytReady&&(this.ytPlayer.seekTo(0),this.ytPlayer.playVideo());else if(this.autostart&&this.allowToPlay||!this.autostart){var e=this.media.get(0);e.currentTime&&this.reinitCurrentTimeAtPlay&&(e.currentTime=0),e.play(),setTimeout(this.onTestIsWellLaunchedEvent(e),100)}},showCentralButton:function(){var e=this.media.get(0);0==this.design.autostart&&this.onTestIsWellLaunchedEvent(e),this.media.on("ended",this.onTestIsWellLaunchedEvent.bind(this,e))}});return n.YOUTUBE="youtube",n}),define("graza/model/Runtime",["lib/Class","lib/APIWrapperProxy","lib/Config","lib/constants/TrackingAPIVersion"],function(e,t,i,n){var o=e.extend({startTime:0,referenceTime:null,pausedTime:null,scenesToLoad:null,scenesLoaded:null,timerId:null,currentScene:null,lastViewedScene:0,isPlaying:!1,showSubtitles:!1,soundMute:!1,soundVolume:100,waitOnScene:-1,trackingInitalized:!1,parentRuntime:null,firstSceneViewed:!1,history:null,historyIndex:-1,isGoingBack:!1,bIsHACP:window.isHACP,aiccUrl:window.AICC_URL,aiccSid:window.AICC_SID,apiDetected:!0,forceSynchronizeMedia:!0,isPageVisible:!1,endAnimationReached:!1,init:function(){this.scenesLoaded=[],this.scenesToLoad=[],this.startTime=(new Date).getTime(),this.history=[],this.apiDetected=!0,this.endAnimationReached=!1},load:function(e,o){if(!e)for(this.bIsHACP?(window.exitWindow=function(){},this.initTrackingAICC(o)):(i.trackingAPIVersion=t.doLMSInitialize(i.detectApi),i.detectApi&&"false"==i.trackingAPIVersion?($(".loader").hide(),this.apiDetected=!1):i.trackingAPIVersion!==n.SCORM_2004&&i.trackingAPIVersion!==n.SCORM_12||(t.initTracking(),this.trackingInitalized=!0,this.setValue("cmi.core.lesson_status","incomplete"),i.trackingAPIVersion==n.SCORM_12&&(this.soundVolume=0)));this.history.length>0&&this.history[this.historyIndex]!=this.currentScene;)this.history.pop(),this.historyIndex--;o&&o()},initTrackingAICC:function(e){try{var t=this;$.ajax({url:this.aiccUrl,type:"GET",crossDomain:!0,data:{aicc_data:"",session_id:this.aiccSid,command:"GetParam"},success:function(i){t.trackingInitalized=!0,t.setValue("cmi.core.lesson_status","incomplete"),e&&e()}})}catch(e){console.info("__Graza_Runtime.initTrackingAICC - error : ",e)}},getCurrentTime:function(e){e||(e=Date.now()),this.referenceTime||(this.referenceTime=e);var t,i=e-this.referenceTime;return i>=0?t=i:(this.referenceTime=void 0,t=0),t},getValue:function(e){var i;if(!this.parentRuntime&&this.trackingInitalized)try{i=t.doLMSGetValue(e)}catch(e){}return i},setValue:function(e,i){if(!this.parentRuntime&&this.trackingInitalized)try{t.doLMSSetValue(e,i),this.bIsHACP&&(tracking[e]=i)}catch(e){console.info("__Runtime.setValue - error : ",e)}},getSessionTime:function(){return((new Date).getTime()-this.startTime)/1e3},commit:function(){if(!this.parentRuntime&&this.trackingInitalized)try{t.doLMSCommit()}catch(e){console.info("__Runtime.commit - error : ",e)}},quit:function(){if(this.parentRuntime)this.parentRuntime.quit();else if(this.trackingInitalized)try{t.doLMSFinish(),this.trackingInitalized=!1}catch(e){console.info("__Runtime.quit - error : ",e)}},getSubtitles:function(){return this.parentRuntime?this.parentRuntime.getSubtitles():this.showSubtitles},setSubtitles:function(e){this.parentRuntime?(this.parentRuntime.setSubtitles(e),this.showSubtitles=this.parentRuntime.getSubtitles()):this.showSubtitles=e},getSoundVolume:function(){var e=100;if(this.parentRuntime)e=this.parentRuntime.getSoundVolume();else if(i.trackingAPIVersion==n.SCORM_12||""==i.trackingAPIVersion)switch(this.soundVolume){case-1:e=0;break;case 0:e=100;break;default:e=this.soundVolume}else e=this.soundVolume;return Math.min(100,Math.max(0,Number(e)))},setSoundVolume:function(e){void 0==e&&(e=100),this.parentRuntime?(this.parentRuntime.setSoundVolume(e),this.soundVolume=this.parentRuntime.getSoundVolume()):(i.trackingAPIVersion==n.SCORM_12||""==i.trackingAPIVersion?0==e&&(e=-1):e=Math.round(e),this.soundVolume=e)},getSoundMute:function(){return this.parentRuntime?this.parentRuntime.getSoundMute():this.soundMute},setSoundMute:function(e){this.parentRuntime?(this.parentRuntime.setSoundMute(e),this.soundMute=this.parentRuntime.getSoundMute()):this.soundMute=e},setGoingBack:function(e){this.isGoingBack=e},setFirstSceneViewed:function(e){this.firstSceneViewed=e},setForceSynchronizeMedia:function(e,t){switch(e){case"gotostart":case"pageandplay":case"page":case"goto":case"GotoScene":case"pageandstop":case"gonextpage":case"next":case"ffw":case"gonextpageandplay":case"previous":case"gobackpage":case"rew":case"history_back":case"gototime":case"gototimeandplay":case"gototimeandstop":case"elm_gonextpage":case"elm_goprevpage":case"elm_gotopage":case"pause":case"stop":case"play":this.forceSynchronizeMedia=!1;break;case"elm_send_event":this.forceSynchronizeMedia=-1!==t.indexOf("elag_scene_")&&"elag_scene_1"!==t;break;default:this.forceSynchronizeMedia=!0}},hasPreviousIndex:function(){return void 0!==this.history[this.historyIndex-1]}});return o.MODEL_ID="MODEL_RUNTIME",o}),
define("graza/model/Tween",["lib/Class","lib/Utils"],function(e,t){return e.extend({scene_count:0,init:function(e){void 0!=e&&(e=t.parseXMLAttributes(e),this.id=+e.id,this.x=+e.x||0,this.y=+e.y||0,this.width=+e.width||0,this.height=+e.height||0,this.full_width=+e.full_width||0,this.full_height=+e.full_height||0,this.xscale=+e.xscale||0,this.yscale=+e.yscale||0,+e.alpha||0==+e.alpha?this.alpha=+e.alpha:this.alpha=100,this.rotation=+e.rotation||0,this.hflip=+e.hflip||0,this.vflip=+e.vflip||0,this.time=+e.time||-1,this.anim_easing=e.anim_easing||0,this.anim_easemode=e.anim_easemode||0),this.scene_count=0},toXML:function(){var e=document.createElement("tween");for(var t in this)this.hasOwnProperty(t)&&e.setAttribute(t,this[t]);return e}})}),define("lib/Media",["lib/Class","lib/Utils"],function(e,t){var i=$('<video preload="auto" webkit-playsinline playsinline controlsList="nodownload" />'),n=i.get(0);n.style.width="1px",n.style.height="1px",document.querySelector("body").appendChild(n);var o=e.extend({paused:!1,playing:!1,waitingTimeBeforePlay:0,loop:!0,useCanvas:!1,init:function(e){this.src=e,this.paused=!1,this.playing=!1,this.waitingTimeBeforePlay=0,this.loop=!0,this.element=n,this.useCanvas?(this.output=$("<canvas/>"),this.context=this.output.get(0).getContext("2d")):this.output=$(n)},play:function(){t.isLCMSProdTestMode()&&(this.element.muted=!1),""!==this.element.src&&-1===this.element.src.indexOf(this.src)&&(this.element.src=this.src);var e=Date.now();this.waitingTimeBeforePlay=0;var i=this.element.play();i&&t.isPromiseSupported()&&!t.IE&&!t.Edge?i.then(function(){this.playing=!0,this.waitingTimeBeforePlay=Date.now()-e}.bind(this)).catch(function(e){console.warn("Error when playing media:"+e)}):(this.playing=!0,this.waitingTimeBeforePlay=Date.now()-e)},pause:function(e){this.paused=!0,this.playing=!1,this.element.pause(),e&&setTimeout(this.play(),e)},stop:function(){this.paused=!1,this.playing=!1,this.waitingTimeBeforePlay=0,this.element.pause(),this.element.currentTime&&(this.element.currentTime=0)},getElement:function(){return this.element},getOutput:function(){return this.output},refreshOutput:function(e,t){e=Math.round(e),t=Math.round(t),this.useCanvas?(this.output.get(0).width=e,this.output.get(0).height=t,this.context.drawImage(this.getElement(),0,0,e,t)):(this.element.style.width=e+"px",this.element.style.height=t+"px")},refreshStateMedia:function(e,t,i){null==e?i||this.stop():this.element&&(t?this.playing||this.play():this.pause())},setPosition:function(e,i){if(!t.isEmpty(e)&&!isNaN(e)&&this.element&&!isNaN(this.element.currentTime))try{var n=e/1e3;isNaN(this.element.duration)?this.element.addEventListener("loadedmetadata",function(){this.currentTime=n}):this.element.currentTime=n,i&&!this.isPlaying()&&this.play()}catch(e){console.log("Media.setPosition - error : ",e)}},isPlaying:function(){return!!(this.element.currentTime>0&&!this.element.paused&&!this.element.ended&&this.element.readyState>2)},getDeltaPosition:function(e,t){var i=0;return e&&t&&this.element&&this.playing&&(i=1e3*this.element.currentTime-e+this.waitingTimeBeforePlay),i}});return o.play=function(e){n.src||(n.src=e,n.play())},o}),define("graza/model/Movie",["lib/Class","graza/model/Tween","lib/Media","lib/Utils"],function(e,t,i,n){var o=e.extend({init:function(){this.data=null},load:function(e,t){n.loadXMLFile(e,t)},setData:function(e){if(this.data=e,!this.SCENES_START_TIME){this.SCENES_START_TIME=[];for(var t=this.getScenes(),i=t.length,n=0,o=0;o<i;o++)this.SCENES_START_TIME[o+1]=n,n+=+this.getSceneDuration(o+1);this.MOVIE_DURATION=n}if(!this.SCENES_AUTHOR_ID_BY_INDEX){this.SCENES_AUTHOR_ID_BY_INDEX=[],this.SCENES_INDEX_BY_AUTHOR_ID={};for(var t=this.getScenes(),i=t.length,o=0;o<i;o++)this.SCENES_AUTHOR_ID_BY_INDEX[o+1]=t[o].getAttribute("author_id"),this.SCENES_INDEX_BY_AUTHOR_ID[t[o].getAttribute("author_id")]=o+1}},getScenes:function(){return this.SCENES||(this.SCENES=this.data.querySelectorAll("scenes>scene")),this.SCENES},getScenesAndTransitions:function(){return this.SCENESANDTRANSITIONS||(this.SCENESANDTRANSITIONS=this.data.querySelectorAll("scenes>scene, scenes>transition")),this.SCENESANDTRANSITIONS},getFirstSceneOfTween:function(e){for(var t=-1,i=this.getScenes(),n=i.length,o=0;o<n;o++){if(i[o].querySelector('actor[id="'+e+'"]>tween')){t=o+1;break}}return t},getScene:function(e){return this.getScenes()[e-1]},isValidSceneIndex:function(e){return n.isNotEmpty(this.getScene(e))},hasTransitionAfter:function(e){for(var t=this.getScene(e).getAttribute("author_id"),i=this.getScenesAndTransitions(),n=i.length,o=0;o<n;o++){if(i[o].getAttribute("author_id")==t)break}return o+1<n&&"transition"==i[o+1].nodeName?i[o+1]:null},getSceneDuration:function(e){if(!this.isValidSceneIndex(e))return null;if(this.SCENES_DURATION||(this.SCENES_DURATION=[]),!this.SCENES_DURATION[e]){var t=this.hasTransitionAfter(e);this.SCENES_DURATION[e]=null!=t?+Number(this.getScene(e).getAttribute("duration"))+Number(t.getAttribute("duration")):+this.getScene(e).getAttribute("duration")}return this.SCENES_DURATION[e]},getSceneIndex:function(e){return this.SCENES_INDEX_BY_AUTHOR_ID[e]},getSceneStartTime:function(e){return this.SCENES_START_TIME[e]},isMasterVisible:function(e){return!!this.isValidSceneIndex(e)&&"1"!=this.getScene(e).getAttribute("hide_master")},isWaiting:function(e){return!!this.isValidSceneIndex(e)&&"1"==this.getScene(e).getAttribute("wait")},isClickable:function(e){return!!this.isValidSceneIndex(e)&&"1"==this.getScene(e).getAttribute("clic")},isAutoLaunchNextActivity:function(){var e=null,t=!1;return this.data?(e=this.data.querySelector("movie"),e?t="1"==e.getAttribute("elm_next"):console.alert("Unavailable movie node")):console.alert("Unavailable data"),t},getPreloadDuration:function(){if(!this.PRELOAD_DURATION){var e=this.data.querySelector("movie").getAttribute("preload_duration");e&&(this.PRELOAD_DURATION=Math.min(+e,this.getMovieDuration()))}return this.PRELOAD_DURATION},getPreloadSceneList:function(e){var t=[];if(e>this.MOVIE_DURATION)return t;for(var i=Math.min(e+this.getPreloadDuration(),this.MOVIE_DURATION),n=this.getSceneAt(e);n<=this.getSceneAt(i);n++)t.push(n);return t},getSceneAt:function(e){var t;if(e>this.MOVIE_DURATION)t=null;else for(t=this.SCENES_START_TIME.length-1;void 0!==this.SCENES_START_TIME[t]&&this.SCENES_START_TIME[t]>e;)t--;return t},getNextScene:function(e,t){var i=this.getAutoLinkSceneIndex(e);return-1==i&&this.isValidSceneIndex(e+1)&&(i=e+1),i},getPreviousScene:function(e){var t=+e-1;return this.isValidSceneIndex(t)||(t=null),t},getLoop:function(){return"1"===this.data.querySelector("movie").getAttribute("loop")},getFps:function(){return parseInt(this.data.querySelector("movie").getAttribute("fps"))},getEndPause:function(){return"1"===this.data.querySelector("movie").getAttribute("endpause")},getWidth:function(){return+this.data.querySelector("movie").attributes.width.value},getHeight:function(){return+this.data.querySelector("movie").attributes.height.value},getBackgroundColor:function(){return this.data.querySelector("movie>skin").attributes.bgcolor.value},getBackgroundTransparent:function(){return"1"==this.data.querySelector("movie>skin").attributes.transparent.value},getMasterObjectList:function(){if(!this.MASTER_ACTOR_LIST){this.MASTER_ACTOR_LIST=[];var e=this.data.querySelector("master");if(e)for(var t=e.querySelectorAll("actor"),i=t.length,n=0;n<i;n++)this.MASTER_ACTOR_LIST.push(+t[n].attributes.id.value)}return this.MASTER_ACTOR_LIST},getSceneObjectList:function(e){for(var t=[],i=this.getScene(e).querySelectorAll("actor"),n=i.length,o=0;o<n;o++)t.push(+i[o].attributes.id.value);return t},getActorTweens:function(e,i){var n=[],o=this.getScene(e).querySelectorAll('actor[id="'+i+'"]>tween');0==o.length&&(o=this.data.querySelector("master").querySelectorAll('actor[id="'+i+'"]>tween'));for(var r=!1,s=o.length,a=0;a<s;a++){var l=this.data.querySelector('tweens>tween[id="'+o[a].attributes.id.value+'"]'),c=o[a].getAttribute("time");c&&(r=!0,l.setAttribute("time",c)),n.push(new t(l))}if(r){n[0].time=0;var h=n.length;-1==n[h-1].time&&(n[h-1].time=this.getSceneDuration(e));for(var u=[],d=0,a=1;a<h;a++)if(-1==n[a].time)u.push(n[a]);else{var g=(n[a].time-d)/(u.length+1);u.map(function(e){d+=g,e.time=d}),d=n[a].time,u=[]}}return n},getLib:function(e){return this.data.querySelector('lib>*[id="'+e+'"]')},getVideoFileName:function(e){return this.getLib(e).getAttribute("file")},getSkin:function(){return this.data.querySelector("skin")},getSkinControlBar:function(){return this.getSkin().querySelector("controlbar")},isClickableControlBar:function(){return 1==this.data.querySelector("movie").getAttribute("scroll")},getVideoPosition:function(e,t){var i=null,n=this.data.querySelector('sounds video[id="'+t+'"]');if(n){var o=+n.getAttribute("begin");o<e&&+n.getAttribute("end")>e&&(i=e-o)}return i},getTimeLineVideos:function(e){if(!this.VIDEOS||e){if(this.VIDEOS=[],n.isEmpty(e))var t=this.data.querySelectorAll("sounds video");else var t=this.data.querySelectorAll('sounds video[id="'+e+'"] ');for(var i=0;i<t.length;i++){var o=this.getLib(t[i].getAttribute("id"));o&&n.checkSupportExtensionMedia(o.getAttribute("file"),n.nonSupportedVideoFormats,!1)&&this.VIDEOS.push(t[i])}}return this.VIDEOS},videosCount:function(){return this.VIDEOS_COUNT||(this.VIDEOS_COUNT=this.getTimeLineVideos().length),this.VIDEOS_COUNT},getTimeLineSounds:function(){return this.SOUNDS||(this.SOUNDS=this.data.querySelectorAll('sounds sound[merge_type="merged"]'),0==this.SOUNDS.length&&(this.SOUNDS=this.data.querySelectorAll("sounds sound"))),this.SOUNDS},soundsCount:function(){return this.SOUNDS_COUNT||(this.SOUNDS_COUNT=this.getTimeLineSounds().length),this.SOUNDS_COUNT},mediasCount:function(e){return"sound"==e?this.soundsCount():this.videosCount()},getTimeLineMedias:function(e,t){return"sound"==e?this.getTimeLineSounds():this.getTimeLineVideos(t)},getMediasPositions:function(e,t,i){for(var n=[],o=this.getTimeLineMedias(t,i),r=o.length,s=0;s<r;s++){var a={authorId:o[s].getAttribute("author_id"),position:null,src:"sound"==t?o[s].getAttribute("filename"):this.getVideoFileName(o[s].getAttribute("id"))},l=+o[s].getAttribute("begin"),c=+o[s].getAttribute("end");l<e&&c>e&&(a.position=e-l),n.push(a)}return n},getMovieDuration:function(){return this.MOVIE_DURATION},getForceMobileButtons:function(){return!this.data.querySelector("movie").hasAttribute("force_mobile_buttons")||"0"!=this.data.querySelector("movie").getAttribute("force_mobile_buttons")},getLogoFile:function(){var e="";return this.getSkin().hasAttribute("logofile")&&(e=this.getSkin().getAttribute("logofile").trim()),e},getLogoWidth:function(){return+this.getSkin().getAttribute("logowidth")},getLogoHeight:function(){return+this.getSkin().getAttribute("logoheight")},canDisplayLoader:function(){return""!==this.getLogoFile()&&this.getLogoWidth()>0&&this.getLogoHeight()>0},hasResumeButton:function(){return"1"==this.getSkin().getAttribute("resumebutton")},isBeginPause:function(){return"1"==this.data.querySelector("movie").getAttribute("begininpause")},getMovieTitle:function(){var e=this.data.querySelector("title");return e?e.firstChild.textContent:""},getSceneTitle:function(e){var t=this.getScene(e),i="";return t&&(i=t.getAttribute("name")),n.getDecodedString(i)},getAutoLinkSceneId:function(e){var t,i=this.getScene(e);return i&&i.hasAttribute("auto_link")&&(t=i.getAttribute("auto_link")),t},getAutoLinkSceneIndex:function(e){var t=-1,i=this.getAutoLinkSceneId(e);if(void 0!=i){var n=this.getSceneIndex(i);n&&this.isValidSceneIndex(n)&&(t=n)}return t},getLastSceneIndex:function(){return this.getScenes().length},getNextTweenId:function(){var e=this.data.querySelectorAll("tweens>tween");if(void 0==this._nNexTweenId){this._nNexTweenId=0;for(var i=e.length,n=0;n<i;n++)new t(e[n]).id>=this._nNexTweenId&&(this._nNexTweenId=new t(e[n]).id+1)}var o=this._nNexTweenId;return this._nNexTweenId++,o},parseGroups:function(){for(var e=this.data.querySelectorAll("scene>group"),t=e.length,i=0;i<t;i++){this.parseGroup(e[i])}},addTween:function(e){this.data.querySelector("tweens").appendChild(e)},parseGroup:function(e){for(var i=[],o=e.childNodes.length,r=[],s=0;s<o;s++){var a=e.childNodes[s];switch(a.nodeName){case"actor":var l=this.parseActor(a);i.push(l);break;case"tween":var c=this.data.querySelector('tweens>tween[id="'+a.getAttribute("id")+'"]');a.getAttribute("time")&&(c.time=a.getAttribute("time")),r.push(c)}}for(var h,u,d,g,f=i.length,p=0;p<f;p++){var l=i[p],m=l.tweens[0],A=this.data.querySelector('lib>*[id="'+l.node.getAttribute("id")+'"]');if(A&&"arrow"==A.tagName){var v=m.x,b=m.width;v>b&&(v=m.width,b=m.x);var y=m.y,S=m.height;y>S&&(y=m.height,S=m.y),h=void 0!=h?Math.min(h,v):v,u=void 0!=u?Math.min(u,y):y,d=void 0!=d?Math.max(d,b):b,g=void 0!=g?Math.max(g,S):S}else h=void 0!=h?Math.min(h,m.x):m.x,u=void 0!=u?Math.min(u,m.y):m.y,d=void 0!=d?Math.max(d,m.x+m.width):m.x+m.width,g=void 0!=g?Math.max(g,m.y+m.height):m.y+m.height}for(var w=d-h,x=g-u,C=r.length,p=0;p<f;p++){var l=i[p],m=new t(l.tweens[0].toXML());l.tweens=[];for(var s=0;s<C;s++)l.tweens.push(m)}for(var s=0;s<C;s++)for(var k=new t(r[s]),p=0;p<f;p++){var l=i[p],m=new t(l.tweens[s].toXML());m.id=this.getNextTweenId();var A=this.data.querySelector('lib>*[id="'+l.node.getAttribute("id")+'"]');if(A&&"arrow"==A.tagName){var v=m.x,y=m.y,b=m.width,S=m.height;m.x=v*k.width/w+k.x,m.y=y*k.height/x+k.y,m.width=b*k.width/w+k.x,m.height=S*k.height/x+k.y,m.time=k.time}else{m.x=m.x*k.width/w+k.x,m.y=m.y*k.height/x+k.y;var _=m.width,T=m.height;m.width=m.width*k.width/w,m.height=m.height*k.height/x,m.xscale=m.width/_*100,m.yscale=m.height/T*100,m.full_width=_,m.full_height=T,m.time=k.time}m.alpha=m.alpha/100*(k.alpha/100)*100,l.tweens[s]=new t(m.toXML())}for(var s=0;s<i.length;s++){for(var R=i[s].node.querySelectorAll("tween"),E=0;E<R.length;E++)n.removeNode(R[E]);for(var E=(i[s].tweens,0);E<i[s].tweens.length;E++){var N=document.createElement("tween");N.setAttribute("id",i[s].tweens[E].id),N.setAttribute("lock",0),i[s].node.appendChild(N),this.addTween(i[s].tweens[E].toXML())}}return i},parseActor:function(e){for(var i={node:e,tweens:[]},n=e.childNodes.length,o=0,r=0;r<n;r++){var s=e.childNodes[r];if("tween"==s.nodeName){var a=s.getAttribute("id"),l=new t(this.data.querySelector('tweens>tween[id="'+a+'"]'));0==r&&(l.time=0),l.time<o&&(l.time=0),l.time>0&&(o=l.time),i.tweens.push(l)}}return i},getVideos:function(){return this.data.querySelectorAll("lib>video")},getSupportedVideos:function(){for(var e=[],t=this.getVideos(),i=t.length,o=0;o<i;o++)n.checkSupportExtensionMedia(t[o].getAttribute("file"),n.nonSupportedVideoFormats,!1)&&e.push(t[o]);return e},getListOverActorId:function(e,t){var i,n=[],o=this.getScene(e),r=o.querySelector('actor[id="'+t+'"]');if(r&&(i=r.getAttribute("over"))){for(var s=this.getActorsGroupsOnlyFirstLevel(o),a=0;s[a]&&s[a].getAttribute("id")!=t;)a++;var l=a+ +i;void 0!=s[l]&&s[l].hasAttribute("id")?this.isGroupInScene(o,s[l].getAttribute("id"))?n=this.getActorsListGroup(o,s[l].getAttribute("id")):n.push(s[l].getAttribute("id")):console.warn("Movie.js:getListOverActorId(sceneId:"+e+", actorId:"+t+")\n\t Unable to manage roll over action - invalid movie.xml data")}return n},getActorsGroupsOnlyFirstLevel:function(e){var t=[],i=e.querySelectorAll("scene>group, scene>actor");if(i)for(var n=0;n<i.length;n++){var o=i[n];if(o){var r=o.getAttribute("id");(this.isGroupInScene(e,r)||this.isActorInScene(e,r))&&t.push(o)}}return t},getActorsListGroup:function(e,t){var i=[],n=e.querySelector('group[id="'+t+'"]');if(n)for(var o=n.querySelectorAll("actor"),r=o.length,s=0;s<r;s++)i.push(o[s].getAttribute("id"));return i},isGroupInScene:function(e,t){return null!=e.querySelector('group[id="'+t+'"]')},isActorInScene:function(e,t){return null!=e.querySelector('actor[id="'+t+'"]')},isSubtitleElement:function(e){return"1"==this.getLib(e).getAttribute("subtitle_element")}});return o.MODEL_ID="MODEL_MOVIE",o}),define("graza/controller/ACommand",["lib/Class","graza/model/Runtime","graza/model/Movie"],function(e,t,i){return e.extend({runtime:null,movie:null,init:function(e){this.graza=e},getRuntime:function(){return this.runtime||(this.runtime=this.graza.getModel(t.MODEL_ID)),this.runtime},getMovie:function(){return this.movie||(this.movie=this.graza.getModel(i.MODEL_ID)),this.movie}})}),define("graza/controller/command/EndAnimationReachedCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e){var t=this.getRuntime(),i=this.getMovie();t.endAnimationReached||(t.endAnimationReached=!0,this.graza.runCommand("ExecuteAction","elm_send_event","elag_finished"),this.graza.ekhilInstance&&i.isAutoLaunchNextActivity()&&this.graza.runCommand("ExecuteAction","elm_gonextpage"),t.setValue("cmi.core.lesson_status","completed"),t.commit()),e&&e()}})}),define("graza/controller/command/ExecuteActionCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){return e.extend({callback:null,execute:function(e,i){var n=this.getRuntime();switch(n.setForceSynchronizeMedia(e,i),e){case"gotostart":this.graza.runCommand("GotoStart");break;case"pageandplay":case"page":case"goto":this.graza.runCommand("GotoScene",i,!0);break;case"pageandstop":this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"GotoScene",i));break;case"gonextpage":case"next":this.graza.runCommand("GoNextScene");break;case"ffw":case"gonextpageandplay":this.graza.runCommand("GoNextScene",!0);break;case"previous":case"gobackpage":case"rew":n.setGoingBack(!0),this.graza.runCommand("GoPreviousScene");break;case"history_back":n.history.pop(),this.graza.runCommand("GotoScene",n.history.pop(),!0);break;case"play":this.graza.runCommand("StartTimer",this.graza.runCommand.bind(this.graza,"ShowFrame")),this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("RefreshButtonState");break;case"stop":this.graza.runCommand("StopTimer",this.graza.runCommand.bind(this.graza,"GotoScene",1)),this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("RefreshButtonState");break;case"pause":this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"RefreshScene")),this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("RefreshButtonState");break;case"quit":this.graza.runCommand("Quit");break;case"gototime":this.graza.runCommand("GotoTime",i);break;case"gototimeandplay":this.graza.runCommand("StartTimer",this.graza.runCommand.bind(this.graza,"GotoTime",i));break;case"gototimeandstop":this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"GotoTime",i));break;case"elm_gonextpage":this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("Execute","gonextpage");break;case"elm_goprevpage":this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("Execute","gobackpage");break;case"elm_gotopage":this.graza.ekhilInstance&&this.graza.ekhilInstance.runCommand("Execute","gotopage",i);break;case"elm_send_event":this.graza.ekhilInstance&&(this.graza.ekhilInstance.runCommand("RefreshButtonState"),this.graza.ekhilInstance.runCommand("Execute","send_event",i));break;case"setsubtitles":n.setSubtitles(i),this.graza.runCommand("Subtitles",i,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"show_subtitles":case"setsubtitles_on":case"subtitles_on":n.setSubtitles(!0),this.graza.runCommand("Subtitles",!0,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"hide_subtitles":case"setsubtitles_off":case"subtitles_off":n.setSubtitles(!1),this.graza.runCommand("Subtitles",!1,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"open":var o=window.location.href.split("/");o.pop(),window.open(o.join("/")+"/"+this.graza.getMediaPath(i));break;case"url":var r=t.getDecodedString(i);window.open(r);break;case"print":window.print();break;case"mute":this.graza.runCommand("Sound",e,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"sound_mute_on":case"mute_on":case"sound_off":n.setSoundMute(!0),this.graza.runCommand("Sound",e,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"mute_off":case"sound_mute_off":case"unmute":case"sound_on":n.setSoundMute(!1),this.graza.runCommand("Sound",e,this.graza.runCommand.bind(this.graza,"RefreshButtonsStates"));break;case"set_volume_up":case"set_volume_down":this.graza.runCommand("Sound",e,i);break;case"validate":case"volume":default:console.log("This action is not supported (action, param) : ",e,i)}}})}),define("graza/controller/command/GoNextSceneCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e){var t=this.getMovie(),i=this.getRuntime(),n=t.getNextScene(i.currentScene);-1==n&&i.currentScene==t.getLastSceneIndex()?(i.forceSynchronizeMedia=!1,this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"GotoTime",t.getMovieDuration()))):-1!=n?this.graza.runCommand("GotoScene",n,e):console.info("Next scene index  of ["+i.currentScene+"] is not valid")}})}),define("graza/controller/command/GoPreviousSceneCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e){var t=this.getMovie(),i=this.getRuntime(),n=t.getPreviousScene(i.currentScene);null!=n&&this.graza.runCommand("GotoScene",n,e)}})}),define("graza/controller/command/GotoSceneCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e,t){var i=this.getMovie(),n=this.getRuntime();String(e).indexOf("#")>-1&&(e=i.getSceneIndex(e));var o=i.getSceneStartTime(e);n.referenceTime=(new Date).getTime()-o,n.scenesToLoad=i.getPreloadSceneList(n.getCurrentTime()),n.setForceSynchronizeMedia("GotoScene");var r;(t||n.isPlaying)&&(r=this.graza.runCommand.bind(this.graza,"StartTimer")),r=this.graza.runCommand.bind(this.graza,"ShowScene",e,r),this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"LoadScenes",r))}})}),define("graza/controller/command/GotoStartCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){return e.extend({execute:function(){var e=this.getMovie();this.getRuntime().endAnimationReached=!1,this.graza.container.controlBar&&this.graza.container.controlBar.div&&this.graza.container.controlBar.div.show();var i=(e.getTimeLineSounds().length>0||e.getSupportedVideos().length>0)&&t.isMobile(),n=!e.isBeginPause()&&!i;!n&&this.graza.container.resumeButton&&(this.graza.container.resizeScreen(),this.graza.container.resumeButton.show()),this.graza.runCommand("GotoScene",1,n)}})}),define("graza/controller/command/GotoTimeCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e,t){e=Math.max(0,Math.min(this.getMovie().getMovieDuration(),Math.round(e))),this.getRuntime().referenceTime=(new Date).getTime()-e,this.graza.runCommand("ShowFrame"),t&&t()}})}),define("graza/view/SoundVideo",["lib/Class","lib/Media"],function(e,t){return e.extend({media:null,filename:"",authorId:"",init:function(e){this.graza=e},setXML:function(e){this.filename=e.getAttribute("file"),this.authorId=e.getAttribute("author_id");var i=this.graza.getMediaPath(this.filename);this.media=new t(i)},setPosition:function(e,t){this.media.setPosition(e,t)},getDeltaPosition:function(e,t){return this.media.getDeltaPosition(e,t)},pause:function(e){this.media.pause(e)},refreshStateMedia:function(e,t,i){this.media.refreshStateMedia(e,t,i)}})}),define("graza/view/Container",["lib/Class","graza/view/SoundVideo","lib/Utils"],function(e,t,i){return e.extend({scale:1,width:0,height:0,uiobjects:null,shownUIObject:null,sounds:null,videos:null,controlBar:null,currentInputFocused:null,summaries:null,overActors:null,scaleMode:"EXACTFIT",init:function(e,t,n,o,r,s){this.uiobjects=[],this.shownUIObject=[],this.sounds=[],this.videos=[],this.summaries=[],this.overActors=[],this.graza=e,this.width=t,this.height=n,this.scaleMode=s,this.parentWindow=i.getParentWindow(),this.container=$("<div class='uiobjects' />"),$(this.graza.getParentDiv()).append(this.container),this.controlbarDiv=$("<div class='controlbar' />"),$(this.graza.getParentDiv()).append(this.controlbarDiv),this.resume_layer=$("<div class='resume_layer' />"),$(this.graza.getParentDiv()).append(this.resume_layer),this.container.css({width:t+"px",height:n+"px",position:"relative",overflow:"hidden",zIndex:0}),this.controlbarDiv.css({position:"relative",width:t+"px",height:n+"px",zIndex:1,pointerEvents:"none",overflow:"hidden"}),this.resume_layer.css({position:"absolute",width:t+"px",height:n+"px",zIndex:2}),r||this.container.css({backgroundColor:o}),this.graza.embed||($("body").css("-webkit-transform-origin","0 0"),$("body").css("-moz-transform-origin","0 0"),$("body").css("-o-transform-origin","0 0"),$("body").css("-ms-transform-origin","0 0"),$("body").css({backgroundColor:o,overflow:"hidden",transformOrigin:"0 0"}),this.parentWindow.on("resize",this.resizeScreen.bind(this))),this.resizeScreen()},resizeScreen:function(){this.container.hide(),this.controlbarDiv.hide();var e=0,t=0;if(!this.graza.embed){var i=$(window).width(),n=$(window).height();i==this.width&&/width=([0-9]+)/.test(window.location.search)&&(i=/width=([0-9]+)/.exec(window.location.search)[1],n=/height=([0-9]+)/.exec(window.location.search)[1]);var o=1;"EXACTFIT"==this.scaleMode&&(o=i/this.width<n/this.height?i/this.width:n/this.height),this.setScale(o);var r=this.getScale();e=(i/r-this.width)/2,t=(n/r-this.height)/2}this.container.css({left:e+"px",top:t+"px"});var s=this.controlbarDiv.height(),a=t-s;this.controlbarDiv.css({left:e+"px",top:a+"px"}),this.resume_layer.css({left:e+"px",top:t+"px"}),this.controlbarDiv.show(),this.container.show()},appendChild:function(e,t){this.uiobjects[e]=t,this.container.append(t.div)},getUIObject:function(e){return this.uiobjects[e]},hideAll:function(){for(var e;e=this.shownUIObject.pop();)e.hide(!1)},addSound:function(e){var i=new t(this.graza);i.setXML(e),this.sounds[i.authorId]||(this.sounds[i.authorId]=i)},addVideo:function(e){var i=new t(this.graza);i.setXML(e),this.videos[i.authorId]||(this.videos[i.authorId]=i)},setScale:function(e){this.scale=e,i.setScale(this.scale)},getScale:i.getScale.bind(i)})}),define("graza/view/PauseLayer",["lib/Class","lib/Utils","lib/Base64Images"],function(e,t,i){var n=i.getPngPlayButton(),o=i.getPngReplayButton();return e.extend({init:function(e,t){this.graza=e,this.div=$(t),this.hide(),$(this.div).append(this.createLayer());var i=$("<div/>");i.css({position:"absolute",marginLeft:this.graza.container.width/2-105+"px",marginTop:this.graza.container.height/2-50+"px"});var r=this.createButton(n,this.onButtonPlayClickEvent.bind(this));i.append(r);var s=this.createButton(o,this.onButtonReplayClickEvent.bind(this));i.append(s),s.css({marginLeft:"10px"}),$(this.div).append(i)},createLayer:function(){var e=$("<div/>");return e.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundColor:"white",opacity:.7,pointerEvents:"auto",cursor:"pointer"}),e.on("click",this.onButtonPlayClickEvent.bind(this)),e},createButton:function(e,t){var i=$("<div/>");return i.css({cursor:"pointer",display:"inline-block",maxHeight:"100%",pointerEvents:"all"}),i.get(0).innerHTML=e,i.on("click",t),i},onButtonPlayClickEvent:function(e){this.graza.runCommand("ExecuteAction","play")},onButtonReplayClickEvent:function(e){this.graza.runCommand("ExecuteAction","pageandplay",1)},show:function(){this.div.show()},hide:function(){this.div.hide()}})}),define("graza/controller/command/InitializeViewCommand",["graza/controller/ACommand","graza/view/Container","graza/view/PauseLayer","lib/Utils"],function(e,t,i,n){return e.extend({execute:function(){var e=this.getMovie();this.graza.container=new t(this.graza,e.getWidth(),e.getHeight(),e.getBackgroundColor(),e.getBackgroundTransparent(),this.graza.scaleMode),this.graza.container.container.on("click",this.onContainerClickEvent.bind(this)),this.createMedias(e);var o=(e.getTimeLineSounds().length||e.getSupportedVideos().length)&&n.hasTouchEvent();(e.isBeginPause()||o||null!=this.graza.loadCallback)&&(this.getRuntime().referenceTime=(new Date).getTime()),e.hasResumeButton()||o&&e.getForceMobileButtons()?this.graza.container.resumeButton=new i(this.graza,this.graza.container.resume_layer):this.graza.container.resume_layer.hide();var r=this.graza.loadCallback?this.graza.loadCallback:this.graza.runCommand.bind(this.graza,"ShowFrame",this.graza.runCommand.bind(this.graza,"GotoStart"));this.graza.runCommand("LoadSkin",this.onSkinLoadedEvent.bind(this,r))},onSkinLoadedEvent:function(e){this.graza.runCommand("LoadScenes",e),this.graza.runCommand("Sound")},createMedias:function(e){for(var t=e.getTimeLineSounds(),i=t.length,n=0;n<i;n++)this.graza.container.addSound(t[n]);for(var o=e.getTimeLineVideos(),r=o.length,n=0;n<r;n++){var s=o[n].getAttribute("id");e.getLib(s)&&(o[n].setAttribute("file",e.getVideoFileName(s)),this.graza.container.addVideo(o[n]))}},onContainerClickEvent:function(){var e=this.getMovie(),t=this.getRuntime(),i=t.currentScene;e.isClickable(i)&&(t.currentScene==e.getLastSceneIndex()?(t.forceSynchronizeMedia=!1,this.graza.runCommand("GotoTime",e.getMovieDuration())):this.graza.runCommand("ExecuteAction","gonextpageandplay"))}})}),define("graza/controller/command/LoadMovieCommand",["graza/controller/ACommand","graza/model/Movie"],function(e,t){return e.extend({execute:function(e){var i=new t;this.graza.addModel(i,t.MODEL_ID),i.load(e,this.onMovieLoadedEvent.bind(this))},onMovieLoadedEvent:function(e){var t=this.getMovie();t.setData(e),t.parseGroups(),this.graza.runCommand("LoadRuntime")}})}),define("graza/controller/command/LoadRuntimeCommand",["graza/controller/ACommand","lib/Utils","graza/model/Runtime","graza/model/Movie"],function(e,t,i,n){return e.extend({execute:function(){var e=new i;if(this.graza.ekhilRuntime&&(e.parentRuntime=this.graza.ekhilRuntime),e.load(this.graza.embed),e.apiDetected){this.graza.addModel(e,i.MODEL_ID);var t=this.getMovie(),n=e.getValue("cmi.core.lesson_location"),o=n?t.getSceneStartTime(n):0;e.scenesToLoad=t.getPreloadSceneList(o),this.onRuntimeLoadedEvent()}},onRuntimeLoadedEvent:function(){this.getRuntime().trackingInitalized&&$(window).one("beforeunload unload",this.graza.runCommand.bind(this.graza,"Quit")),this.graza.runCommand("InitializeView")}})}),define("graza/controller/command/LoadScenesCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){return e.extend({callback:null,execute:function(e){void 0==e&&(e=new Function),this.callback=e,this.runtime=this.getRuntime(),this.movie=this.getMovie(),this.loadScenes()},loadScenes:function(e){if(e&&(this.runtime.scenesLoaded[e]=!0),0===this.runtime.scenesToLoad.length)this.callback.call();else{var t=this.runtime.scenesToLoad.shift();this.runtime.scenesLoaded[t]?this.loadScenes():this.loadScene(t)}},loadScene:function(e){var t=[];this.movie.isMasterVisible(e)&&(t=t.concat(this.movie.getMasterObjectList())),t=t.concat(this.movie.getSceneObjectList(e)),this.loadUIObjects(t,e)},loadUIObjects:function(e,t){var i=e.shift();if(i){var n=this.loadUIObjects.bind(this,e,t),o=this.graza.container.getUIObject(i);if(o)o.load(n);else{var r=this.movie.getLib(i);this.createUIObject(i,r,n)}}else this.loadScenes(t)},createUIObject:function(e,i,n){var o="UIO"+t.ucfirst(i.tagName);require(["graza/view/uiobject/"+o],this.onUIObjectClassLoaded.bind(this,e,i,n))},onUIObjectClassLoaded:function(e,t,i,n){var o=new n(this.graza);this.graza.container.appendChild(e,o),o.id=e,o.setXML(t),this.setUIObjectData(o),o.load(i)},setUIObjectData:function(e){switch(e.type){case"summary":var t=this.movie.getScenes();e.setData(t),this.graza.container.summaries.push(e);break;case"input":e.setContainer(this.graza.container)}}})}),define("graza/view/AUIObject",["lib/Class"],function(e){return e.extend({id:null,div:null,type:"",currentSceneTweens:null,loaded:!1,eventsEnabled:!1,haveOverActor:!1,init:function(e){this.currentSceneTweens=[],this.graza=e,void 0==this.div&&(this.div=$("<div />"),this.div.css({position:"absolute"}),this.enableEvents(!1),this.div.hide())},setXML:function(e){this.type=e.nodeName,
this.div.attr("id",this.type+e.getAttribute("id"))},load:function(e){this.loaded=!0,e.call()},show:function(e){(this.div&&!this.hideOverActor||e)&&(this.div.get(0).style.display="block")},hide:function(e){void 0!==e&&(this.hideOverActor=e),this.div&&(this.div.get(0).style.display="none")},applyTween:function(e){e&&(this.tween=e),this.draw()},draw:function(){this.div.css({left:this.tween.x+"px",top:this.tween.y+"px",width:this.tween.width+"px",height:this.tween.height+"px",opacity:this.tween.alpha/100});var e=[];this.tween.vflip&&e.push("scaleY(-1)"),this.tween.hflip&&e.push("scaleX(-1)"),e.push("translateZ(0)"),e.length&&this.div.css({"-moz-transform":e.join(" "),"-o-transform":e.join(" "),"-webkit-transform":e.join(" "),transform:e.join(" ")}),void 0!==this.tween.rotation&&null!==this.tween.rotation&&this.div.css({transform:"rotate("+this.tween.rotation+"deg)"+e.join(" "),transformOrigin:"50% 50%"})},onEnterEvent:function(e){$(this.div).on("mouseenter touchstart",function(){this.eventsEnabled&&e()}.bind(this))},onLeaveEvent:function(e){$(this.div).on("mouseleave touchend",function(){this.eventsEnabled&&e()}.bind(this))},enableEvents:function(e){this.eventsEnabled=e,$(this.div).css({pointerEvents:e?"auto":"none"})}})}),define("graza/view/uiobject/UIOButton",["graza/view/AUIObject","lib/Utils"],function(e,t){return e.extend({enabled:null,init:function(e,t){this.isSkinButton=t||!1,this._super.apply(this,arguments),this.img_on=$('<div class="btn-image"/>'),this.img_down=$('<div class="btn-image"/>'),this.img_roll=$('<div class="btn-image"/>'),this.img_off=$('<div class="btn-image"/>'),this.img_out=$('<div class="btn-image"/>');var i={position:"absolute",width:"100%",height:"100%"};this.img_on.css(i),this.img_down.css(i),this.img_roll.css(i),this.img_off.css(i),this.img_out.css(i),this.img_on.show(),this.img_down.hide(),this.img_roll.hide(),this.img_off.hide(),this.img_out.hide(),this.div.append(this.img_on),this.div.append(this.img_down),this.div.append(this.img_roll),this.div.append(this.img_off),this.div.append(this.img_out),this.div.css({cursor:"pointer",pointerEvents:"auto"})},setXML:function(e){this._super(e),e.hasAttribute("file_out")&&""!==e.getAttribute("file_out")||!e.hasAttribute("file_on")||e.setAttribute("file_out",e.getAttribute("file_on"));var i=t.parseXMLAttributes(e);this.xml=e,this.file_on=i.file_on,this.file_down=i.file_down,this.file_out=i.file_out,this.file_off=i.file_off,this.file_roll=i.file_roll,this.action=i.type,this.param=i.param,this.rollover="1"==i.rollover},load:function(e){this.loaded?e():(this.loadImages([{element:this.img_on,path:this.file_on},{element:this.img_down,path:this.file_down},{element:this.img_off,path:this.file_off},{element:this.img_roll,path:this.file_roll},{element:this.img_out,path:this.file_out}],e),this.loaded=!0)},loadImages:function(e,t){if(e.length>0){var i=e.shift();if(i.path){var n=new Image;n.src=this.graza.getMediaPath((this.isSkinButton?"_skin/":"")+i.path),n.style.width="100%",n.style.height="100%",n.style.position="absolute",i.element.append(n),n.addEventListener("load",this.loadImages.bind(this,e,t)),n.addEventListener("error",this.loadImages.bind(this,e,t))}else this.loadImages(e,t)}else t.call()},enable:function(e){this.enabled!=e&&(this.enabled=e,this.enabled?(this.div.off("click"),this.div.on("click",this.onButtonClickEvent.bind(this)),this.rollover&&(this.div.off("mouseenter"),this.div.on("mouseenter",this.onButtonClickEvent.bind(this))),this.div.off("touchstart"),this.div.on("touchstart",this.onButtonTouchStartEvent.bind(this)),this.div.off("touchend"),this.div.on("touchend",this.onButtonTouchEndEvent.bind(this)),this.div.hover(this.onButtonMouseenterEvent.bind(this),this.onButtonMouseleaveEvent.bind(this)),this.img_on.show(),this.img_roll.hide(),this.img_off.hide(),this.img_out.hide(),this.div.css({pointerEvents:"auto"})):(this.div.off(),this.img_on.hide(),this.img_roll.hide(),this.img_off.show(),this.img_out.hide(),this.div.css({pointerEvents:"none"})))},onButtonClickEvent:function(e){e&&e.preventDefault(),this.enabled&&this.graza.runCommand("ExecuteAction",this.action,this.param)},onButtonTouchStartEvent:function(e){e&&e.preventDefault(),this.onMouseDownEvent()},onButtonTouchEndEvent:function(e){e&&e.preventDefault(),this.onMouseUpEvent(),this.onButtonClickEvent()},onButtonMouseenterEvent:function(e){this.enabled&&($(".btn-image",this.div).hide(),this.img_roll.show())},onButtonMouseleaveEvent:function(e){this.enabled&&($(".btn-image",this.div).hide(),this.img_out.show(),setTimeout(function(){this.img_out.hide(),this.img_on.show()}.bind(this),100))},onMouseDownEvent:function(e){this.enabled&&($(".btn-image",this.div).hide(),this.img_down.show())},onMouseUpEvent:function(e){this.enabled&&($(".btn-image",this.div).hide(),this.img_out.show())},haveParam:function(){return!!this.param}})}),define("graza/model/Button",["lib/Class","graza/model/Tween"],function(e,t){return e.extend({export_visibility:null,tween:null,file_roll:null,file_down:null,file_on:null,show_button:null,name:null,init:function(e){this.name=e.name,this.export_visibility=e.export_visibility,this.tween=new t,this.tween.height=e.height,this.tween.width=e.width,this.tween.x=e.left,this.tween.y=e.top,this.tween.alpha=100,this.file_on=e.file_on,this.file_roll=e.file_roll,this.file_down=e.file_down,this.show_button=e.show_button},toXML:function(){var e=document.createElement(this.name);for(var t in this)this.hasOwnProperty(t)&&e.setAttribute(t,this[t]);return e}})}),define("graza/model/ControlBar",["lib/Class","lib/Utils","graza/model/Button"],function(e,t,i){return e.extend({margin:null,color:null,buttons:null,externalBar:null,buttonAutoSize:22,buttonAutoInOffset:2,BUTTON_LIST:["play","pause","stop","rew","ffw","sound_on","sound_off","subtitles_on","subtitles_off"],init:function(e,t,n){if(void 0!=e){this.margin={right:+e.getAttribute("margin_right")||0,left:+e.getAttribute("margin_left")||0,bottom:+e.getAttribute("margin_bottom")||0},this.color=e.getAttribute("color"),this.externalBar=e.querySelector("external_bar"),this.buttons=new Object;var o={y:n-this.margin.bottom-this.buttonAutoSize,x:this.margin.left};e=this.formatSkinControlBar(e),this.BUTTON_LIST.map(function(t){var n=e.querySelector(t),r={name:t,export_visibility:n.getAttribute("export_visibility"),file_roll:n.getAttribute("file_roll")||"",file_down:n.getAttribute("file_down")||"",file_on:n.getAttribute("file_on")||"",file_off:n.getAttribute("file_off")||"",show_button:n.getAttribute("show_button")};"1"==n.getAttribute("auto_position")?(r.left=o.x,r.top=o.y,r.width=this.buttonAutoSize,r.height=this.buttonAutoSize,"play"==t&&"1"==e.querySelector("pause").getAttribute("auto_position")||"sound_on"==t||"subtitles_on"==t||"1"!=r.show_button||(o.x+=this.buttonAutoSize+this.buttonAutoInOffset)):(r.left=+n.getAttribute("left")||0,r.top=+n.getAttribute("top")||0,r.width=+n.getAttribute("width")||0,r.height=+n.getAttribute("height")||0),this.buttons[t]=new i(r)}.bind(this)),this.externalBar.left=o.x,this.externalBar.top=o.y,this.externalBar.width=t-o.x-this.margin.right,this.externalBar.height=this.buttonAutoSize}},toXML:function(){var e=document.createElement("controlbar");for(var t in this)this.hasOwnProperty(t)&&e.setAttribute(t,this[t]);return e},formatSkinControlBar:function(e){var t=function(e,t,i,n,o){var r=document.createElement(t);for(var s in e.attributes)"string"==typeof e.attributes[s].value&&r.setAttribute(e.attributes[s].name,e.attributes[s].value);return r.setAttribute("file_on",e.getAttribute(i)),r.setAttribute("file_roll",e.getAttribute(n)),r.setAttribute("file_down",e.getAttribute(o)),r};try{var i=e.querySelector("sound");void 0!=i&&(i.setAttribute("file_off",""),e.appendChild(t(i,"sound_off","file_on_on","file_on_roll","file_on_roll")),e.appendChild(t(i,"sound_on","file_off_on","file_off_roll","file_off_roll")),e.removeChild(i));var n=e.querySelector("subtitles");void 0!=n&&(n.setAttribute("file_off",""),e.appendChild(t(n,"subtitles_off","file_on_on","file_on_roll","file_on_roll")),e.appendChild(t(n,"subtitles_on","file_off_on","file_off_roll","file_off_roll")),e.removeChild(n))}catch(e){console.error(e)}return e}})}),define("graza/view/ControlBar",["lib/Class","lib/Utils","graza/view/uiobject/UIOButton","lib/DragAndDrop","graza/model/ControlBar","lib/Base64Images","graza/model/Runtime","graza/model/Movie"],function(e,t,i,n,o,r,s,a){return e.extend({buttons:null,onDrag:!1,progressBarWidth:0,cursorWidth:0,buttonHeight:22,offsetLeft:1,position:0,model:null,init:function(e,t,n,o){this.buttons=[],this.graza=e,this.movieDuration=n,this.div=$("<div/>"),this.model=t,this.model.BUTTON_LIST.map(function(e){var t=this.model.buttons[e].toXML();if("1"===t.getAttribute("show_button")){var n=new i(this.graza,!0);n.setXML(t),n.action=e,this.div.append(n.div),this.buttons.push(n)}}.bind(this)),this.cursor=$("<div/>"),this.timeContainer=$("<div/>").text(0),this.imgCursor=new Image,this.cursor.append(this.imgCursor),this.cursor.append(this.timeContainer),$(this.cursor).on("dragstart",function(){this.onDrag=!0}.bind(this)),$(this.cursor).on("dragend",function(){this.onDrag=!1}.bind(this)),$(this.cursor).on("click",function(e){e.stopPropagation(),e.preventDefault()}),$(this.cursor).on("drag",this.onCursorDragEvent.bind(this)),$(this.cursor).draggable({axis:"x"}),this.progressBar=$("<div/>"),this.progressBar.append(this.cursor),o&&$(this.progressBar).on("click",this.onControlBarClickEvent.bind(this)),this.barImages=$("<div/>"),this.middle=$("<div/>"),this.barImages.append(this.middle),this.imgMiddle=new Image,this.imgMiddle.className="imgMiddle",this.middle.append(this.imgMiddle),this.imgEmpty=new Image,this.imgEmpty.className="imgEmpty",this.middle.append(this.imgEmpty),this.fullContainer=$("<div/>"),this.middle.append(this.fullContainer),this.imgFull=new Image,this.imgFull.className="imgFull",this.fullContainer.append(this.imgFull),this.imgEnd=new Image,this.imgEnd.className="imgEnd",this.barImages.append(this.imgEnd),this.imgBegin=new Image,this.imgBegin.className="imgBegin",this.barImages.append(this.imgBegin),this.progressBar.append(this.barImages),this.div.append(this.progressBar)},getButtons:function(){return this.buttons},setProgression:function(e){e>this.movieDuration&&(e=this.movieDuration);var i=e/1e3,n=t.seconds2HMSArray(Math.round(i)),o=t.pad(n[0],2)+":"+t.pad(n[1],2)+":"+t.pad(n[2],2);this.timeContainer.text(o);var r=e/this.movieDuration*(this.model.externalBar.width-this.cursorWidth);this.cursor.css("left",r+"px"),this.fullContainer.css("width",r+this.cursorWidth/2+"px")},load:function(e){var t=this.model.externalBar.getAttribute("file_cursor");t&&""!=t&&"undefined"!=t&&" "!=t?(this.imgCursor.addEventListener("error",function(i){console.warn("LoadControlBar :: The specified path is incorrect : "+t),this.imgCursor.src=r.getMissingImg(),e()}.bind(this)),this.imgCursor.addEventListener("load",function(){this.loadButtons(this.buttons.concat(),this.loadControlBar.bind(this,e))}.bind(this),!1),this.imgCursor.src=this.graza.getMediaPath("_skin/"+t)):(console.warn("LoadControlBar :: The specified path is incorrect : "+t),e())},loadButtons:function(e,t){if(e.length>0){e.pop().load(this.loadButtons.bind(this,e,t))}else t()},loadControlBar:function(e){var t=[{name:"file_full",element:this.imgFull},{name:"file_empty",element:this.imgEmpty},{name:"file_middle",element:this.imgMiddle},{name:"file_end",element:this.imgEnd},{name:"file_begin",element:this.imgBegin}],i=function(e,t){if(e.length>0){var n=e.pop();this.model.externalBar.getAttribute(n.name).match(/.*\.[a-z0-9]+/i)?(n.element.src=this.graza.getMediaPath("_skin/"+this.model.externalBar.getAttribute(n.name)),n.element.addEventListener("load",i(e,t))):i(e,t)}else t()}.bind(this);i(t,e)},draw:function(){this.cursorWidth=this.imgCursor.width,this.cursor.css({position:"absolute",left:0,top:0,zIndex:2,pointerEvents:"auto",fontFamily:"Arial",color:this.model.externalBar.getAttribute("fontcolor"),fontSize:this.model.externalBar.getAttribute("fontsize")+"px",height:"100%"}),$(this.imgCursor).css({position:"absolute",verticalAlign:"middle",height:"100%"}),this.timeContainer.css({position:"absolute",display:"1"==this.model.externalBar.getAttribute("show_time")?"block":"none",left:0,top:0,textAlign:"center",pointerEvents:"none",lineHeight:this.imgCursor.height+"px",width:this.imgCursor.width+"px",height:this.imgCursor.height+"px"}),this.buttons.map(function(e){e.applyTween(this.model.buttons[e.action].tween),e.draw(),e.show()}.bind(this)),this.progressBar.css({position:"absolute",top:this.model.externalBar.top+"px",left:this.model.externalBar.left+"px",width:this.model.externalBar.width+"px",height:this.model.externalBar.height+"px",pointerEvents:"auto"}),this.barImages.css({width:this.model.externalBar.width+"px",height:this.model.externalBar.height+"px",overflow:"hidden"}),this.middleWidth=this.model.externalBar.width-this.imgBegin.width-this.imgEnd.width,$(this.imgBegin).css({position:"absolute",left:0,top:0,height:"100%"}),$(this.imgEnd).css({position:"absolute",left:this.middleWidth+this.imgBegin.width+"px",top:0,height:"100%"}),this.middle.css({position:"absolute",left:this.imgBegin.width+"px",top:0,height:"100%",width:this.middleWidth+"px"}),this.fullContainer.css({position:"absolute",left:0,top:0,height:"100%",width:"100%",overflow:"hidden"}),this.asyncLoadDrawBar()},asyncLoadDrawBar:function(){var e=new Image,t=this;e.onload=function(){var e=parseFloat(this.height);t.drawBar(e)},e.src=this.imgFull.src},drawBar:function(e){[$(this.imgFull),$(this.imgEmpty),$(this.imgMiddle)].map(function(t){t.css({verticalAlign:"middle",position:"absolute",left:0,top:0,width:this.middleWidth+"px",height:isNaN(e)||e>this.buttonHeight?"100%":e+"px"})}.bind(this))},gotoTargetTime:function(e){var t=this.graza.getModel(a.MODEL_ID),i=this.graza.getModel(s.MODEL_ID),n=t.getSceneAt(e);i.isPlaying?t.isValidSceneIndex(n)&&!i.scenesLoaded[n]?this.graza.runCommand("GotoScene",n):this.graza.runCommand("GotoTime",e):this.graza.runCommand("StartTimer",this.graza.runCommand.bind(this.graza,"GotoTime",e))},onCursorDragEvent:function(e){var i=this.graza.getModel(s.MODEL_ID),n=t.removeCSSUnit(e.currentTarget.style.left);n>this.model.externalBar.width-this.cursorWidth?e.currentTarget.style.left=this.model.externalBar.width-this.cursorWidth+"px":n<0&&(e.currentTarget.style.left=0),n=t.removeCSSUnit(e.currentTarget.style.left);var o=Math.round(n/(this.model.externalBar.width-this.cursorWidth)*this.movieDuration);i.forceSynchronizeMedia=!1,this.gotoTargetTime(o)},onControlBarClickEvent:function(e){var i=this.graza.getModel(s.MODEL_ID),n=t.getScale(),o=e.currentTarget,r=$(o).offset().left,a=$(o).width(),l=(e.clientX-r)/a/n*this.movieDuration;i.forceSynchronizeMedia=!1,this.gotoTargetTime(l)}})}),define("graza/controller/command/LoadSkinCommand",["graza/controller/ACommand","graza/view/ControlBar","graza/model/ControlBar","lib/Utils"],function(e,t,i,n){return e.extend({execute:function(e){var n=this.getMovie();if(void 0!=n&&null!=n.getSkinControlBar()){var o=new i(n.getSkinControlBar(),n.getWidth(),n.getHeight());this.graza.container.controlBar=new t(this.graza,o,n.getMovieDuration(),n.isClickableControlBar()),this.graza.container.controlbarDiv.append(this.graza.container.controlBar.div),this.graza.container.controlBar.div.hide(),this.graza.container.controlBar.load(this.onControlBarLoaded.bind(this,e))}else e()},onControlBarLoaded:function(e){this.graza.container.controlBar.draw(),e()}})}),define("lib/AnimationFrameHelper",["lib/Utils"],function(e){var t={},i=0,n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},o=n,r=function(e){window.setTimeout(e,1e3/60)},s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,a=null,l=function(){for(var e in t)t[e].call();o(l)};return{setRequestAnimationFrame:function(e){o=e},getVisibleTabRequestAnimationFrame:function(){return n},getHiddenTabRequestAnimationFrame:function(){return r},subscribe:function(e){return i++,t[i]=e,i},unsubscribe:function(e){delete t[e]},start:function(){null==a&&(a=o(l))},stop:function(){s(a),a=null},grazaFunctions:"bound runCommand"}}),define("graza/controller/command/PauseTimerCommand",["graza/controller/ACommand","lib/AnimationFrameHelper"],function(e,t){return e.extend({execute:function(e,i){var n=this.getRuntime();t.unsubscribe(n.timerId),n.isPlaying=!1,n.pausedTime=Date.now(),void 0!==i?setTimeout(function(){$(".loader").hide(),n.isTechnicalPause=!1,this.graza.runCommand("StartTimer")}.bind(this),i):(this.getMovie().hasResumeButton()&&this.graza.container.resumeButton&&this.graza.container.resumeButton.show(),this.graza.runCommand("RefreshScene")),e&&e.call()}})}),define("graza/controller/command/QuitCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){var i=e.extend({execute:function(){var e=this.getRuntime();e.setValue("cmi.core.lesson_location",e.currentScene),e.setValue("cmi.core.session_time",t.seconds2HMSString(e.getSessionTime())),e.commit(),e.setValue("cmi.core.exit","suspend"),e.quit(),this.exitWindow(2)},exitWindow:function(e){var n="<br/>";if(10==e)n+="Vous pouvez maintenant fermer la fen&ecirc;tre<br/>",n+="Now you can close the window<br/>",n+="Usted puede ahora cerrar la ventana<br/>",$("#container").html(n),$("#container").css({background:"none",textAlign:"center"});else{n+="Veuillez patienter<br/>",n+="Please wait<br/>",n+="Por favor espere<br/>",n+='<img src="'+i.LOADER+'" />',$("#container").html(n),$("#container").css("background","none"),$("#container").css({background:"none",textAlign:"center"}),setTimeout(t.relegate(this,this.exitWindow,e+1),300)}window!=window.parent&&null!=window.parent&&void 0!=window.parent||window.close()}});return i.LOADER="data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPj4+Dg4OISEhAYGBiYmJtbW1qioqBYWFnZ2dmZmZuTk5JiYmMbG\t\t\t\txkhISFZWVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05F\t\t\t\tVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAA\t\t\t\tEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla\t\t\t\t+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAkKAAAALAAAAAAQABAAAAVoICCKR9KM\t\t\t\taCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr\t\t\t\t6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkECQoAAAAsAAAAABAA\t\t\t\tEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoL\t\t\t\tLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkECQoAAAAsAAAA\t\t\t\tABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7\t\t\t\tbaJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAkKAAAALAAAAAAQABAAAAVgICCO\t\t\t\tZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYA\t\t\t\tqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAkKAAAALAAAAAAQABAAAAVf\t\t\t\tICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0Ua\t\t\t\tFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==",i}),define("graza/controller/command/RefreshButtonsStatesCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){return e.extend({execute:function(e){if(e)this.refreshButtonState(e);else for(var t=this.graza.container.shownUIObject,i=t.length,n=0;n<i;n++){var o=t[n];"button"===o.type&&this.refreshButtonState(o)}},refreshButtonState:function(e){var i=this.getRuntime(),n=this.getMovie();switch(e.action){case"play":var o=i.currentScene==n.getLastSceneIndex()&&i.getCurrentTime()>=n.getMovieDuration();o?e.enable(!0):e.enable(!i.isPlaying);break;case"pause":var o=i.currentScene==n.getLastSceneIndex()&&i.getCurrentTime()>=n.getMovieDuration();o?e.enable(!1):e.enable(i.isPlaying);break;case"show_subtitles":case"setsubtitles_on":case"subtitles_on":e.enable(!i.showSubtitles);break;case"hide_subtitles":case"setsubtitles_off":case"subtitles_off":e.enable(i.showSubtitles);break;case"gonextpage":case"gonextpageandplay":e.enable(n.isValidSceneIndex(i.currentScene+1));break;case"gobackpage":e.enable(n.isValidSceneIndex(i.currentScene-1));break;case"goto":e.enable(e.haveParam()&&n.isValidSceneIndex(e.param));case"page":case"pageandplay":var r=n.getSceneIndex(e.param);e.enable(e.haveParam()&&n.isValidSceneIndex(r));break;case"history_back":e.enable(i.hasPreviousIndex());break;case"sound_mute_on":case"mute":case"sound_off":var s=!i.getSoundMute()&&!t.IOS;e.enable(s);break;case"sound_mute_off":case"mute_off":case"sound_mute_off":case"unmute":case"sound_on":var s=i.getSoundMute()&&!t.IOS;e.enable(s);break;case"validate":case"quit":case"print":case"open":case"url":case"set_volume_up":case"set_volume_down":case"elm_gotopage":case"elm_gonextpage":case"elm_goprevpage":case"elm_send_event":case"none":default:e.enable(!0)}}})}),define("graza/model/VariableList",[],function(){return{CURRENT_SCENE:"CS",TOTAL_SCENE:"TS",ANIMATION_TITLE:"AT",SCENE_TITLE:"ST",CURRENT_TIME:"CT",TOTAL_TIME:"TT"}}),define("graza/controller/command/RefreshSceneCommand",["graza/controller/ACommand","lib/Utils","graza/model/Tween","graza/model/VariableList"],function(e,t,i,n){return e.extend({callback:null,maxDeltaTime:1e3,execute:function(e){this.runtime=this.getRuntime(),this.movie=this.getMovie();var t=this.runtime.getCurrentTime();this.runtime.scenesToLoad=this.movie.getPreloadSceneList(t),this.deltaTime=0;for(var i=this.graza.container.shownUIObject.length,o=this.movie.getSceneDuration(this.runtime.currentScene),r=this.movie.getSceneStartTime(this.runtime.currentScene),s=t-r,a=this.getVariableData(),l=0;l<i;l++){var c=this.graza.container.shownUIObject[l];this.animationTitle=a[n.ANIMATION_TITLE],c.applyTween(this.getCalculatedTween(c.currentSceneTweens,o,s,!1)),this.refreshUIObject(c,t,a,s)}this.runtime.isTechnicalPause||(this.refreshMedias("sound"),this.runtime.isPlaying&&0!=this.deltaTime&&(this.movie.soundsCount()||this.movie.videosCount())&&this.correctReferenceTime(),this.refreshControlBar()),!0!==e&&this.graza.runCommand("LoadScenes")},refreshControlBar:function(){if(this.graza.container.controlBar){var e=this.graza.container.controlBar.getButtons();for(var t in e)this.graza.runCommand("RefreshButtonsStates",e[t]);this.graza.container.controlBar.setProgression(this.runtime.getCurrentTime())}},refreshMedias:function(e,t){if(this.movie.mediasCount(e)){for(var i=this.movie.getLastSceneIndex()==this.runtime.currentScene,n=this.movie.getMediasPositions(this.runtime.getCurrentTime(),e,t),o=0;o<n.length;o++){var r="sound"==e?this.graza.container.sounds[n[o].authorId]:this.graza.container.videos[n[o].authorId];if(r)if(r.refreshStateMedia(n[o].position,this.runtime.isPlaying,i),this.runtime.forceSynchronizeMedia){var s=r.getDeltaPosition(n[o].position,this.runtime.isPlaying);this.deltaTime=Math.abs(s)>Math.abs(this.deltaTime)?s:this.deltaTime}else null!=n[o].position&&(r.setPosition(n[o].position,this.runtime.isPlaying),this.runtime.forceSynchronizeMedia=!0,this.deltaTime=0)}if(this.runtime.forceSynchronizeMedia&&this.deltaTime>this.maxDeltaTime)for(var o=0;o<n.length;o++){var r="sound"==e?this.graza.container.sounds[n[o].authorId]:this.graza.container.videos[n[o].authorId];r.pause(this.deltaTime)}}},correctReferenceTime:function(){this.deltaTime>0&&this.deltaTime<this.maxDeltaTime?this.runtime.referenceTime-=this.deltaTime:this.runtime.forceSynchronizeMedia&&Math.abs(this.deltaTime)>=this.maxDeltaTime&&(this.runtime.isTechnicalPause=!0,$(".loader").show(),this.graza.runCommand("PauseTimer",null,this.maxDeltaTime))},refreshUIObject:function(e,t,i,n){switch(e.type){case"video":this.runtime.isTechnicalPause||this.refreshMedias("video",e.id);break;case"text":e.setData(i),e.animation&&(!e.animation_first||e.animation_first&&this.movie.getFirstSceneOfTween(e.id)==this.runtime.currentScene)&&e.refreshTextAnimation(n);break;case"button":this.graza.runCommand("RefreshButtonsStates",e);break;case"summary":var o=!1;this.runtime.currentScene!=this.runtime.lastViewedScene&&(this.runtime.lastViewedScene=this.runtime.currentScene,o=!0),e.setCurrentScene(this.runtime.currentScene,o)}},getCalculatedTween:function(e,t,n,o){var r;if(e.length<=1)r=o?e[0]:null;else if(n>=t)r=e[e.length-1];else{for(var s=e.length,a=s-1,l=!1;!l&&a>=0;)void 0!=e[a].time&&e[a].time>0&&(l=!0),a--;if(l&&!o){for(var a=0;n>e[a].time&&a<s-1;)a++;r=a<s&&e[a-1]?this.getCalculatedTween([e[a-1],e[a]],e[a].time-e[a-1].time,n-e[a-1].time,!0):this.getCalculatedTween([e[a]],t-e[a].time,n-t,!0)}else{r=new i;var c,h,u,s=e.length,d=Math.floor(n/(t/(s-1)));c=e[d],h=e[d+1],c?(u=n%(t/(s-1))/(t/(s-1)),r.alpha=c.alpha+(h.alpha-c.alpha)*u,r.x=c.x+(h.x-c.x)*u,r.y=c.y+(h.y-c.y)*u,r.width=c.width+(h.width-c.width)*u,r.height=c.height+(h.height-c.height)*u,r.full_width=c.full_width,r.full_height=c.full_height,r.xscale=c.xscale+(h.xscale-c.xscale)*u,r.yscale=c.yscale+(h.yscale-c.yscale)*u,r.rotation=c.rotation+(h.rotation-c.rotation)*u,r.hflip=c.hflip,r.vflip=c.vflip):console.warn("Tween not found of position: "+n+" > scene: "+this.currentScene+" > Animation : "+this.animationTitle)}}return r},getVariableData:function(){var e={};return e[n.CURRENT_SCENE]=this.runtime.currentScene,e[n.TOTAL_SCENE]=this.movie.getScenes().length,e[n.ANIMATION_TITLE]=this.movie.getMovieTitle(),e[n.SCENE_TITLE]=this.movie.getSceneTitle(this.runtime.currentScene),e[n.CURRENT_TIME]=Math.round(this.runtime.getCurrentTime()/1e3),e[n.TOTAL_TIME]=Math.round(this.movie.getMovieDuration()/1e3),e}})}),define("lib/AnimationLoader",["lib/Class"],function(e){return e.extend({displayLoader:function(e,t){try{$(".loader").css({backgroundImage:"url("+t+")",width:e.getLogoWidth()+"px",height:e.getLogoHeight()+"px",left:($(window).width()-e.getLogoWidth())/2,top:($(window).height()-e.getLogoHeight())/2}),$(".loader").show()}catch(e){console.warn("LoadScenesCommand::displayLoader: The logo path is incorrect : "+t)}},hideLoader:function(e){e?setTimeout(function(){$(".loader").hide()},e):$(".loader").hide()}},{init:function(){}})}),define("graza/controller/command/ShowFrameCommand",["graza/controller/ACommand","lib/AnimationLoader"],function(e,t){return e.extend({callback:null,execute:function(e){var i=this.getMovie(),n=this.getRuntime(),o=i.getSceneAt(n.getCurrentTime());if(1!=n.currentScene||n.firstSceneViewed||(i.canDisplayLoader()&&(t.displayLoader(i,this.graza.getMediaPath("_skin/"+i.getLogoFile())),t.hideLoader(100)),this.graza.runCommand("ExecuteAction","elm_send_event","elag_start"),n.setFirstSceneViewed(!0)),o!=n.currentScene){if(i.isWaiting(n.currentScene)&&n.waitOnScene!=n.currentScene)this.graza.runCommand("PauseTimer"),n.waitOnScene=n.currentScene;else{var r=i.getAutoLinkSceneIndex(n.currentScene);r>=0?this.graza.runCommand("GotoScene",r):(n.waitOnScene=-1,i.isValidSceneIndex(o)?n.scenesLoaded[o]?this.graza.runCommand("ShowScene",o):this.loadAndShowScene(o):i.getLoop()?(this.graza.runCommand("GotoScene",1),i.getEndPause()&&this.graza.runCommand("PauseTimer")):this.graza.runCommand("PauseTimer"))}this.isLastFrame(o,i,n)&&this.graza.runCommand("EndAnimationReached")}else n.waitOnScene=-1,this.graza.runCommand("RefreshScene");e&&e()},loadAndShowScene:function(e){var t=this.getMovie(),i=this.getRuntime(),n=t.getSceneStartTime(e);i.referenceTime=(new Date).getTime()-n,i.scenesToLoad=t.getPreloadSceneList(i.getCurrentTime()),this.graza.runCommand("PauseTimer",this.graza.runCommand.bind(this.graza,"LoadScenes",this.graza.runCommand.bind(this.graza,"StartTimer")))},isLastFrame:function(e,t,i){return(null===e||i.currentScene==t.getLastSceneIndex())&&i.getCurrentTime()>=t.getMovieDuration()}})}),define("graza/controller/command/ShowSceneCommand",["graza/controller/ACommand","lib/Utils"],function(e,t){return e.extend({callback:null,execute:function(e,i){if(this.movie=this.getMovie(),this.runtime=this.getRuntime(),!this.movie.isValidSceneIndex(e))return void console.info("The scene index ["+e+"] is not valid");if(!this.runtime.scenesLoaded[e])return void console.info("The scene ["+e+"] is not loaded");this.graza.container.hideAll();var n=[];this.movie.isMasterVisible(e)&&(n=n.concat(this.movie.getMasterObjectList()));for(var o=0,r=this.graza.container.overActors.length;o<r;o++){var s=this.graza.container.overActors[o];this.graza.container.getUIObject(s).enableEvents(!1)}this.movie.isClickable(e)?this.graza.container.container.css("pointer-events","auto"):this.graza.container.container.css("pointer-events","none"),this.graza.container.video&&(this.insertBefore=!0),n=n.concat(this.movie.getSceneObjectList(e));for(var a=n.length,o=0;o<a;o++){var l=this.graza.container.getUIObject(n[o]);l&&(l.currentSceneTweens=this.movie.getActorTweens(e,n[o]),this.appendObject(l),l.currentSceneTweens.length&&l.applyTween(l.currentSceneTweens[0]),this.setOverActor(e,n[o]))}this.runtime.isGoingBack=this.runtime.currentScene>e,this.runtime.currentScene=e,this.runtime.history.push(e),this.graza.runCommand("Subtitles",this.runtime.getSubtitles(),this.graza.runCommand.bind(this.graza,"RefreshScene")),this.graza.container.currentInputFocused&&this.graza.container.currentInputFocused.setFocus(),this.runtime.setValue("cmi.core.score.raw",100),this.runtime.setValue("cmi.score.scaled",1),this.runtime.setValue("cmi.core.lesson_location",this.runtime.currentScene),this.runtime.isGoingBack?(this.runtime.isGoingBack=!1,this.runtime.history[this.runtime.historyIndex-1]==this.runtime.currentScene?this.runtime.historyIndex--:(this.runtime.historyIndex++,this.runtime.history[this.runtime.historyIndex]=this.runtime.currentScene)):this.runtime.history[this.runtime.historyIndex]!=this.runtime.currentScene&&(this.runtime.historyIndex++,this.runtime.history[this.runtime.historyIndex]=this.runtime.currentScene),this.runtime.setValue("cmi.core.session_time",t.seconds2HMSString(this.runtime.getSessionTime())),this.runtime.commit(),$(".loader").hide(),setTimeout(function(){this.graza.runCommand("ExecuteAction","elm_send_event","elag_scene_"+e)}.bind(this),10),i&&i.call()},appendObject:function(e){e.show(),this.graza.container.shownUIObject.push(e);var t=!0;switch(e.type){case"video":t=!1,this.insertBefore=!1,void 0==this.graza.container.video&&(this.graza.container.video=e.div,this.graza.container.container.append(e.div))}t&&(this.insertBefore?e.div.insertBefore(this.graza.container.video):this.graza.container.container.append(e.div))},setOverActor:function(e,t){for(var i=this.graza.container.getUIObject(t),n=this.movie.getListOverActorId(e,t),o=0;o<n.length;o++){var r=n[o];if(r){var s=this.graza.container.getUIObject(r);this.graza.container.overActors.indexOf(t)<0&&this.graza.container.overActors.push(t),i.onEnterEvent(s.show.bind(s,!0)),i.onLeaveEvent(s.hide.bind(s,!0)),i.haveOverActor=!0,i.enableEvents(!0),s.hide(!0)}}}})}),define("graza/controller/command/SoundCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e,t,i){var n=this.getMovie(),o=this.getRuntime(),r=n.getTimeLineSounds(),s=n.getTimeLineVideos(),a=o.getSoundVolume();switch((void 0==t||""==t||isNaN(t))&&(t=10),e){case"mute":o.setSoundMute(!o.getSoundMute());break;case"sound_mute_on":case"mute_on":case"sound_off":o.setSoundMute(!0);break;case"mute_off":case"sound_mute_off":case"unmute":case"sound_on":o.setSoundMute(!1);break;case"volume_up":case"set_volume_up":a=Math.min(100,Math.max(0,a+t)),o.setSoundVolume(a),o.setSoundMute(!1);break;case"volume_down":case"set_volume_down":a=Math.min(100,Math.max(0,a-t)),o.setSoundVolume(a),o.getSoundVolume()<=0&&o.setSoundMute(!0)}for(var a=o.getSoundMute()?0:o.getSoundVolume()/100,l=0;l<r.length;l++){var c,h,u=null;c=r[l].getAttribute("author_id"),null!=c&&(h=this.graza.container.sounds[c]),null!=h&&(u=h.media),null!=u&&null!=u.element&&(u.element.volume=a)}for(var l=0;l<s.length;l++){var c,d,u=null;c=s[l].getAttribute("author_id"),null!=c&&(d=this.graza.container.videos[c]),null!=d&&(u=d.media),null!=u&&null!=u.element&&(u.element.volume=a)}}})}),
define("graza/controller/command/StartTimerCommand",["graza/controller/ACommand","lib/AnimationFrameHelper","lib/Media"],function(e,t,i){return e.extend({execute:function(e){var n=Date.now(),o=this.getRuntime(n);if(o.referenceTime){if(o.pausedTime){var r=o.pausedTime-o.referenceTime;o.referenceTime=n-r,o.pausedTime=null}}else{var r=o.currentScene?this.getMovie().getSceneStartTime(o.currentScene):0;o.referenceTime=n-r}o.timerId=t.subscribe(this.graza.runCommand.bind(this.graza,"ShowFrame")),t.start(),this.onVisibilityChangeEvent(o),i.play("../_shared/medias/blank.mp3"),this.graza.container.resumeButton&&this.graza.container.resumeButton.hide(),o.isPlaying=!0,e&&e()},onVisibilityChangeEvent:function(e){$(window).focus(function(){e.isPlaying&&e.isPageVisible&&(e.isPageVisible=!1,t.unsubscribe(e.timerId),t.setRequestAnimationFrame(t.getVisibleTabRequestAnimationFrame()),e.timerId=t.subscribe(this.graza.runCommand.bind(this.graza,"ShowFrame")),t.start())}.bind(this)),$(window).blur(function(){e.isPlaying&&!e.isPageVisible&&(e.isPageVisible=!0,t.unsubscribe(e.timerId),t.setRequestAnimationFrame(t.getHiddenTabRequestAnimationFrame()),e.timerId=t.subscribe(this.graza.runCommand.bind(this.graza,"ShowFrame")),t.start())}.bind(this))}})}),define("graza/controller/command/StartupCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e){require(["graza/controller/command/EndAnimationReachedCommand","graza/controller/command/ExecuteActionCommand","graza/controller/command/GoNextSceneCommand","graza/controller/command/GoPreviousSceneCommand","graza/controller/command/GotoSceneCommand","graza/controller/command/GotoStartCommand","graza/controller/command/GotoTimeCommand","graza/controller/command/InitializeViewCommand","graza/controller/command/LoadMovieCommand","graza/controller/command/LoadRuntimeCommand","graza/controller/command/LoadScenesCommand","graza/controller/command/LoadSkinCommand","graza/controller/command/PauseTimerCommand","graza/controller/command/QuitCommand","graza/controller/command/RefreshSceneCommand","graza/controller/command/ShowFrameCommand","graza/controller/command/ShowSceneCommand","graza/controller/command/StartTimerCommand","graza/controller/command/StartupCommand","graza/controller/command/StopTimerCommand","graza/controller/command/SubtitlesCommand"],this.onLoadedCommandsEvent.bind(this,e))},onLoadedCommandsEvent:function(e){this.graza.runCommand("LoadMovie",e)}})}),define("graza/controller/command/StopTimerCommand",["graza/controller/ACommand","lib/AnimationFrameHelper"],function(e,t){return e.extend({execute:function(e){var i=this.getRuntime();i?(t.unsubscribe(i.timerId),i.isPlaying=!1,i.referenceTime=null,e&&e.call()):console.info("The Runtime of animation is not defined")}})}),define("graza/controller/command/SubtitlesCommand",["graza/controller/ACommand"],function(e){return e.extend({execute:function(e,t){for(var i=this.graza.container.shownUIObject,n=i.length,o=this.getMovie(),r=0;r<n;r++)o.isSubtitleElement(i[r].id)&&(e?i[r].show(!0):i[r].hide(!0));t&&t.call()}})}),define("lib/graphic/Arrow",["lib/Class","lib/Utils"],function(e,t){return e.extend({init:function(e){this.options=e,this.element=$("<div/>")},setOptions:function(e){this.options=$.extend(this.options,e),this.draw()},draw:function(){var e=parseInt(this.options.pt1.x),i=parseInt(this.options.pt1.y),n=parseInt(this.options.pt2.x),o=parseInt(this.options.pt2.y),r=n-e,s=o-i,a=Math.sqrt(r*r+s*s),l=parseInt(this.options.borderWidth),c=Math.min(this.options.arrowWidth,a/2-l/2),h=parseInt(this.options.arrowHeight),u=Math.sqrt(Math.pow(h,2)+Math.pow(c,2)),d=180/Math.PI*Math.asin(h/u),g=2*(l/Math.sin(Math.PI/180*(90-d))+h),f=Math.abs(a),p=l/2*(1/Math.sin(Math.PI/180*d)),m=f+p;if(a>0){var A;A=0!=r?180/Math.PI*Math.atan(s/r):i>o?-90:90,r<0&&(A+=180)}var v=$("<canvas />").attr({width:m,height:g}),b=v[0].getContext("2d");b.lineJoin="miter",b.translate(l/2*u/h,g/2),b.beginPath(),b.moveTo(0,0);var y,S;if(this.options.line_style&&"solid"!=this.options.line_style){switch(this.options.line_style){case"dotted":var w=1+l,x=1+l;break;case"dashed":var w=15+l,x=4+l;break;default:var w=1,x=1}b.setLineDash&&void 0!=b.setLineDash&&b.setLineDash([w,x])}this.options.arrow1?(b.lineTo(c,-h),b.lineTo(c,h),b.closePath(),this.strokeLine(b,l),y=c):y=0,this.options.arrow2?(b.beginPath(),b.lineTo(a-2*c,0),b.lineTo(a-2*c,-h),b.lineTo(a-c,0),b.lineTo(a-2*c,h),b.closePath(),this.strokeLine(b,l),S=a-2*c):S=a,b.moveTo(y,0),b.lineTo(S,0),this.strokeLine(b,l);var C=e-Math.cos(Math.PI/180*A)*p,k=i-g/2-Math.sin(Math.PI/180*A)*p;t.rotate(v,A,"0","translate("+C+"px, "+k+"px)"),$(v).css({position:"absolute",opacity:this.options.alpha}),this.element.html(v)},strokeLine:function(e,t){e.strokeStyle=this.options.strokeColor,e.fillStyle=this.options.fillColor,e.lineWidth=t,e.fill(),e.stroke()},getElement:function(){return this.element}})}),define("graza/view/uiobject/UIOArrow",["graza/view/AUIObject","lib/graphic/Arrow","lib/Utils"],function(e,t,i){return e.extend({setXML:function(e){this._super(e),this.arrowWidth=e.getAttribute("arrow_width"),this.arrowHeight=e.getAttribute("arrow_height"),this.strokeColor=e.getAttribute("border_color"),this.fillColor=e.getAttribute("bgcolor"),this.borderWidth=e.getAttribute("border_width"),this.line_style=e.getAttribute("line_style"),this.arrow1="1"==e.getAttribute("arrow1"),this.arrow2="1"==e.getAttribute("arrow2")},load:function(e){this.loaded||(this.loaded=!0,this.arrow=new t({arrowWidth:this.arrowWidth,arrowHeight:this.arrowHeight,strokeColor:this.strokeColor,fillColor:this.fillColor,arrow1:this.arrow1,arrow2:this.arrow2,borderWidth:this.borderWidth,line_style:this.line_style}),this.div.append(this.arrow.getElement())),e&&e()},draw:function(){this.arrow.setOptions({pt1:{x:this.tween.x,y:this.tween.y},pt2:{x:this.tween.width,y:this.tween.height},alpha:this.tween.alpha/100})}})}),define("graza/view/uiobject/UIOBalloon",["graza/view/AUIObject"],function(e){return e.extend({})}),define("graza/view/uiobject/UIOBar",["graza/view/AUIObject"],function(e){return e.extend({})}),define("graza/view/uiobject/UIOCommentBox",["graza/view/AUIObject"],function(e){return e.extend({})}),define("graza/view/uiobject/UIOEldar",["graza/view/AUIObject"],function(e){return e.extend({})}),define("graza/view/uiobject/UIOElfe",["graza/view/AUIObject"],function(e){return e.extend({})}),define("lib/graphic/Ellipse",["lib/Class"],function(e){return e.extend({init:function(e){var t={width:0,height:0,borderWidth:0,left:0,top:0,borderStyle:"solid",borderColor:"#FFF",backgroundColor:"none",opacity:100,borderRadius:0,pointerEvents:"none",transparent:0};this.options=$.extend(t,e),this.element=$("<canvas/>"),this.element.css({width:"100%",height:"100%",display:"block"}),this.draw()},setOptions:function(e){this.options=$.extend(this.options,e),this.draw()},getElement:function(){return this.element},draw:function(){this.element.get(0).width=this.options.width,this.element.get(0).height=this.options.height;var e=this.element.get(0).getContext("2d"),t=this.options.left+this.options.borderWidth/2,i=this.options.top+this.options.borderWidth/2,n=this.options.width-this.options.borderWidth,o=this.options.height-this.options.borderWidth;e.fillStyle=this.options.backgroundColor,e.beginPath(),e.strokeStyle=this.options.borderColor,e.lineWidth=this.options.borderWidth,e.globalAlpha=this.options.opacity/100;var r=n/2*.5522848,s=o/2*.5522848,a=t+n,l=i+o,c=t+n/2,h=i+o/2;e.moveTo(t,h),e.bezierCurveTo(t,h-s,c-r,i,c,i),e.bezierCurveTo(c+r,i,a,h-s,a,h),e.bezierCurveTo(a,h+s,c+r,l,c,l),e.bezierCurveTo(c-r,l,t,h+s,t,h),e.closePath(),this.options.borderWidth&&e.stroke(),this.options.transparent||e.fill()}})}),define("graza/view/uiobject/UIOEllipse",["graza/view/AUIObject","lib/graphic/Ellipse","lib/Utils"],function(e,t,i){return e.extend({setXML:function(e){this._super(e);var t=i.parseXMLAttributes(e);this.options={width:t.width||0,height:t.height||0,borderWidth:"1"==t.border&&t.border_width?t.border_width:0,borderStyle:"solid",borderColor:t.border_color||"#FFF",borderRadius:"1"==t.rounded&&t.ray?t.ray+"px":0,pointerEvents:"none",display:"block"},"1"==t.transparent&&(this.transparent=!0),"1"==t.border&&"1"==t.transparent?this.options=$.extend(this.options,{backgroundColor:"transparent"}):this.options=$.extend(this.options,{opacity:"1"==t.transparent?0:100,backgroundColor:t.bgcolor||"none"})},load:function(e){this.loaded||(this.ellipse=new t(this.options),this.div.append(this.ellipse.getElement()),this.loaded=!0),e.call()},draw:function(){this._super(),this.ellipse.setOptions({width:this.tween.width,height:this.tween.height})}})}),define("graza/view/uiobject/UIOGraphic",["graza/view/AUIObject"],function(e){return e.extend({image:null,setXML:function(e){this._super(e),this.filename=e.getAttribute("file"),"swf"!==this.filename.split(".").pop()?(this.image=new Image,this.aspect=e.getAttribute("aspect")||"stretch",this.image.style.width="100%",this.image.style.height="100%",this.image.style.display="block",this.imageWidth=+e.getAttribute("width"),this.imageHeight=+e.getAttribute("height"),this.div.append(this.image)):console.warn('The file "'+this.filename+"\" can't be loaded")},load:function(e){!this.loaded&&this.image?(this.loaded=!0,this.image.src=this.graza.getMediaPath(this.filename),this.image.addEventListener("load",e),this.image.addEventListener("error",this.onError.bind(this,e))):e()},draw:function(){if(this._super(),this.image&&"stretch"!=this.aspect){var e,t,i;this.image.style.position="absolute";var n=this.tween.width/this.imageWidth,o=this.tween.height/this.imageHeight;"fit"==this.aspect?e=n>o?o:n:"cover"==this.aspect&&(this.div.css({overflow:"hidden"}),e=n<o?o:n),t=this.imageWidth*e,i=this.imageHeight*e,this.image.style.width=t+"px",this.image.style.height=i+"px",this.image.style.left=(this.tween.width-t)/2+"px",this.image.style.top=(this.tween.height-i)/2+"px"}},onError:function(e){console.warn("Image not found : "+this.graza.getMediaPath(this.filename)),e()}})}),define("graza/view/uiobject/UIOInput",["graza/view/AUIObject"],function(e){return e.extend({init:function(){this._super.apply(this,arguments),this.enableEvents(!0)},setXML:function(e){if(this._super(e),e.getAttribute("image"))var t=this.graza.getMediaPath(e.getAttribute("image")),i={backgroundImage:"url("+t+")",backgroundSize:"100% 100%"};else var i={background:"1"==e.getAttribute("transparent")?"none":e.getAttribute("bgcolor")};this.style=$.extend(i,{background:i,border:"1"==e.getAttribute("border")?"solid "+e.getAttribute("border_width")+"px "+e.getAttribute("bordercolor"):"none",fontWeight:"1"==e.getAttribute("bold")?"bold":"normal",fontStyle:"1"==e.getAttribute("italic")?"italic":"normal",textDecoration:"1"==e.getAttribute("underline")?"underline":"none"})},load:function(e){this.loaded||(this.input=$("<input/>"),this.input.css($.extend(this.style,{position:"absolute",left:0,top:0,width:"100%",height:"100%"})),this.input.on("keyup",this.onKeyUpEvent.bind(this)),this.input.on("focus",this.onFocusEvent.bind(this)),this.input.on("blur touchcancel",this.onBlurEvent.bind(this)),this.div.append(this.input),this.loaded=!0),e&&e()},setContainer:function(e){this.container=e},onKeyUpEvent:function(){for(var e=this.container.summaries.length,t=0;t<e;t++)this.container.summaries[t].applyFilter(this.input.val())},onFocusEvent:function(){Utils.isMobile()&&(Utils.getParentWindow().off("resize"),this.container.currentInputFocused=this)},onBlurEvent:function(){Utils.isMobile()&&(this.container.resizeScreen(),Utils.getParentWindow().on("resize",this.container.resizeScreen.bind(this)),this.container.currentInputFocused=null,this.onKeyUpEvent())},setFocus:function(){this.input.focus()}})}),define("graza/view/uiobject/UIOMathML",["graza/view/AUIObject","lib/Utils"],function(e,t){return e.extend({})}),define("graza/view/uiobject/UIONotesViewer",["graza/view/AUIObject","lib/Utils"],function(e,t){return e.extend({})}),define("graza/view/uiobject/UIOOutput",["graza/view/AUIObject","lib/Utils"],function(e,t){return e.extend({})}),define("graza/view/uiobject/UIORectangle",["graza/view/AUIObject","lib/graphic/Rectangle","lib/Utils"],function(e,t,i){return e.extend({setXML:function(e){this._super(e);var t=i.parseXMLAttributes(e);this.options={width:t.width||"100%",height:t.height||"100%",borderWidth:"1"==t.border&&t.border_width?t.border_width+"px":0,borderStyle:"solid",borderColor:t.border_color||"#FFF",borderRadius:"1"==t.rounded&&t.ray?t.ray+"px":0,pointerEvents:"none"},"1"==t.border&&"1"==t.transparent?this.options=$.extend(this.options,{backgroundColor:"transparent"}):this.options=$.extend(this.options,{opacity:"1"==t.transparent?0:100,backgroundColor:t.bgcolor?i.formatColor(t.bgcolor):"transparent"})},load:function(e){this.loaded||(this.loaded=!0,this.rectangle=new t(this.options),this.div.append(this.rectangle.getElement())),e.call()},draw:function(){this._super();var e=0!=this.options.borderWidth?+i.removeCSSUnit(this.options.borderWidth)/+this.tween.width*100:0,t=0!=this.options.borderWidth?+i.removeCSSUnit(this.options.borderWidth)/+this.tween.height*100:0;this.rectangle.setOptions({width:100-e+"%",height:100-t+"%"})}})}),define("graza/view/uiobject/UIOSound",["graza/view/AUIObject","lib/Media"],function(e,t){return e.extend({init:function(){console.log("sound")},setXML:function(e){this._super(e),this.filename=e.getAttribute("file")},load:function(){if(!this.loaded){this.loaded=!0;var e=this.graza.getMediaPath(this.filename);this.media=new t(e)}},play:function(){this.media.play()},pause:function(e){this.media.pause(e)},show:function(){this._super(),this.media&&this.media.play()}})}),define("graza/view/uiobject/UIOSummary",["graza/view/AUIObject","lib/Utils","lib/HTMLHelper"],function(e,t,i){return e.extend({scenes:null,currentFilter:"",init:function(){this.scenes=[],this._super.apply(this,arguments),this.enableEvents(!0)},setXML:function(e){this._super(e),this.xml=e,this.filterType=e.getAttribute("filtertype")},applyCSS:function(){var e=this.xml;if(this.div.css({overflow:"auto"}),e.getAttribute("item_on_image")){var t=new Image;t.src=this.graza.getMediaPath(e.getAttribute("item_on_image")),t.addEventListener("load",function(n){var o=this.div.width()/t.naturalWidth*t.naturalHeight;i.addCSSRule("#"+this.div.attr("id")+" li",{height:o+"px","background-image":"url("+t.src+")","background-size":"cover"});var r=new Image;r.src=this.graza.getMediaPath(e.getAttribute("item_roll_image")),i.addCSSRule("#"+this.div.attr("id")+" li:hover",{"background-image":"url("+r.src+")","background-size":"cover"});var s=new Image;s.src=this.graza.getMediaPath(e.getAttribute("item_selected_image")),i.addCSSRule("#"+this.div.attr("id")+" .active",{"background-image":"url("+s.src+")","background-size":"cover"})}.bind(this),!1)}if(i.addCSSRule("#"+this.div.attr("id")+" li",{cursor:"pointer"}),i.addCSSRule("#"+this.div.attr("id")+" li.active",{"font-family":e.getAttribute("item_selected_font"),"font-size":e.getAttribute("item_selected_fontsize")+"px",color:e.getAttribute("item_selected_fontcolor"),"font-weight":"1"==e.getAttribute("item_selected_bold")?"bold":"normal","font-style":"1"==e.getAttribute("item_selected_italic")?"italic":"normal","text-decoration":"1"==e.getAttribute("item_selected_underline")?"underline":"normal","background-color":"1"==e.getAttribute("item_selected_transparent")?"":e.getAttribute("item_selected_bgcolor"),border:"1"==e.getAttribute("item_selected_border")?"solid "+e.getAttribute("item_selected_border_width")+"px "+e.getAttribute("item_selected_bordercolor"):"","line-height":"1.5em"}),i.addCSSRule("#"+this.div.attr("id")+" ul",{"list-style":"inside none","padding-left":0,margin:0,"font-family":e.getAttribute("item_on_font"),"font-size":e.getAttribute("item_on_fontsize")+"px",color:e.getAttribute("item_on_fontcolor"),"font-weight":"1"==e.getAttribute("item_on_bold")?"bold":"normal","font-style":"1"==e.getAttribute("item_on_italic")?"italic":"normal","text-decoration":"1"==e.getAttribute("item_on_underline")?"underline":"normal","background-color":"1"==e.getAttribute("item_on_transparent")?"":e.getAttribute("item_on_bgcolor"),border:"1"==e.getAttribute("item_on_border")?"solid "+e.getAttribute("item_on_border_width")+"px "+e.getAttribute("item_on_bordercolor"):"","line-height":"1.5em"}),i.addCSSRule("#"+this.div.attr("id")+" li:hover",{"font-family":e.getAttribute("item_roll_font"),"font-size":e.getAttribute("item_roll_fontsize")+"px",color:e.getAttribute("item_roll_fontcolor"),"font-weight":"1"==e.getAttribute("item_roll_bold")?"bold":"normal","font-style":"1"==e.getAttribute("item_roll_italic")?"italic":"normal","text-decoration":"1"==e.getAttribute("item_roll_underline")?"underline":"normal","background-color":"1"==e.getAttribute("item_roll_transparent")?"":e.getAttribute("item_roll_bgcolor"),border:"1"==e.getAttribute("item_roll_border")?"solid "+e.getAttribute("item_roll_border_width")+"px "+e.getAttribute("item_roll_bordercolor"):"","line-height":"1.5em"}),e.getAttribute("image"))var n=this.graza.getMediaPath(e.getAttribute("image")),o={"background-image":"url("+n+")","background-size":"100% 100%"};else var o={background:"1"==e.getAttribute("transparent")?"none":e.getAttribute("bgcolor")};i.addCSSRule("#"+this.div.attr("id"),$.extend(o,{border:"1"==e.getAttribute("border")?"solid "+e.getAttribute("border_width")+"px "+e.getAttribute("bordercolor"):"","box-sizing":"border-box"}))},show:function(){this._super.apply(this,arguments),this.applyCSS()},setData:function(e){var i=e.length;this.scenes=[];for(var n=0;n<i;n++)"1"!=e[n].getAttribute("hide_summary")&&this.scenes.push({name:t.getDecodedString(e[n].getAttribute("name")),sceneId:n+1,keywords:""})},load:function(e){if(!this.loaded){this.currentFilter="";for(var i=$("<ul/>"),n=this.scenes.length,o=0;o<n;o++){var r=$("<li/>");r.on("click",this.onClickEvent.bind(this,this.scenes[o].sceneId)),r.text(t.getDecodedString(this.scenes[o].name)),this.scenes[o].element=r,i.append(r)}this.div.append(i),this.loaded=!0}e&&e()},onClickEvent:function(e){this.graza.runCommand("GotoScene",e)},setCurrentScene:function(e,t){var i=this.scenes.filter(function(t){return t.sceneId<=e}).pop();if(i&&t){$(".active",this.div).removeClass("active"),$(i.element).addClass("active");if(i.element.parent().height()>$(this.div).height()){var n=i.element.position().top;$(this.div).scrollTop(n)}}},applyFilter:function(e){if(e!=this.currentFilter){this.currentFilter=e;for(var t=this.scenes.length,i=0;i<t;i++)this.filterScene(this.scenes[i],e)?this.scenes[i].element.show():this.scenes[i].element.hide()}},filterScene:function(e,i){var n=!1;return i=i.toLowerCase(),""!=i?("all"!=this.filterType&&"keywords"!=this.filterType||void 0!=e.keywords&&t.getDecodedString(e.keywords).toLowerCase().indexOf(i)>-1&&(n=!0),"all"!=this.filterType&&"title"!=this.filterType||void 0!=e.name&&t.getDecodedString(e.name).toLowerCase().indexOf(i)>-1&&(n=!0),"title_begin"==this.filterType&&void 0!=e.name&&0==t.getDecodedString(e.name).toLowerCase().indexOf(i)&&(n=!0)):n=!0,n}})}),define("graza/view/uiobject/UIOText",["graza/view/AUIObject","lib/TextHelper","lib/Utils"],function(e,t,i){return e.extend({pattern:null,divText:null,init:function(e){this._super(e),this.divText=$("<div />"),this.div.append(this.divText),this.pattern=/\[\!([A-Z]+)\!\]/g,this.div.css({overflow:"hidden",lineHeight:t.LINE_HEIGHT_FACTOR})},setXML:function(e){this._super(e);var i=t.parseTextNode(e,e,this.graza.getMediaPath.bind(this.graza),null,"auto");this.originalText=i.get(0).innerHTML,this.animation=e.getAttribute("animation"),this.duration=e.getAttribute("duration"),this.auto_adjust=e.getAttribute("auto_adjust"),this.animation_first="1"==e.getAttribute("animation_first"),this.vertical_centred="1"==e.getAttribute("vertical_centred"),this.isTransparent="1"==e.getAttribute("transparent"),this.divText.css({width:"100%",height:"100%"}),this.divText.html(i)},setVariableList:function(e){this.variables=e},setData:function(e){var i=t.replaceVariables(this.originalText,e);i!=this.originalText&&this.divText.html(i)},draw:function(){if(this._super(),"none"!=this.auto_adjust){var e=32,t=$(this.divText.children("div")[0]);if(t){var n=t.children("div");if(n)for(;e>0&&n.height()>this.div.height();)i.decreaseTextSize(n.find("span")),e--}}if(this.isTransparent&&this.divText.find("div").each(function(){$(this).css("background-color","transparent")}),this.vertical_centred){var o=this.divText.children("div");o.css({display:"table"});o.children("div").css({display:"table-cell",verticalAlign:"middle"})}},refreshTextAnimation:function(e){try{var t=this.animation,i=this.duration,n=Math.min(e/(1e3*i),1),o=null;switch(t){case"alpha":var r=n;o={opacity:r};break;case"alpha_back":var r=1-n;o={opacity:r};break;case"blur":var s=1/n*5-5;o={filter:"blur("+s+"px)","-webkit-filter":"blur("+s+"px)","-moz-filter":"blur("+s+"px)","-o-filter":"blur("+s+"px)","-ms-filter":"blur("+s+"px)"};break;case"blur_back":var a=5*n;o={filter:"blur(px)","-webkit-filter":"blur("+a+"px)","-moz-filter":"blur("+a+"px)","-o-filter":"blur("+a+"px)","-ms-filter":"blur("+a+"px)"};break;case"side_slide":var l=this.div.css("left").substring(0,this.div.css("left").length-2),c=Math.round(n*l-l),s=1/n*5-5,r=n;o={position:"absolute",filter:"blur("+s+"px)","-webkit-filter":"blur("+s+"px)","-moz-filter":"blur("+s+"px)","-o-filter":"blur("+s+"px)","-ms-filter":"blur("+s+"px)",opacity:r,left:c+"px"};break;case"top_slide":var h=this.div.css("top").substring(0,this.div.css("top").length-2),u=Math.round(n*h-h),s=1/n*5-5,r=n;o={position:"absolute",filter:"blur("+s+"px)","-webkit-filter":"blur("+s+"px)","-moz-filter":"blur("+s+"px)","-o-filter":"blur("+s+"px)","-ms-filter":"blur("+s+"px)",opacity:r,top:u+"px"}}null!=o&&this.divText.css(o)}catch(e){console.warn("refreshTextAnimation- error: "+e)}}})}),define("lib/graphic/Balloon",["lib/Class"],function(e){return e.extend({calculated:!1,init:function(e){this.element=$("<div/>"),this.canvas=$("<canvas/>"),this.context=this.canvas.get(0).getContext("2d"),this.options=e,this.element.append(this.canvas)},setOptions:function(e){this.options=$.extend(this.options,e),this.draw()},draw:function(){var e=this.options.border_width,t=.5*this.options.height,i=this.options.ray>t?t:this.options.ray,n=this.options.left+e,o=this.options.top+e,r=this.options.left+this.options.width+e,s=this.options.top+this.options.height-this.options.point_height,a=this.options.left+this.options.width/2-this.options.point_width,l=this.options.left+this.options.width/2+this.options.point_width,c=this.options.left+this.options.width/2+1.5*this.options.point_width,h=this.options.top+this.options.height;this.canvas.attr("width",r+e),this.canvas.attr("height",h+e),this.context.moveTo(n,o+i),this.context.quadraticCurveTo(n,o,n+i,o),this.context.lineTo(r-i,o),this.context.quadraticCurveTo(r,o,r,o+i),this.context.lineTo(r,s-i),this.context.quadraticCurveTo(r,s,r-i,s),this.context.lineTo(l,s),this.context.lineTo(c,h),this.context.lineTo(a,s),this.context.lineTo(n+i,s),this.context.quadraticCurveTo(n,s,n,s-i),this.context.moveTo(n,s-i),this.context.lineTo(n,o+i),this.context.lineWidth=e,this.context.strokeStyle=this.options.border?this.options.border_color:this.options.bgcolor,this.context.fillStyle=this.options.bgcolor,this.context.lineCap="round",this.context.lineJoin="round",this.options.transparent||this.context.fill(),this.context.stroke()},getElement:function(){return this.element}})}),define("graza/view/uiobject/UIOTextballoon",["graza/view/AUIObject","lib/graphic/Balloon","lib/TextHelper","lib/Utils"],function(e,t,i,n){return e.extend({options:null,text:null,setXML:function(e){this._super(e),this.options={ray:+e.getAttribute("ray"),point_height:+e.getAttribute("point_height"),point_width:+e.getAttribute("point_width"),alpha:+e.getAttribute("alpha"),bgcolor:e.getAttribute("bgcolor"),border_width:+e.getAttribute("border_width"),border:"1"===e.getAttribute("border"),transparent:"1"===e.getAttribute("transparent"),border_color:e.getAttribute("border_color"),vertical_centred:"1"===e.getAttribute("vertical_centred")},this.text=i.parseTextNode(e,e,this.graza.getMediaPath.bind(this.graza))},load:function(e){if(!this.loaded){this.loaded=!0,this.balloon=new t(this.options);var n=this.balloon.getElement();n.css({position:"absolute"}),this.div.append(n),this.text.css({background:"none",border:"none",position:"absolute",top:this.options.border_width,left:this.options.border_width,lineHeight:i.LINE_HEIGHT_FACTOR}),this.text.children("div").css({borderRadius:this.options.ray+"px"}),this.textHeight=this.textHeight||this.text.height(),this.div.append(this.text)}e&&e()},draw:function(){this._super(),this.balloon.setOptions({left:0,top:0,width:this.tween.width,height:this.tween.height}),this.text.css({width:this.tween.width,height:this.tween.height});var e={};e.transform="",this.tween.hflip&&(e.transform+="scaleX(-1)"),this.tween.vflip&&(e.transform+=" scaleY(-1)"),this.text.css(e)}})}),define("graza/view/uiobject/UIOVideo",["graza/view/AUIObject","lib/Media","lib/Utils"],function(e,t,i){return e.extend({media:null,setXML:function(e){this._super(e),this.filename=e.getAttribute("file")},isSupported:function(e){return i.checkSupportExtensionMedia(this.filename,i.nonSupportedVideoFormats,e)},load:function(e){if(!this.loaded&&this.isSupported(!1)){var i=this.graza.getMediaPath(this.filename);this.media=new t(i),this.loaded=!0}e()},show:function(){this.isSupported(!0)&&(this._super(),this.media&&void 0==this.div.get(0).querySelector("video")&&(this.div.append(this.media.getOutput()),this.media.play()))},play:function(){this.media.play()},draw:function(){this.isSupported(!1)&&(this.div.css({left:this.tween.x+"px",top:this.tween.y+"px",width:this.tween.width+"px",height:this.tween.height+"px"}),this.media.refreshOutput(this.tween.width,this.tween.height))},refreshStateMedia:function(e,t,i){this.media.refreshStateMedia(e,t,i)},setPosition:function(e,t){this.isSupported(!1)&&this.media.setPosition(e,t)},pause:function(e){this.media.pause(e)},getDeltaPosition:function(e){return this.media.getDeltaPosition(e)}})});